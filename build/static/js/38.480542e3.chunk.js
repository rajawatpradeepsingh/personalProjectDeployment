(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[38],{1081:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a(22),r=a(804),n=a(219),o=a(218),l=a(836),u=a(762),i=a(798),d=a(75),m=a(13),b=a(97),h=a(801),g=a(1);const f=Object(s.forwardRef)(((e,t)=>{let{open:a,setOpen:c,...r}=e;const n=Object(s.useMemo)((()=>m.a.getHeaders()),[]),[o,u]=Object(s.useState)(1),[i,d]=Object(s.useState)(0),[b,f]=Object(s.useState)([]),v=Object(s.useCallback)((async()=>{const e=await Object(l.b)(n,o,10);e&&(f(e.data),d(e.totalItems))}),[o,n]);return Object(s.useEffect)((()=>{v()}),[o,n,v]),Object(s.useImperativeHandle)(t,(()=>({loadArchive(){v()},length:b.length}))),Object(g.jsx)(h.a,{openArchive:a,setOpenArchive:c,loadArchive:v,archive:b,archivedData:"resourcemanager",headers:["FullName","Role","Email","Phone Number","Start Date","End Date","Status"],totalItems:i,setArchiveCurrentPage:u,archiveCurrentPage:o})}));var v=a(420),p=a(808),j=a(805);a(814);var O=a(54);t.default=()=>{var e;const t=Object(d.useHistory)(),a=Object(s.useMemo)((()=>m.a.getHeaders()),[]),h=Object(s.useRef)(null),[y,S]=Object(s.useState)({}),[N,w]=Object(s.useState)([]),[C,k]=Object(s.useState)(0),x=Object(d.useParams)(),M=Object(s.useCallback)((e=>S({...y,search:e})),[y]),[I,D]=Object(s.useState)([]),[E,R]=Object(s.useState)({}),[F,P]=Object(s.useState)(!1),[z,A]=Object(s.useState)(!1),[H,L]=Object(s.useState)(!1),[Y,V]=Object(s.useState)(!1),[B,J]=Object(s.useState)([]),[U,T]=Object(s.useState)([]),[K,_]=Object(s.useState)(10),[q,G]=Object(s.useState)(!0),[Q,W]=Object(s.useState)(1),[X,Z]=Object(s.useState)({});Object(s.useEffect)((()=>{m.a.hasAdminRole()&&V(!0)}),[]);const $=Object(s.useCallback)((e=>{t.push("/resourcemanager/".concat(e))}),[t]),ee=Object(s.useCallback)((async()=>{try{let e=JSON.parse(sessionStorage.getItem("headers"));const t=JSON.parse(sessionStorage.getItem("userInfo")),a=await Object(b.i)(e,t.id);Z(a.userdata.roles[0]);let s=a.userdata.roles[0].managerPermission;z=s}catch(e){console.log(e)}}),[a,x.userId]);Object(s.useEffect)((()=>{ee()}),[ee]);const te=Object(s.useCallback)((async()=>{const e="pageNo=".concat(Q,"&pageSize=-1");if(Object.keys(y).length){let e="";for(const a in E)a&&(e+="&orderBy=".concat(a,"&orderMode=").concat(E[a]));const t=Object.keys(y).length?y:null;G(!0);const s=await Object(l.e)(a,Q,K,e||"&orderBy=resourceManagerId&orderMode=desc",t);s&&G(!1),200===s.status&&(D(s.data),k(s.totalItems)),200!==s.status&&v.b.error("Something's gone wrong, refresh page or contact your system admin")}else{let t="?".concat(e);for(const e in E)e&&(t+="&orderBy=".concat(e,"&orderMode=").concat(E[e]));const s=await Object(l.d)(a,t);s&&G(!1),200===s.statusCode&&(D(s.tableData),k(s.totalItems)),200!==s.statusCode&&v.b.error("Something's gone wrong, refresh page or contact your system admin")}}),[y,Q,K,a,E]);Object(s.useEffect)((()=>{te()}),[te,y,null===h||void 0===h||null===(e=h.current)||void 0===e?void 0:e.length]);const ae={onChange:e=>{Y||X.managerPermission?T(e):T([])},selectedRowKeys:U};Object(s.useEffect)((()=>{te()}),[te]);const se=Object(s.useMemo)((()=>[{title:"FullName",dataIndex:"firstName",key:"firstName",sorter:!0,render:(e,t)=>Object(g.jsx)(i.a,{label:"".concat(e).concat(t.lastName),onClick:()=>$(t.resourceManagerId)}),filterSearch:!0},{title:"Role",dataIndex:"role",key:"role",filters:O.a.map((e=>({text:e,value:e}))),filterMultiple:!1},{title:"Email",dataIndex:"email",key:"email",width:190,ellipsis:!0},{title:"Phone No.",dataIndex:"phoneNumber",key:"phoneNumber"},{title:"Status",dataIndex:"state",key:"state",sorter:!0,width:190,render:e=>Object(g.jsx)("span",{className:"table-record-status ".concat(e&&e.toLowerCase()),children:e})}]),[$]);Object(s.useEffect)((()=>{w(se)}),[se]);const ce=Object(s.useCallback)((e=>{let t=[];for(let a in e)if("string"!==typeof e[a]&&"number"!==typeof e[a]||"id"===a||""===e[a])"object"===typeof e[a]&&"FullName"!==a&&(t=t.concat(ce(e[a])));else if("FullName"===a){let s=e[a].split(" ");t.push(s[0],s[1],s[2])}else t.push(e[a]);return t}),[]);return Object(s.useEffect)((()=>{if(I){let e=[];for(let t of I){ce(t).forEach((t=>{e.includes(t)||e.push(t)}))}J(e)}}),[I,y,ce]),Object(g.jsxs)(n.a,{children:[Object(g.jsx)(o.a,{title:"Managers",actions:!0===!z&&(Y||X.managerPermission?Object(g.jsxs)(c.a,{type:"button",className:"btn main margin-left",handleClick:()=>{t.push("/addresourceManager")},children:[Object(g.jsx)(u.a,{className:"icon"}),"Add Manager"]}):"")}),Object(g.jsx)(r.a,{loading:q,data:I.map((e=>({...e,key:e.resourceManagerId}))),rowSelection:!(!Y&&!X.managerPermission)&&ae,total:C,columns:N,setColumns:w,defaultColumns:se,setCurrentPage:W,setPageSize:_,setSort:R,filters:y,setFilters:S,searchOptions:B,searchList:I,handleSearch:M,openArchive:()=>L(!0),openReports:()=>P(!0),handleConfirmArchive:async()=>{200===await Object(l.a)(a,U)?(te(),v.b.success("Manager record archived successfully!"),h.current.loadArchive(),T([])):v.b.error("Something's gone wrong, refresh page or contact your system admin")},handleCancelArchiving:()=>{T([])},removeableColumns:se.filter((e=>"Manager"!==e.title&&e.title)).map((e=>e.title))}),Object(g.jsx)(f,{open:H,setOpen:L,ref:h}),Object(g.jsx)(j.a,{showReportModal:F,setShowReportModal:P,individualReportName:"resourcemanager",individualList:I,list:I.map((e=>({id:e.resourceManagerId,name:"".concat(e.firstName," ").concat(e.lastName)}))),listLabel:"Managers",filename:"manager_report",tableFields:[{label:"Role",value:"role",key:"role"},{label:"PhoneNumber",value:"phoneNumber",key:"phoneNumber"},{label:"Email",value:"email",key:"email"},{label:"Status",value:"state",key:"state"},{label:"Start Date",value:"startDate",key:"startDate"},{label:"End Date",value:"endDate",key:"endDate"}],pdfFormatter:p.a.managerPdfFormat,csvExcelFormatter:p.a.managerCSVExcel})]})}},798:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(800);var s=a(1);const c=e=>Object(s.jsxs)("div",{className:"tablelink-container",children:[Object(s.jsx)("span",{onClick:e.onClick,className:"tablelink ".concat(e.styleRed&&"red"," ").concat(e.className&&e.className),children:e.label}),e.extra&&Object(s.jsx)("span",{className:"table-link-extra",children:e.extra})]})},814:function(e,t,a){"use strict";var s=a(2),c=a(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M296 250c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 144H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 458H208V148h560v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm440-88H728v-36.6c46.3-13.8 80-56.6 80-107.4 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 50.7 33.7 93.6 80 107.4V764H520c-8.8 0-16 7.2-16 16v152c0 8.8 7.2 16 16 16h352c8.8 0 16-7.2 16-16V780c0-8.8-7.2-16-16-16zM646 620c0-27.6 22.4-50 50-50s50 22.4 50 50-22.4 50-50 50-50-22.4-50-50zm180 266H566v-60h260v60z"}}]},name:"audit",theme:"outlined"},n=a(24),o=function(e,t){return c.createElement(n.a,Object(s.a)({},e,{ref:t,icon:r}))};t.a=c.forwardRef(o)},836:function(e,t,a){"use strict";a.d(t,"c",(function(){return d})),a.d(t,"f",(function(){return m})),a.d(t,"e",(function(){return b})),a.d(t,"b",(function(){return h})),a.d(t,"a",(function(){return g})),a.d(t,"d",(function(){return f}));var s=a(25),c=a(13),r=a(16),n=a.n(r),o=a(11),l=a.n(o);const u="".concat(s.a.serverURL,"/resourcemanager"),i=e=>{var t,a;if(!e.response)throw new Error;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&c.a.logout(),{status:null===(a=e.response)||void 0===a?void 0:a.status,err:e}},d=async(e,t)=>{try{const a=await n.a.get("".concat(s.a.serverURL,"/resourcemanager/").concat(t),{headers:e});let c={};return 200===a.status&&(c.managerData=a.data,c.Details=a.data,c.statusCode=a.status),c}catch(c){var a;return console.log(c),{statusCode:null===(a=c.response)||void 0===a?void 0:a.status}}},m=async(e,t,a)=>{try{const c=await n.a.patch("".concat(s.a.serverURL,"/resourcemanager/").concat(a),t,{headers:e});if(200===c.status)return{statusCode:200,data:c.data};if(401===c.status)return{statusCode:401}}catch(c){return console.log(c),{statusCode:c.response.status}}},b=async function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{const r=s||c?s?"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a,"&").concat(s):"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a):"?pageNo=".concat(t-1,"&pageSize=").concat(a),o=c?await n.a.put("".concat(u).concat(r),c,{headers:e}):await n.a.get("".concat(u).concat(r),{headers:e});if(200===o.status)return{data:o.data,totalItems:o.headers["total-elements"],status:o.status}}catch(r){return i(r)}},h=async(e,t,a)=>{try{const c=await n.a.get("".concat(s.a.serverURL,"/resourcemanager?archives=true&pageNo=").concat(t-1,"&pageSize=").concat(a),{headers:e});if(c)return{data:c.data.map((e=>({id:e.resourceManagerId,cellOne:"".concat(e.firstName," ").concat(e.lastName),cellTwo:e.role,cellThree:e.email,cellFour:e.phoneNumber,cellFive:"".concat(l()(null===e||void 0===e?void 0:e.startDate).format("MM.DD.YYYY")),cellSix:"".concat(l()(null===e||void 0===e?void 0:e.endDate).format("MM.DD.YYYY")),cellSeven:e.state}))),totalItems:c.headers["total-elements"]}}catch(c){console.log(c)}},g=async(e,t)=>{try{const a=await n.a.all(t.map((t=>n.a.delete("".concat(u,"/").concat(t),{headers:e}))));if(a.length)return a[0].status}catch(a){return i(a)}},f=async function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").concat(t);return await v(e,a)},v=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const s=await n.a.get("".concat(u).concat(t).concat(a),{headers:e});let c={};return 200===s.status&&(c.tableData=(e=>e.map((e=>({...e}))))(s.data),c.totalItems=s.headers["total-elements"],c.statusCode=s.status),c}catch(r){var s;return 401===r.response.status&&c.a.logout(),{statusCode:null===(s=r.response)||void 0===s?void 0:s.status}}}}}]);