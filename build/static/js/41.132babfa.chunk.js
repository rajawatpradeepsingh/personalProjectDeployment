(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[41],{1068:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a(75),n=a(28),i=a(13),l=a(159),r=a(222),o=a(204),d=a(54);var b=a(808),j=a(805),u=a(22),O=a(148),h=a(16),v=a.n(h),p=a(25),m=a(91),f=a(801),g=a(1);const x=e=>{let{open:t,setOpen:a,...c}=e;const l=Object(s.useMemo)((()=>i.a.getHeaders()),[]),r=Object(s.useMemo)((()=>"".concat(p.a.serverURL,"/interviews")),[]),o=Object(n.b)(),[d,b]=Object(s.useState)(1),[j,u]=Object(s.useState)(0),[O,h]=Object(s.useState)([]),x=Object(s.useCallback)((()=>{o(Object(m.b)(!1)),i.a.logout()}),[o]),y=Object(s.useCallback)((async()=>{try{const e=await v.a.get("".concat(r,"?archives=true&pageNo=").concat(d-1,"&pageSize=",10),{headers:l});e&&(u(e.headers["total-elements"]),h(e.data))}catch(e){console.log(e),e.response&&401===e.response.status&&x()}}),[r,d,l,x]);return Object(s.useEffect)((()=>{y()}),[d,l,y,t]),Object(g.jsx)(f.a,{openArchive:t,setOpenArchive:a,loadArchive:y,archive:O.map((e=>{var t,a,s,c,n;return{id:e.id,cellOne:"".concat(e.candidate.firstName," ").concat(e.candidate.lastName)||"",cellTwo:e.interviewers.length?e.interviewers.map((e=>"".concat(e.firstName," ").concat(e.lastName))).join(", "):"n/a",cellThree:e.jobOpening?"".concat(null===(t=e.jobOpening)||void 0===t||null===(a=t.client)||void 0===a?void 0:a.clientName," (").concat(null===(s=e.jobOpening)||void 0===s||null===(c=s.client)||void 0===c||null===(n=c.address)||void 0===n?void 0:n.city,")"):"n/a",cellFour:e.roundType||""}})),archivedData:"interviews",headers:["Candidate","Interviewer(s)","Job Opening","Round Type"],totalItems:j,setArchiveCurrentPage:b,archiveCurrentPage:d})};var y=a(804),k=a(798);a(875);const w=e=>{let{date:t,start:a,end:c,...n}=e;const i=Object(s.useMemo)((()=>new Date),[]),[l,r]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{new Date(a)<i&&r(new Date(c)<i)}),[a,c,i]),Object(g.jsxs)("div",{className:"table-schedule-display",children:[Object(g.jsx)("span",{className:"date ".concat(l&&"past"),children:Object(O.a)(t,a)}),Object(g.jsx)("span",{className:"time ".concat(l&&"past"),children:Object(O.i)(a,c)})]})};var I=a(328);const N=e=>{let{title:t,client:a,type:c,...n}=e;const l=Object(s.useMemo)((()=>i.a.getHeaders()),[]),[r,o]=Object(s.useState)({}),[d,b]=Object(s.useState)(!1);return Object(g.jsxs)("div",{className:"table-job-details",children:[n.id?Object(g.jsx)(k.a,{label:t,onClick:()=>(async e=>{try{const t=await v.a.get("".concat(p.a.serverURL,"/jobopenings/").concat(e),{headers:l});t.data&&(o(t.data),b(!0))}catch(t){console.log(t)}})(n.id),className:"small"}):Object(g.jsx)("span",{className:"job-title",children:t}),a&&Object(g.jsx)("span",{className:"client",children:a}),c&&Object(g.jsx)("span",{className:"job-type",children:c}),Object(g.jsx)(I.a,{selectedJobopening:r,setShowModal:b,showModal:d,viewOnly:!0})]})};var C=a(324),S=a(1063);const T=e=>{const[t,a]=Object(s.useState)([]);Object(s.useEffect)((()=>{e.data&&a(e.data)}),[e.data]);const c=[{title:"",dataIndex:"",key:"id",render:()=>Object(g.jsx)("span",{}),width:30,fixed:"left"},{title:"Candidate",dataIndex:"candFullName",key:"candidate.firstName",fixed:"left",width:170,render:(t,a)=>Object(g.jsx)(k.a,{onClick:()=>e.openEditPage(a.id,"schedule"),label:t})},{title:"Job Details",dataIndex:"jobOpening",key:"jobOpening.jobTitle",width:170,render:(e,t)=>Object(g.jsx)(N,{title:e,client:t.client,type:t.jobType,id:t.jobId})},{title:"Round",dataIndex:"roundType",key:"roundType",render:e=>Object(O.h)(e),width:140},{title:"Schedule",dataIndex:"date",key:"date",width:140,render:(e,t)=>{var a,s;return Object(g.jsx)(w,{date:e,start:null===(a=t.schedule)||void 0===a?void 0:a.startTimeZ,end:null===(s=t.schedule)||void 0===s?void 0:s.endTimeZ})}},{title:"Interviewers",dataIndex:"interviewers",key:"interviewers.firstName",ellipsis:!0},{title:"Decision",ellipsis:!0,dataIndex:"decision",key:"decision",width:115,render:e=>Object(g.jsx)("span",{style:e?{color:"REJECTED"===e?"var(--error)":"TENTATIVE"===e?"var(--warning)":"var(--success)"}:{color:"rgba(0,0,0,0.2)"},children:e||"pending"})},{title:"Feedback",ellipsis:!0,dataIndex:"feedback",key:"feedback"},{title:"Recording",dataIndex:"interviewLink",key:"interviewLink",ellipsis:!0}];return Object(g.jsx)(g.Fragment,{children:t.length?Object(g.jsx)(S.a,{id:"int-child-table",dataSource:t,columns:c,pagination:!1,rowKey:e=>"".concat(e.id,"_expanded")}):Object(g.jsx)("div",{children:Object(g.jsx)("span",{children:"No previous interviews"})})})};var E=a(769);const R=e=>{const[t,a]=Object(s.useState)("");return Object(g.jsxs)("div",{className:"custom-filter-container date",children:[Object(g.jsx)(E.a,{bordered:!1,onChange:e=>{a(e||"")},value:t}),Object(g.jsx)("hr",{className:"divider"}),Object(g.jsxs)("div",{className:"custom-filter-btns",children:[Object(g.jsx)("button",{type:"button",className:"custom-filter-clear",onClick:()=>{a("")},children:"Reset"}),Object(g.jsx)("button",{type:"button",className:"custom-filter-ok",onClick:()=>{t?e.setFilters({...e.filters,date:new Date(t)}):(()=>{let t={...e.filters};delete t.date,e.setFilters(t)})()},children:"OK"})]})]})};var F=a(50),P=a(345),L=a(400),M=a(771),D=a(1034),A=a(756);const J=e=>{const t=Object(s.useMemo)((()=>i.a.getHeaders()),[]),a=Object(n.b)(),[c,l]=Object(s.useState)(""),[r,o]=Object(s.useState)([]),{jobOptions:d}=Object(n.c)((e=>e.filters)),[b,j]=Object(s.useState)([]),{clientOptions:u}=Object(n.c)((e=>e.filters)),[O,h]=Object(s.useState)([]),m=Object(s.useCallback)((async()=>{if(d.length)j(d);else try{const e=await v.a.get("".concat(p.a.serverURL,"/jobopenings?dropdownFilter=true"),{headers:t});if(200===e.status){const t=e.data.map((e=>({value:e.id,label:e.jobTitle}))),s=Object(F.s)("name",t);a(Object(P.c)(s)),j(s)}}catch(s){var e;401===(null===(e=s.response)||void 0===e?void 0:e.status)&&i.a.logout()}}),[t,a,d]),f=Object(s.useCallback)((async()=>{if(u.length)h(u);else try{const e=await v.a.get("".concat(p.a.serverURL,"/clients?dropdownFilter=true"),{headers:t});if(200===e.status){const t=e.data.map((e=>{var t;return{value:e.id,label:"".concat(e.clientName," (").concat(null===(t=e.address)||void 0===t?void 0:t.city,")")}})),s=Object(F.s)("name",t);a(Object(P.b)(s)),h(s)}}catch(s){var e;401===(null===(e=s.response)||void 0===e?void 0:e.status)&&i.a.logout()}}),[t,a,u]);Object(s.useEffect)((()=>{m(),f()}),[m,f]);const x=(e,t)=>{switch(t){case"job":j(e?d.filter((t=>t.label.toLowerCase().includes(e.toLowerCase()))):d);break;case"client":h(e?u.filter((t=>t.label.toLowerCase().includes(e.toLowerCase()))):u)}},y=e=>{let{list:t,name:a}=e;return Object(g.jsx)("div",{className:"filter-checklist-container",children:t.map((e=>Object(g.jsx)(L.a,{className:"checklist-item",id:e.value,onChange:e=>((e,t,a)=>{switch(t){case"jobId":l(a?e:"");break;case"clientId":let t;a?(t=[...r],t.push(e),o(t)):(t=r.filter((t=>t!==e)),t.length?o(t):o([]))}})(e.target.id,a,e.target.checked),checked:"jobId"===a?c===e.value:r.includes(e.value),children:e.label},e.value)))})};return Object(g.jsxs)("div",{className:"custom-filter-container large",children:[Object(g.jsxs)(M.a,{accordion:!0,ghost:!0,id:"custom-filter-panels",children:[Object(g.jsxs)(M.a.Panel,{header:Object(g.jsx)("span",{className:"panel-label ".concat(Object.keys(e.filters).includes("jobId")&&"active"),children:"Job Opening"}),children:[Object(g.jsx)(D.a,{size:"small",placeholder:"Filter",onChange:e=>x(e.target.value,"job"),prefix:Object(g.jsx)(A.a,{})}),Object(g.jsx)(y,{list:b,name:"jobId"})]},"1"),Object(g.jsx)("hr",{className:"divider"}),Object(g.jsxs)(M.a.Panel,{header:Object(g.jsx)("span",{className:"panel-label ".concat(Object.keys(e.filters).includes("clientId")&&"active"),children:"Client"}),children:[Object(g.jsx)(D.a,{size:"small",placeholder:"Filter",onChange:e=>x(e.target.value,"client"),prefix:Object(g.jsx)(A.a,{})}),Object(g.jsx)(y,{list:O,name:"clientId"})]},"2")]}),Object(g.jsx)("hr",{className:"divider"}),Object(g.jsxs)("div",{className:"custom-filter-btns",children:[Object(g.jsx)("button",{type:"button",className:"custom-filter-clear",onClick:()=>{l(""),o([])},children:"Reset"}),Object(g.jsx)("button",{type:"button",className:"custom-filter-ok",onClick:()=>{c&&r.length?e.setFilters({...e.filters,jobId:c,clientId:r.join(",")}):!c&&r.length||c&&!r.length?c?e.setFilters({...e.filters,jobId:c}):e.setFilters({...e.filters,clientId:r.join(",")}):(()=>{let t={...e.filters};delete t.jobId,delete t.clientId,e.setFilters(t)})()},children:"OK"})]})]})};var z=a(219),U=a(218),H=a(2),Z=a(873),K=a(24),V=function(e,t){return s.createElement(K.a,Object(H.a)({},e,{ref:t,icon:Z.a}))};var _=s.forwardRef(V),B=a(762),q=a(765),G=a(152);a(432);t.default=()=>{const e=Object(s.useMemo)((()=>i.a.getHeaders()),[]),t=Object(n.b)(),a=Object(c.useHistory)(),[h,v]=Object(s.useState)([]),[p,m]=Object(s.useState)(!1),[f,I]=Object(s.useState)(""),[S,E]=Object(s.useState)(0),[F,P]=Object(s.useState)(1),[L,M]=Object(s.useState)({}),[D,A]=Object(s.useState)(!1),[H,Z]=Object(s.useState)(!1),[K,V]=Object(s.useState)({}),[Q,W]=Object(s.useState)({}),[X,Y]=Object(s.useState)([]),[$,ee]=Object(s.useState)(10),[te,ae]=Object(s.useState)([]),[se,ce]=Object(s.useState)([]),[ne,ie]=Object(s.useState)(!0),[le,re]=Object(s.useState)(!0),[oe,de]=Object(s.useState)(!1),be=Object(s.useMemo)((()=>i.a.getUserInfo()),[]),[je,ue]=Object(s.useState)(be.roles[0]),[Oe,he]=Object(s.useState)(!1),[ve,pe]=Object(s.useState)(!1);console.log(je),Object(s.useEffect)((()=>{i.a.hasAdminRole()&&he(!0)}),[]);const me=Object(s.useCallback)((async(s,c)=>{r.b(e,s).then((e=>{e&&("schedule"===c&&t(Object(l.e)(!0)),"feedback"===c&&t(Object(l.d)(!0)),t(Object(l.c)(e.data)),a.push("/edit/interview"))})).catch((e=>console.log(e)))}),[t,a,e]),fe=Object(s.useMemo)((()=>[{title:"Candidate",dataIndex:"candFullName",key:"candidate.firstName",sorter:!0,fixed:"left",width:170,render:(e,t)=>Object(g.jsx)(k.a,{onClick:()=>me(t.id,"schedule"),label:e})},{title:"Job Details",dataIndex:"jobOpening",key:"jobOpening.jobTitle",sorter:!0,width:200,render:(e,t)=>Object(g.jsx)(N,{title:e,client:t.client,type:t.jobType,id:t.jobId}),filterDropdown:()=>Object(g.jsx)(J,{setFilters:M,filters:L}),filterIcon:()=>Object(g.jsx)(_,{style:{color:Object.keys(L).includes("jobId")||Object.keys(L).includes("clientId")?"var(--secondary)":void 0}})},{title:"Round",dataIndex:"roundType",key:"roundType",sorter:!0,filters:d.p,filterMultiple:!1,width:140,render:e=>Object(O.h)(e)},{title:"Schedule",dataIndex:"date",key:"date",sorter:!0,width:150,render:(e,t)=>{var a,s;return Object(g.jsx)(w,{date:e,start:null===(a=t.schedule)||void 0===a?void 0:a.startTimeZ,end:null===(s=t.schedule)||void 0===s?void 0:s.endTimeZ})},filterDropdown:()=>Object(g.jsx)(R,{setFilters:M,filters:L}),filterIcon:()=>Object(g.jsx)(_,{style:{color:Object.keys(L).includes("date")?"var(--secondary)":void 0}})},{title:"Interviewer(s)",dataIndex:"interviewers",key:"interviewers.firstName",sorter:!0,ellipsis:!0},{title:"Decision",ellipsis:!0,dataIndex:"decision",filters:d.f,key:"decision",filterMultiple:!1,width:115,render:e=>Object(g.jsx)("span",{style:e?{color:"REJECTED"===e?"var(--error)":"TENTATIVE"===e?"var(--warning)":"var(--success)"}:{color:"rgba(0,0,0,0.2)"},children:e||"pending"}),sorter:!0},{title:"Feedback",ellipsis:!0,dataIndex:"feedback",key:"feedback"},{title:"Recording",dataIndex:"interviewLink",key:"interviewLink",render:e=>Object(g.jsx)(k.a,{label:e,className:"small ellipses",onClick:()=>window.open("".concat(e),"_blank")})}]),[L,me]);Object(s.useEffect)((()=>{ce(fe)}),[L,fe]),Object(s.useEffect)((()=>{m(i.a.hasRecruiterRole()),I(i.a.getUserId())}),[]);const ge=Object(s.useCallback)((async()=>{const t="pageNo=".concat(F-1,"&pageSize=-1");if(Object.keys(L).length){const a="?".concat("dropdownFilter=true","&").concat(t);return await r.e(e,L,a)}{const a=Object.keys(Q)[0]?Object.keys(Q)[0]:"",s=a?Q[a]:"",c=a?"orderBy=".concat(a,"&orderMode=").concat(s):"",n="?".concat(t,"&").concat(c);return await r.d(e,n)}}),[L,F,$,e,Q]);Object(s.useEffect)((()=>{let e=!1;return ie(!0),ge().then((e=>{200===e.status&&(v(Object(O.g)(e.data)),E(e.totalItems))})).catch((t=>{e||console.log(t)})).finally((()=>ie(!1))),()=>e=!0}),[D,ge]);const xe=async(t,a,s)=>{const c=s?"getfilter":"getfilterforcandidates",n="?candidateId=".concat(a).concat(s?"&jobId=".concat(s):"");r.c(e,c,n).then((e=>{const a=Object(O.g)(e.data.filter((e=>(s||!e.jobOpening)&&e.id!==t)));return a.length?V({...K,[t]:a}):V({...K,[t]:[]}),Object(g.jsx)(T,{data:a,openEditPage:me})})).catch((e=>console.log(e)))},ye=Object(s.useCallback)((e=>{let t=[];for(let a in e)if("string"!==typeof e[a]&&"number"!==typeof e[a]||"id"===a||""===e[a])"object"===typeof e[a]&&(t=t.concat(ye(e[a])));else{if("Internal Interview"===e[a])continue;if("fullName"===a){let s=e[a].split(" ");t.push(s[0],s[1])}else t.push(e[a])}return t}),[]);Object(s.useEffect)((()=>{if(h){let e=[];for(let t of h){ye(t).forEach((t=>{e.includes(t)||e.push(t)}))}Y(e)}}),[h,L,ye]);const ke={onChange:(e,t)=>{if(e.length&&p){const t=h.filter((e=>e.candidate.recruiterId===f)),a=t.some((t=>e.includes(t.id)));if(p&&a){const a=e.filter((e=>t.filter((t=>t.id===e)).length));ae(a)}}else ae(e)},selectedRowKeys:te};return Object(g.jsxs)(z.a,{children:[Object(g.jsx)(U.a,{title:"Interviews",actions:Object(g.jsxs)(g.Fragment,{children:[Oe||je.managerPermission||je.candidatesPermission||je.clientPermission||je.interviewsPermission||je.jobOpeningsPermission||je.onBoardingsPermission||je.settingsPermission||je.suppliersPermission?Object(g.jsxs)(u.a,{type:"button",className:"btn main margin-left",handleClick:()=>{t(Object(l.b)(!0))},children:[Object(g.jsx)(B.a,{className:"icon"}),"Schedule Interview"]}):"",Object(g.jsxs)(u.a,{type:"button",className:"btn main margin-left",handleClick:()=>{a.push("/viewzoomlink")},children:[Object(g.jsx)(q.a,{className:"icon"})," Zoom Meetings"]})]})}),Object(g.jsx)(G.a,{onActive:()=>{re(!0)},onIdle:()=>{re(!1)},onLogout:()=>{de(!0)}}),Object(g.jsx)(y.a,{loading:ne,expandedRowRender:e=>K[e.id]?Object(g.jsx)(T,{data:K[e.id],openEditPage:me}):void xe(e.id,e.candidate.id,e.jobId),data:h.map((e=>({...e,key:e.id}))),columns:se,setColumns:ce,defaultColumns:fe,rowSelection:!(!Oe&&!je.interviewsPermission)&&ke,total:S,setCurrentPage:P,setPageSize:ee,setSort:W,setFilters:M,filters:L,searchOptions:X,searchList:h,handleSearch:e=>{M({...L,search:e})},openArchive:()=>A(!0),openReports:()=>Z(!0),handleConfirmArchive:async()=>{r.a(e,te).then((()=>{ae([]),ge().then((e=>{200===e.status&&(v(Object(O.g)(e.data)),E(e.totalItems))}));const e=Object.keys(K);if(e.length){const t=K[e[0]].filter((e=>!te.includes(e.id)));V(t)}})).catch((e=>console.log(e)));const t=h.filter((e=>{var t;return te.includes(e.id)&&(null===(t=e.schedule.meetingURL)||void 0===t?void 0:t.includes("zoom"))}));if(t.length){let a=t.map((e=>Object(o.d)(e.schedule.meetingURL))).filter((e=>e));Promise.all(a.forEach((t=>Object(o.b)(t,e)))).catch((()=>console.log("Error when deleating zoom meeting")))}},handleCancelArchiving:()=>{ae([])},removeableColumns:fe.filter((e=>"Candidate"!==e.title&&e.title)).map((e=>e.title))}),Object(g.jsx)(x,{open:D,setOpen:A}),Object(g.jsx)(j.a,{showReportModal:H,setShowReportModal:Z,individualReportName:"interviews",individualList:h,list:h.map((e=>{var t;return{id:e.id,name:null===(t=e.candidate)||void 0===t?void 0:t.fullName}})),listLabel:"Interviews",filename:"interview_report",tableFields:[{label:"Interviewer(s)",value:"interviewers",key:"interviewers"},{label:"Job Opening",value:"jobTitle",key:"jobTitle"},{label:"Client",value:"client",key:"client"},{label:"Round Type",value:"roundType",key:"roundType"},{label:"Job Type",value:"jobType",key:"jobType"},{label:"Date",value:"date",key:"date"},{label:"Time",value:"time",key:"time"},{label:"Feedback",value:"feedback",key:"feedback"},{label:"Decision",value:"decision",key:"decision"}],pdfFormatter:b.a.interviewPdfFormat,csvExcelFormatter:b.a.interviewCSVExcel}),Object(g.jsx)(C.default,{loadInterviews:ge})]})}},798:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(800);var s=a(1);const c=e=>Object(s.jsxs)("div",{className:"tablelink-container",children:[Object(s.jsx)("span",{onClick:e.onClick,className:"tablelink ".concat(e.styleRed&&"red"," ").concat(e.className&&e.className),children:e.label}),e.extra&&Object(s.jsx)("span",{className:"table-link-extra",children:e.extra})]})},875:function(e,t,a){}}]);