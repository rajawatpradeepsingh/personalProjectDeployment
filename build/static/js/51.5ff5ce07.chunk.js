(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[51],{1051:function(e,s,t){"use strict";t.r(s),t.d(s,"default",(function(){return w}));var i=t(0),a=t(106),n=t(137),r=t(66),l=t(27),o=t(96),m=t(306),c=t(318),h=t(219),d=t(218),p=t(774),g=t(420),b=t(683),u=(t(852),t(313)),j=t(1);class w extends i.Component{constructor(e){super(e),this.initialState={roleName:"",show:!1,errMssg:"",inputErr:"",manager:!1,worker:!1,candidates:!1,client:!1,suppliers:!1,jobOpenings:!1,interviews:!1,onBoardings:!1,managerPermission:!1,candidatePermission:!1,workerPermission:!1,clientPermission:!1,jobOpeningsPermission:!1,interviewsPermission:!1,suppliersPermission:!1,onBoardingsPermission:!1,settingsPermission:!1,projectsPermission:!1,workOrderPermission:!1,timesheetPermission:!1,calendarPermission:!1,projects:!1,workOrder:!1,timesheet:!1,calendar:!1,settings:!1},this.closeForm=()=>{this.props.history.push("/viewroles")},this.resetRole=()=>{this.setState((()=>this.initialState)),this.closeForm()},this.toggleSuccessPopUp=()=>{this.setState({show:this.state.show})},this.handlePermissionChange=e=>{this.setState({[e.target.name]:e.target.value})},this.submitRole=e=>{e.preventDefault();const s={roleName:this.state.roleName,managerPermission:this.state.managerPermission,candidatePermission:this.state.candidatePermission,workerPermission:this.state.workerPermission,clientPermission:this.state.clientPermission,jobOpeningsPermission:this.state.jobOpeningsPermission,interviewsPermission:this.state.interviewsPermission,suppliersPermission:this.state.suppliersPermission,onBoardingsPermission:this.state.onBoardingsPermission,settingsPermission:this.state.settingsPermission,manager:this.state.manager,candidates:this.state.candidates,worker:this.state.worker,client:this.state.client,jobOpenings:this.state.jobOpenings,interviews:this.state.interviews,suppliers:this.state.suppliers,onBoardings:this.state.onBoardings,settings:this.state.settings,projectsPermission:this.state.projectsPermission,workOrderPermission:this.state.workOrderPermission,timesheetPermission:this.state.timesheetPermission,calendarPermission:this.state.calendarPermission,projects:this.state.projects,workOrder:this.state.workOrder,timesheet:this.state.timesheet,calendar:this.state.calendar};console.log(s);let t=JSON.parse(sessionStorage.getItem("headers"));Object(c.g)(t,s).then((e=>{201===e.status&&(g.b.success("Role Created Successfully"),this.goBack("viewroles")),e.err&&this.setState({errMssg:"Error, could not create role: ".concat(e.err)})}))},this.rolesChange=e=>{this.setState({[e.target.name]:e.target.value}),this.roleNamecharAllow(e.target.value)},this.handleSwitch=e=>{const{name:s}=e.target;this.setState({[s]:e.target.switch})},this.goBack=e=>{this.props.history.push(e)},this.state={...this.initialState,navMenuOpen:e.navMenuOpen}}componentDidUpdate(e){this.props.navMenuOpen!==e.navMenuOpen&&this.setState({navMenuOpen:this.props.navMenuOpen})}roleNamecharAllow(e){/[^a-zA-Z]/gi.test(e)&&""!==e?this.setState({inputErr:"Invalid character, only letters accepted"}):this.setState({inputErr:""})}render(){const{roleName:e}=this.state;return console.log(this.state.manager,this.state.managerPermission),Object(j.jsxs)(h.a,{children:[Object(j.jsx)(d.a,{breadcrumbs:Object(j.jsx)(m.a,{className:"header",crumbs:[{id:0,text:"Users",onClick:()=>this.goBack("viewusers")},{id:1,text:"Roles",onClick:()=>this.goBack("viewroles")},{id:2,text:"Add Role",lastCrumb:!0}]})}),Object(j.jsxs)(n.a,{children:[Object(j.jsxs)("div",{className:"role-alert",children:[Object(j.jsx)(p.a,{type:"warning",showIcon:!0,message:Object(j.jsxs)("span",{children:["Before creating any roles please check the existing roles in"," ",Object(j.jsx)(a.b,{to:"viewroles",children:"View Roles"}),". Duplicates are not allowed (roles are case-sensitive)."]})}),this.state.errMssg&&Object(j.jsx)(p.a,{type:"error",showIcon:!0,message:this.state.errMssg})]}),Object(j.jsx)(r.a,{cancel:this.resetRole,onSubmit:this.submitRole,formEnabled:!0,className:"centered",children:Object(j.jsxs)("div",{style:{justifyContent:"space-between",flexDirection:"column",display:"flex",width:465},children:[Object(j.jsx)("div",{style:{width:500,marginBottom:5,marginLeft:115},children:Object(j.jsx)(l.a,{type:"text",label:"Role Name",name:"roleName",value:e,onChange:this.rolesChange,maxLength:"20",errMssg:this.state.inputErr,required:!0})}),Object(j.jsx)(u.a,{headers:[{label:"Module Name"},{label:"Visibility"},{label:"Permission"}],body:[{id:1,key:"key",cells:[{id:0,className:"cell",data:[{label:"manager",name:"manager"},{label:"candidates",name:"candidates"},{label:"worker",name:"worker"},{label:"client",name:"client"},{label:"job Openings",name:"jobOpenings"},{label:"interviews",name:"interviews"},{label:"suppliers",name:"suppliers"},{label:"on Boardings",name:"onBoardings"},{label:"projects",name:"projects"},{label:"timesheet",name:"timesheet"},{label:"calendar",name:"calendar"},{label:"work Order",name:"workOrder"},{label:"settings",name:"settings"}].map((e=>Object(j.jsx)("div",{style:{},children:Object(j.jsx)("h5",{children:e.label.toUpperCase()},e.name)})))},{id:1,data:[{label:"manager",name:"manager"},{label:"candidates",name:"candidates"},{label:"worker",name:"worker"},{label:"client",name:"client"},{label:"job Openings",name:"jobOpenings"},{label:"interviews",name:"interviews"},{label:"suppliers",name:"suppliers"},{label:"on Boardings",name:"onBoardings"},{label:"projects",name:"projects"},{label:"timesheet",name:"timesheet"},{label:"calendar",name:"calendar"},{label:"work Order",name:"workOrder"},{label:"settings",name:"settings"}].map((e=>Object(j.jsx)("div",{style:{marginBottom:5.5},children:Object(j.jsx)(b.a,{label:e.label,onChange:s=>this.setState({[e.name]:!!s}),checked:this.state[e.name],size:"small"},e.name)})))},{id:2,data:[{label:"manager",name:"managerPermission"},{label:"candidate",name:"candidatePermission"},{label:"worker",name:"workerPermission"},{label:"client",name:"clientPermission"},{label:"jobOpenings",name:"jobOpeningsPermission"},{label:"interviews",name:"interviewsPermission"},{label:"suppliers",name:"suppliersPermission"},{label:"onBoardings",name:"onBoardingsPermission"},{label:"projects",name:"projectsPermission"},{label:"timesheet",name:"timesheetPermission"},{label:"calendar",name:"calendarPermission"},{label:"workOrder",name:"workOrderPermission"},{label:"settings",name:"settingsPermission"}].map((e=>Object(j.jsx)("div",{style:{marginBottom:5.5},children:Object(j.jsx)(b.a,{checkedChildren:"Editable",unCheckedChildren:"Read Only",label:e.label,onChange:s=>this.setState({[e.name]:!!s}),checked:this.state[e.name],size:"small",disabled:e.name.includes("manager")&&!this.state.manager||e.name.includes("candidate")&&!this.state.candidates||e.name.includes("worker")&&!this.state.worker||e.name.includes("client")&&!this.state.client||e.name.includes("jobOpenings")&&!this.state.jobOpenings||e.name.includes("interviews")&&!this.state.interviews||e.name.includes("suppliers")&&!this.state.suppliers||e.name.includes("onBoardings")&&!this.state.onBoardings||e.name.includes("settings")&&!this.state.settings||e.name.includes("projects")&&!this.state.projects||e.name.includes("workOrder")&&!this.state.workOrder||e.name.includes("timesheet")&&!this.state.timesheet||e.name.includes("calendar")&&!this.state.calendar},e.name)},e.name)))}]}]})]})}),Object(j.jsx)(o.a,{openModal:this.state.show,closePopUp:this.toggleSuccessPopUp,handleConfirmClose:this.toggleSuccessPopUp,confirmValue:"Ok",message:{title:"Success",details:"Role created succesfully."}})]})]})}}},852:function(e,s,t){}}]);