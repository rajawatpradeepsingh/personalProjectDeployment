(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[56],{1061:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return T}));var i=s(0),a=s.n(i),n=s(16),o=s.n(n),r=s(25),m=s(219),l=s(152),h=s(218),c=s(306),p=s(66),g=s(137),u=s(27),d=s(106),b=s(96),C=s(95),j=s(35),y=s(86),v=(s(829),s(13)),x=s(1);class T extends i.Component{constructor(t){var e;super(t),e=this,this.initialState={name:"",commRate:"",marginFloor:"",marginCeiling:"",isDeleted:!1,inputErr:"",submitError:"",comments:"",isValid:!0},this.submitCommissionType=t=>{t.preventDefault();const e={name:this.state.name,commRate:this.state.commRate,comments:this.state.comments,marginFloor:this.state.marginFloor,marginCeiling:this.state.marginCeiling,isDeleted:!1},s=JSON.parse(sessionStorage.getItem("headers"));o.a.post("".concat(r.a.serverURL,"/commissionType"),e,{headers:s}).then((t=>{201===t.status&&(this.resetCT(),this.setState({openPopUp:!0}))})).catch((t=>{this.setState({submitError:t.response.data,openPopUp:!0}),t.response&&401===t.response.status&&v.a.logout()}))},this.resetCT=()=>{this.setState((()=>this.initialState))},this.closeForm=()=>{this.props.history.push("/viewcommissiontype")},this.commissionTypeChange=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{value:i,max:a,name:n}=t.target,o=Object(C.a)(s,i,a);if(e.setState({[n]:i}),o){let t={...e.state.inputErr};delete t[n],e.setState({inputErr:t})}else e.setState({inputErr:{...e.state.inputErr,[n]:"Invalid format or characters"}})},this.commissionChange=t=>{const{value:e}=t.target;this.setState({marginCeiling:e}),this.validateFields(this.state.marginFloor,e)},this.validateFields=(t,e)=>{const s=""!==t&&""!==e&&parseFloat(t)<parseFloat(e);this.setState({isValid:s})},this.togglePopUp=()=>{this.setState({openPopUp:!this.state.openPopUp})},this.state={...this.initialState},this.commissionTypeChange=this.commissionTypeChange.bind(this),this.submitCommissionType=this.submitCommissionType.bind(this),this.docRef=a.a.createRef(null)}render(){return Object(x.jsxs)(m.a,{children:[Object(x.jsx)(l.a,{onActive:()=>{this.setState({setIsActive:!0})},onIdle:()=>{this.setState({setIsActive:!1})},onLogout:()=>{this.setState({setLogout:!0})}}),Object(x.jsx)(h.a,{breadcrumbs:Object(x.jsx)(c.a,{className:"header",crumbs:[{id:0,text:"Commission Type",onClick:()=>this.closeForm()},{id:1,text:"Add Commission Type",lastCrumb:!0}]})}),Object(x.jsxs)(g.a,{children:[Object(x.jsx)(p.a,{formEnabled:!0,onSubmit:this.submitCommissionType,cancel:this.resetCT,children:Object(x.jsxs)(i.Fragment,{children:[Object(x.jsx)(j.a,{type:"text",label:"Commision Type",name:"name",value:this.state.name,onChange:t=>this.commissionTypeChange(t),options:[{id:1,value:"Percentage",name:"Percentage"}],required:!0}),Object(x.jsx)(u.a,{type:"text",label:"Commission Rate",name:"commRate",className:"align",value:this.state.commRate,onChange:t=>this.commissionTypeChange(t,"validateNum"),errMssg:this.state.inputErr.commRate,required:!0}),Object(x.jsx)(u.a,{type:"number",label:"Margin Floor ($)",className:"margin",name:"marginFloor",value:this.state.marginFloor,onChange:t=>this.commissionTypeChange(t,"validateNum"),errMssg:this.state.inputErr.marginFloor,required:!0}),Object(x.jsx)("div",{className:"floor",children:"-"}),Object(x.jsx)(u.a,{type:"number",label:"Margin Ceiling ($)",className:"margin",name:"marginCeiling",value:this.state.marginCeiling,onChange:t=>this.commissionChange(t,"validateNum"),required:!0}),!this.state.isValid&&Object(x.jsx)("p",{style:{color:"red",paddingLeft:"566px",fontSize:"9px"},children:" * Please make sure margin Floor is less than margin Ceiling."}),Object(x.jsx)(y.a,{label:"Comments",name:"comments",value:this.state.comments,onChange:t=>this.commissionTypeChange(t),charCount:"".concat(this.state.comments?3e3-this.state.comments.length:3e3," of 3000"),maxLength:"3000"})]})}),Object(x.jsx)(b.a,{openModal:this.state.openPopUp,closePopUp:this.togglePopUp,handleConfirmClose:this.togglePopUp,type:this.state.submitError?"Warning":"Success",message:{title:this.state.submitError?"Error":"Commission Type Added Succesfully",details:this.state.submitError?"Error while saving record ".concat(this.state.submitError):"To view Commission Type go to "},link:this.state.submitError?"":Object(x.jsx)(d.b,{to:"viewcommissiontype",children:"Commission Type"})})]})]})}}},829:function(t,e,s){}}]);