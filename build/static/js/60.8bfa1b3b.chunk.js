(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[60],{1059:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(75),s=a(106),l=a(16),o=a.n(l),c=a(25),i=a(13),d=a(95),u=a(96),j=a(35),b=a(137),m=a(66),p=a(27),v=a(306),g=a(219),O=a(218),h=a(152),D=a(11),k=a.n(D),w=a(308),f=a.n(w),x=(a(982),a(1));t.default=()=>{const e={startDate:"",endDate:"",activeDate:"",status:"",billRate:0,annualBillRate:0,payRate:0,annualPayRate:0,margin:0,comments:"",workerName:"",workerId:"",worker:"",project:"",projectId:"",projectName:""},[t,a]=Object(r.useState)(e),[l,D]=Object(r.useState)(!1),[w,R]=Object(r.useState)([]),[y,N]=Object(r.useState)([]),[C]=Object(r.useState)(i.a.getHeaders()),[S,q]=Object(r.useState)({}),[E,I]=Object(r.useState)(""),M=Object(n.useHistory)(),[W,P]=Object(r.useState)(!0),[A,F]=Object(r.useState)(!1),[H,B]=Object(r.useState)(null),L=Object(r.useCallback)((()=>{o.a.get("".concat(c.a.serverURL,"/worker?dropdownFilter=true"),{headers:C}).then((e=>{e.data&&R(e.data)})).catch((e=>console.log(e)))}),[C]);Object(r.useEffect)((()=>{L()}),[L]),Object(r.useEffect)((()=>{const e=f()("1d"),a=new Date(+new Date(null===t||void 0===t?void 0:t.startDate)+e);B(k()(a).format("YYYY-MM-DD"))}),[null===t||void 0===t?void 0:t.startDate]);const U=Object(r.useCallback)((()=>{o.a.get("".concat(c.a.serverURL,"/projects?dropdownFilter=true"),{headers:C}).then((e=>{e.data&&N(e.data)})).catch((e=>console.log(e)))}),[C]);Object(r.useEffect)((()=>{U()}),[U]);const Y=function(e){var r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===(r=e.preventDefault)||void 0===r||r.call(e);const s=e.target.max?+e.target.max:null,l=Object(d.a)(n,e.target.value,s),o=""===e.target.value;if(a({...t,[e.target.name]:e.target.value}),l){if(l||o){let t={...S};delete t[e.target.name],q({inputErr:t})}}else q({...S,[e.target.name]:"Invalid format or characters"})},J=()=>{D(!1)};return Object(x.jsxs)(g.a,{children:[Object(x.jsx)(h.a,{onActive:()=>{P(!0)},onIdle:()=>{P(!1)},onLogout:()=>{F(!0)}}),Object(x.jsx)(O.a,{breadcrumbs:Object(x.jsx)(v.a,{className:"header",crumbs:[{id:0,text:"WorkOrder",onClick:()=>{M.push("/viewworkOrder")}},{id:1,text:"Add WorkOrder",lastCrumb:!0}]})}),Object(x.jsxs)(b.a,{children:[Object(x.jsxs)(m.a,{cancel:()=>{a(e)},onSubmit:r=>{r.preventDefault();const n={startDate:t.startDate,endDate:t.endDate,worker:""===t.worker?null:{id:t.worker},project:""===t.project?null:{id:t.project},activeDate:t.activeDate,workerName:t.workerName,projectName:t.projectName,status:t.status,billRate:t.billRate,annualBillRate:t.annualBillRate,payRate:t.payRate,margin:t.margin,annualPayRate:t.annualPayRate,comments:t.comments};o.a.post("".concat(c.a.serverURL,"/workOrders"),n,{headers:C}).then((t=>{201===t.status&&(D(!0),a(e),E(""))})).catch((e=>{e.response&&409===e.response.status&&(I(e.res.data),D(!0)),e.response&&401===e.response.status&&i.a.logout()}))},formEnabled:!0,children:[Object(x.jsx)(j.a,{label:"Project",name:"projectId","data-testid":"workOrder-options",value:t.project,onChange:e=>{e.preventDefault(),a({...t,project:e.target.value})},options:y.map((e=>({id:e.id,name:"".concat(e.projectName)}))),required:!0}),Object(x.jsx)(p.a,{label:"Net Bill Rate/hr",name:"billRate",value:Number(t.billRate).toFixed(2),onChange:e=>Y(e,"validateHasDecimal"),required:!0,errMssg:S.billRate,className:"right-align-input"}),Object(x.jsx)(p.a,{label:"Start Date",type:"date",name:"startDate",id:"startDate",max:"2999-12-31",value:t.startDate,onChange:e=>Y(e),required:!0}),Object(x.jsx)(p.a,{label:"End Date",type:"date",name:"endDate",id:"endDate",min:H,value:t.endDate,onChange:e=>Y(e),required:!0}),Object(x.jsx)(j.a,{label:"Worker",name:"workerId","data-testid":"workerId-options",value:t.worker,onChange:e=>{e.preventDefault(),a({...t,worker:e.target.value})},options:w.map((e=>({id:e.id,name:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName)}))),required:!0}),Object(x.jsx)(p.a,{label:"C2C Pay Rate/hr",name:"payRate",value:Number(t.payRate).toFixed(2),onChange:e=>Y(e,"validateHasDecimal"),required:!0,errMssg:S.payRate,className:"right-align-input"}),Object(x.jsx)(p.a,{label:"Active Date",type:"date",name:"activeDate",value:t.activeDate,onChange:e=>Y(e),required:!0}),Object(x.jsx)(p.a,{label:"Margin/hr",name:"margin",value:Number(t.margin).toFixed(2),onChange:e=>Y(e,"validateHasDecimal"),required:!0,errMssg:S.margin,className:"right-align-input"})]}),Object(x.jsx)(u.a,{openModal:l,type:E?"Warning":"Success",confirmValue:"Ok",handleConfirmClose:J,closePopUp:J,message:{title:E?"Error":"WorkOrder Added Successfully",details:E?"An error ocurred while trying to save: ".concat(E):"To view WorkOrder go to "},link:E?"":Object(x.jsx)(s.b,{to:"/viewworkOrder",children:"WorkOrder"})})]})]})}},982:function(e,t,a){}}]);