(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[18],{1080:function(e,t,a){"use strict";a.r(t);var s=a(28),l=a(0),n=a(348),c=a(95),i=a(27),r=a(35),o=a(13),d=a(318),b=a(325),m=a(220),u=a(1);var j=()=>{var e,t,a;const{userDetails:j}=Object(s.c)((e=>e.users)),[h]=Object(l.useState)(!1),{editEnabled:v}=Object(s.c)((e=>e.users)),[O,x]=Object(l.useState)({}),p=Object(s.b)(),[g,f]=Object(l.useState)([]),N=o.a.hasAdminRole(),[y,C]=Object(l.useState)(!1),[k,S]=Object(l.useState)(!1);Object(l.useEffect)((()=>{Object(d.b)().then((e=>f(e.data?e.data:[]))).catch((e=>console.log(e)))}),[]);const D=Object(l.useCallback)((e=>p(Object(n.c)(e))),[p]),R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=Object(c.a)(t,e.target.value);if(D({...j,[e.target.name]:e.target.value}),"firstName"===e.target.name||"lastName"===e.target.name){if(/^[A-Za-z]+$/.test(e.target.value)){let t={...O};delete t[e.target.name],x(t)}else x({...O,[e.target.name]:"Invalid format. Only alphabets are allowed."})}else if("email"===e.target.name){if(/^(?!^[0-9])([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/.test(e.target.value)){let t={...O};delete t[e.target.name],x(t),S(!1)}else x({...O,[e.target.name]:"Invalid email format."}),S(!0)}else if(a){if(a||""===e.target.value){let t={...O};delete t[e.target.name],x({inputErr:t})}}else x({...O,[e.target.name]:"Invalid format or characters"})};null===j||void 0===j||j.activationDate,(new Date).toISOString().split("T")[0];return v?Object(u.jsxs)(l.Fragment,{children:[Object(u.jsx)("h3",{className:"disabled-form-section-header",children:" Basic Information"}),Object(u.jsx)(i.a,{type:"text",label:"Username",name:"username",value:(null===j||void 0===j?void 0:j.username)||"",onChange:e=>R(e,"validateName"),maxLength:"20",required:!0,errMssg:O.username,disabled:!0}),Object(u.jsx)(i.a,{type:"text",label:"First Name",name:"firstName",maxLength:"20",value:(null===j||void 0===j?void 0:j.firstName)||"",onChange:e=>R(e,"validateHasAlpha"),required:!0,errMssg:O.firstName}),Object(u.jsx)(i.a,{type:"text",label:"Last Name",name:"lastName",maxLength:"20",value:(null===j||void 0===j?void 0:j.lastName)||"",onChange:e=>R(e,"validateHasAlpha"),required:!0,errMssg:O.lastName}),Object(u.jsx)(m.a,{label:"Phone Number",phoneNumber:(null===j||void 0===j?void 0:j.phoneNumber)||"",handleChange:e=>{var t;t={...j,phoneNumber:e},p(Object(n.c)(t))},required:!0,errMssg:O.phoneNumber}),Object(u.jsx)(i.a,{type:"text",label:"Email",name:"email",maxLength:"40",value:(null===j||void 0===j?void 0:j.email)||"",onChange:e=>R(e),required:!0,errMssg:O.email}),Object(u.jsx)(r.a,{label:"Role",name:"roleId",onChange:e=>{let t=g.filter((t=>+t.id===+e.target.value))[0];D({...j,roles:[{id:t.id}]}),C(!0)},value:null!==j&&void 0!==j&&j.roles?null===j||void 0===j||null===(a=j.roles[0])||void 0===a?void 0:a.id:"",options:g.map((e=>({id:e.id,name:"".concat(e.roleName)}))),required:!0,disabled:h||!N}),y&&Object(u.jsx)(b.a,{label:"Activation Date",name:"activationDate",id:"activationDate",value:(null===j||void 0===j?void 0:j.activationDate)||"",onChange:R,required:!0,min:(new Date).toLocaleDateString("en-ca")})]}):Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"disabled-form-section small",children:[Object(u.jsx)("h3",{className:"disabled-form-section-header",children:"Basic Information"}),Object(u.jsxs)("div",{className:"disabled-form-section-content",children:[Object(u.jsxs)("span",{className:"disabled-form-text",children:[Object(u.jsx)("span",{className:"disabled-form-bold-text",children:"Username:"}),null===j||void 0===j?void 0:j.username]}),Object(u.jsxs)("span",{className:"disabled-form-text",children:[Object(u.jsx)("span",{className:"disabled-form-bold-text",children:"First Name:"}),null===j||void 0===j?void 0:j.firstName]}),Object(u.jsxs)("span",{className:"disabled-form-text",children:[Object(u.jsx)("span",{className:"disabled-form-bold-text",children:"Last Name:"}),null===j||void 0===j?void 0:j.lastName]}),Object(u.jsxs)("span",{className:"disabled-form-text",children:[Object(u.jsx)("span",{className:"disabled-form-bold-text",children:"Role:"}),null===j||void 0===j||null===(e=j.roles)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.roleName]}),Object(u.jsxs)("span",{className:"disabled-form-text",children:[Object(u.jsx)("span",{className:"disabled-form-bold-text",children:"Activation Date:"}),null===j||void 0===j?void 0:j.activationDate]}),Object(u.jsxs)("span",{className:"disabled-form-text",children:[Object(u.jsx)("span",{className:"disabled-form-bold-text",children:"Email:"}),null===j||void 0===j?void 0:j.email]}),Object(u.jsxs)("span",{className:"disabled-form-text",children:[Object(u.jsx)("span",{className:"disabled-form-bold-text",children:"Phone Number:"}),null===j||void 0===j?void 0:j.phoneNumber]})]})]})})},h=a(11),v=a.n(h),O=a(16),x=a.n(O),p=a(817),g=a(25),f=a(662);const N=()=>{var e;const{userDetails:t}=Object(s.c)((e=>e.users)),[a]=Object(l.useState)(o.a.getHeaders()),[n,c]=Object(l.useState)(0),[i,r]=Object(l.useState)([]),[d,b]=Object(l.useState)(1),[m,j]=Object(l.useState)(5),h=e=>e?v()(e).format("MM/DD/YYYY"):"",O=Object(l.useCallback)(((e,t,s)=>{e&&x.a.get("".concat(g.a.serverURL,"/rolehistory/historyRolePage?userId=").concat(e,"&pageNo=").concat(t-1,"&pageSize=").concat(s),{headers:a}).then((e=>{if(e.data){const t=e.data.map((e=>{var t,a,s,l;return{role:null!==e&&void 0!==e&&null!==(t=e.historyRole)&&void 0!==t&&null!==(a=t[0])&&void 0!==a&&a.roleName?null===e||void 0===e||null===(s=e.historyRole)||void 0===s||null===(l=s[0])||void 0===l?void 0:l.roleName:"Admin",endDate:h(e.endDate),updatedOn:v()(e.updatedOn).format("MM/DD/YYYY"),updatedBy:e.updatedBy}}));r(t),c(e.headers["total-elements"])}})).catch((e=>{console.log(e)}))}),[a]);Object(l.useEffect)((()=>{O(null===t||void 0===t?void 0:t.id,d,m)}),[t,d,m,O]);const N=(null===t||void 0===t||null===(e=t.futureRoles)||void 0===e?void 0:e.map((e=>({role:e.roleName,futureActivationDate:h(null===t||void 0===t?void 0:t.futureActivationDate)}))))||[];return Object(u.jsxs)("div",{className:"user-history",style:{display:"flex",flexDirection:"column"},children:[Object(u.jsxs)("div",{style:{marginTop:"15px",marginBottom:"10px"},children:[Object(u.jsx)("h3",{className:"disabled-form-section-header",children:"Upcoming Role Assignment"}),Object(u.jsx)(p.a,{data:N,columns:[{title:"Role",key:"role"},{title:"Activation Date",key:"futureActivationDate"}]})]}),Object(u.jsxs)("div",{style:{maxHeight:"100%",overflowY:"auto"},children:[Object(u.jsx)("h3",{className:"disabled-form-section-header",children:"Roles History"}),Object(u.jsx)(p.a,{data:i,columns:[{title:"Role",key:"role"},{title:"End Date",key:"endDate"},{title:"Updated On",key:"updatedOn"},{title:"Updated By",key:"updatedBy"}]}),Object(u.jsx)("div",{style:{padding:"0px 0px 0px 500px"},children:Object(u.jsx)(f.a,{current:d,total:n,pageSize:m,onChange:e=>{b(e)}})})]})]})};var y=a(814);var C=a(306),k=a(22),S=a(137),D=a(66),R=a(96),P=a(802),A=a(219),E=a(218),z=a(307),H=a(309),w=a(781),B=a(685),M=a(783),I=a(97),L=a(75),U=a(91),V=a(420);t.default=()=>{var e,t;const[a]=Object(l.useState)("UserRoleHistory"),c=Object(L.useHistory)(),[i]=Object(l.useState)(o.a.getHeaders()),r=Object(L.useParams)(),d=Object(s.b)(),{userDetails:b}=Object(s.c)((e=>e.users)),[m,h]=Object(l.useState)(!0),{editEnabled:v}=Object(s.c)((e=>e.users)),[O,x]=Object(l.useState)({}),[p,g]=Object(l.useState)(!1),{changesMade:f}=Object(s.c)((e=>e.users)),[Y,q]=Object(l.useState)(0),F=o.a.hasAdminRole(),T=Object(l.useCallback)((e=>d(Object(n.c)(e))),[d]),_=Object(l.useCallback)((e=>d(Object(n.b)(e))),[d]),X=Object(l.useCallback)((()=>{d(Object(U.b)(!1)),o.a.logout()}),[d]),J=()=>{g(!1),x({})},K=Object(l.useCallback)((async()=>{try{const e=r.userId,t=await Object(I.i)(i,e);200===t.statusCode?T(t.userdata):401===t.statusCode&&X(),console.log(t)}catch(e){console.log(e)}}),[i,r.userId,T,X]);Object(l.useEffect)((()=>{K()}),[m,K]),console.log(b);const $=async e=>{e.preventDefault();const t="isLoading";try{const e=await Object(I.k)(i,b,null===r||void 0===r?void 0:r.userId);200===e.statusCode?(G(),h(!0),T(e.data),V.b.success({content:"User updated!",messgKey:t,duration:5,style:{marginTop:"5%"}})):V.b.error({content:"An error occurred while saving changes (".concat(e.statusCode,")"),messgKey:t,duration:10})}catch(s){var a;401===(null===(a=s.response)||void 0===a?void 0:a.status)&&X()}},Z=()=>{_(!1),T({})},G=()=>{_(!1),d(Object(n.c)({}))},Q=()=>{f?(g(!0),x({title:"Confirm Discard Changes",details:"All changes will be discarded, proceed?",confirmValue:"Confirm",cancelValue:"Cancel"})):_(!1)};return Object(u.jsxs)(A.a,{children:[Object(u.jsx)(E.a,{breadcrumbs:Object(u.jsx)(C.a,{className:"header",crumbs:[{id:0,text:"User",onClick:()=>(G(),void c.push("/viewusers/"))},{id:1,text:"".concat(null===b||void 0===b?void 0:b.username),lastCrumb:!0}]}),actions:Object(u.jsxs)(z.a,{children:[Object(u.jsx)(k.a,{type:"button",handleClick:()=>{F&&(v?Z():(_(!v),h(!m)))},className:"btn icon marginX ".concat(o.a.hasAdminRole()?"":"disabled"),title:"Edit",disabled:!o.a.hasAdminRole(),children:Object(u.jsx)(w.a,{})}),Object(u.jsx)(k.a,{type:"button",handleClick:()=>console.log("put onClick handler, but not an object"),disabled:!0,className:"btn icon marginX",title:"Share",children:Object(u.jsx)(B.a,{})}),Object(u.jsx)(k.a,{type:"button",handleClick:()=>console.log("put onClick handler, but not an object"),disabled:!0,className:"btn icon marginX",title:"Export Report",children:Object(u.jsx)(M.a,{})})]})}),Object(u.jsxs)(H.a,{children:[Object(u.jsx)(S.a,{className:"x-small",children:Object(u.jsx)(D.a,{className:"column small",onSubmit:$,cancel:Q,formEnabled:v,children:Object(u.jsx)(j,{})})}),Object(u.jsx)(S.a,{className:"medium",children:Object(u.jsxs)(P.a,{steps:[{title:"Roles",icon:Object(u.jsx)(y.a,{style:{color:"var(--secondary-muted)",fontSize:"18px",marginBottom:"1px"}}),status:"finish"}],submit:$,reset:Q,canSubmit:v,setCurrentPage:e=>{q(e)},clickable:!0,type:"navigation",hideNavBtns:!0,index:Y,children:[Object(u.jsx)(N,{history:c,currentPage:a}),Object(u.jsx)(R.a,{openModal:p,type:(null===(e=O.title)||void 0===e?void 0:e.toLowerCase())||"",closePopUp:J,handleConfirmClose:null!==(t=O.title)&&void 0!==t&&t.includes("Confirm")?Z:J,confirmValue:O.confirmValue,cancelValue:O.cancelValue,message:O})]})})]})]})}},802:function(e,t,a){"use strict";var s=a(0),l=a(1066),n=a(22),c=a(1042),i=a(677),r=(a(803),a(158),a(1));t.a=e=>{var t,a,o;const[d,b]=Object(s.useState)(0),m=null===(t=e.steps)||void 0===t?void 0:t.map((e=>({title:e.title,subTitle:e.subTitle&&e.subTitle,icon:e.icon&&e.icon,status:e.status&&e.status})));Object(s.useEffect)((()=>{b(e.index||0)}),[e.index]);return Object(r.jsxs)("div",{className:"form-nav-container",children:[Object(r.jsx)(l.a,{className:"form-nav-steps",current:d,percent:e.percent,onChange:e.clickable?t=>{b(t),e.setCurrentPage(e.steps[t])}:null,type:e.type&&"navigation"===e.type?"navigation":"",items:m}),Object(r.jsx)("div",{className:"steps-content-container",children:e.children}),Object(r.jsxs)("div",{className:"steps-action",children:[!e.hideNavBtns&&Object(r.jsxs)(n.a,{type:"button",name:"form-nav-back-btn",className:"icon-btn icon-text no-border",handleClick:()=>(b(d-1),void e.setCurrentPage(e.steps[d-1])),disabled:0===d,children:[Object(r.jsx)(c.a,{}),"Previous"]}),e.canSubmit&&!e.hideFormBtns&&Object(r.jsx)(n.a,{type:"reset",name:"form-reset-btn",className:"btn main reset",handleClick:()=>{e.reset(),b(0)},children:"Cancel"}),e.canSubmit&&!e.hideFormBtns&&Object(r.jsx)(n.a,{type:"submit",name:"form-submit-btn",className:"btn main submit",disabled:e.submitError,handleClick:t=>(t=>{e.submit(t),b(0)})(t),children:"Submit"}),!e.hideFormBtns&&Object(r.jsxs)(n.a,{type:"button",name:"form-nav-next-btn",className:"icon-btn icon-text no-border",handleClick:()=>(b(d+1),void e.setCurrentPage(e.steps[d+1])),disabled:e.error||(null===(a=e.steps[d])||void 0===a?void 0:a.hasRequiredFields)&&e.percent<100||d>=(null===(o=e.steps)||void 0===o?void 0:o.length)-1,children:["Next",Object(r.jsx)(i.a,{})]})]})]})}},803:function(e,t,a){},814:function(e,t,a){"use strict";var s=a(2),l=a(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M296 250c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 144H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 458H208V148h560v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm440-88H728v-36.6c46.3-13.8 80-56.6 80-107.4 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 50.7 33.7 93.6 80 107.4V764H520c-8.8 0-16 7.2-16 16v152c0 8.8 7.2 16 16 16h352c8.8 0 16-7.2 16-16V780c0-8.8-7.2-16-16-16zM646 620c0-27.6 22.4-50 50-50s50 22.4 50 50-22.4 50-50 50-50-22.4-50-50zm180 266H566v-60h260v60z"}}]},name:"audit",theme:"outlined"},c=a(24),i=function(e,t){return l.createElement(c.a,Object(s.a)({},e,{ref:t,icon:n}))};t.a=l.forwardRef(i)},817:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a(824);var s=a(312),l=a(1);const n=e=>{let{columns:t,data:a,...n}=e;const c=e=>{const a=[];return t.forEach(((t,s)=>{e[t.key]&&t.render?a.push(Object(l.jsx)("td",{children:t.render(e[t.key],e)},s)):e[t.key]&&!t.render?a.push(Object(l.jsx)("td",{children:e[t.key]},s)):a.push(Object(l.jsx)("td",{},s))})),a};return Object(l.jsx)("div",{className:n.className?"table-component-container ".concat(n.className):"table-component-container",children:Object(l.jsx)("div",{className:"actions-pagination-container",children:Object(l.jsxs)("div",{className:"small-table-container",children:[Object(l.jsxs)("table",{className:"small-table",children:[Object(l.jsx)("thead",{children:Object(l.jsx)("tr",{className:"small-table-headers",children:t.map(((e,t)=>Object(l.jsx)("th",{children:e.title},t)))})}),Object(l.jsx)("tbody",{children:a.length>0&&(null===a||void 0===a?void 0:a.map(((e,t)=>e&&Object(l.jsx)("tr",{className:"small-table-body",children:c(e)},t))))})]}),n.includePagination&&Object(l.jsx)(s.a,{total:n.totalItems,itemsPerPage:n.perPage,currentPage:n.currentPage,onPageChange:n.onPageChange,items:n.items})]})})})}},824:function(e,t,a){}}]);