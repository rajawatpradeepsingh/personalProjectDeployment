(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[15],{1079:function(e,t,a){"use strict";a.r(t);var s=a(137),n=a(66),c=a(0),r=a(306),o=a(22),i=a(307),l=a(75),d=a(28),u=a(25),v=a(50),b=a(16),p=a.n(b),j=a(13),h=a(91),m=a(96),O=a(138),g=a(346),y=a(810),f=a(35),x=a(27),C=a(11),w=a.n(C),D=a(308),k=a.n(D),S=a(63),N=a(112),E=a(427),A=(a(433),a(1));var P=function(e){const t=t=>{t.preventDefault();let a=JSON.parse(sessionStorage.getItem("headers"));fetch(u.a.serverURL+"/visatracking/"+e.id+"/resume",{headers:a}).then((e=>{if(200===e.status){const t=e.headers.get("Content-Disposition").split("filename=")[1];console.log("resume",e),e.blob().then((e=>{let a=window.URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download=t,s.click(),console.log(t)}))}else 401===e.status&&j.a.logout()})).catch((e=>{console.log("Error:",e)}))};return Object(A.jsxs)("span",{children:["button"===e.displayType&&Object(A.jsx)(o.a,{type:"button",name:"download-resume-btn",className:"icon-btn large",handleClick:t,children:Object(A.jsx)(E.a,{})}),"link"===e.displayType&&Object(A.jsxs)("div",{className:"download-resume-link-container ".concat(e.className),children:[!e.noLabel&&Object(A.jsxs)("label",{className:"resume-label",children:[e.required&&!e.disabled&&Object(A.jsx)("span",{className:"required",children:"*"})," ",e.label?e.label:"Document"]}),e.resume?Object(A.jsxs)(o.a,{type:"button",name:"download-resume-btn",className:"icon-btn small",handleClick:t,children:[Object(A.jsx)(E.a,{})," ",e.resume.resumeName]}):Object(A.jsx)("span",{className:"no-file-text",children:"[no file uploaded]"})]})]})},R=a(95);var I=e=>{var t,a,s;const n=Object(d.b)(),r=e=>n(Object(g.e)(e)),i=Object(c.useMemo)((()=>j.a.getHeaders()),[]),{editEnabled:l}=Object(d.c)((e=>e.visatracking)),{visaDetails:u}=Object(d.c)((e=>e.visatracking)),v=Object(c.useMemo)((()=>Object(O.c)()),[]),[b,p]=Object(c.useState)([]),[h,m]=Object(c.useState)(null),[C,D]=Object(c.useState)(!1),[E,I]=Object(c.useState)([]),[T,L]=Object(c.useState)([]),{resume:z,enableReplaceResume:M,replaceResumeEnabled:Y,uploadNewResume:F}=e,V=Object(c.useCallback)((async()=>{const e={};return e.workAuth=await Object(S.e)("workAuthStatus",i),e}),[i]);Object(c.useEffect)((()=>{"NOT APPLICABLE"!==(null===u||void 0===u?void 0:u.visaStatus)||l||D(!0)}),[u,l]);const B=Object(c.useCallback)((async()=>{const e=await Object(y.f)(i);e.tableData.length&&p(e.tableData.map((e=>({name:"".concat(e.firstName," ").concat(e.lastName),id:e.id}))))}),[i]);Object(c.useEffect)((()=>{B()}),[B]);const U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{name:a,value:s}=e.target,n=Object(R.a)(t,e.target.value);if("Citizen"===s||"Not Applicable"===s)r({...u,visaStatus:"NOT APPLICABLE",visaAppliedDate:"",visaStartDate:"",visaExpiryDate:"",[a]:s}),D(!0);else{const e="NOT APPLICABLE"===u.visaStatus?"":u.visaStatus;r({...u,visaStatus:e,[a]:s}),D(!1)}if(n){if(n||""===e.target.value){let t={...T};delete t[e.target.name],L({inputErr:t})}}else L({...T,[e.target.name]:"Invalid format or characters"})},H=e=>{const t=e.target.selectedOptions[0].index?v[e.target.selectedOptions[0].index-1]:{};r({...u,[e.target.name]:t.name})};Object(c.useEffect)((()=>{const e=k()("1d"),t=new Date(+new Date(null===u||void 0===u?void 0:u.visaStartDate)+e);m(w()(t).format("YYYY-MM-DD"))}),[null===u||void 0===u?void 0:u.visaStartDate]),Object(c.useEffect)((()=>{let e=!1;return(async()=>{try{const t=await V();Object.keys(t).length&&(e||I(t.workAuth))}catch(t){e||console.log(t)}})(),()=>e=!0}),[V]);return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h3",{className:"disabled-form-section-header",children:"Current Status of Visa and Details"}),Object(A.jsx)(N.a,{label:"Type",disabled:!l,options:E.map((e=>({id:e.id,value:e.value,label:e.value,selected:(null===u||void 0===u?void 0:u.visaType)===e.value}))),handleChange:e=>function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=e.filter((e=>e.selected)).map((e=>e.value)).join(",");let n=t;"workAuthStatus"===t&&(n="visaType"),"visaDetails"===a&&(U({target:{name:n,value:s||""}}),D(!1)),e.filter((e=>!e.id&&!e.isDeleted)).forEach((e=>{Object(S.h)(t,e.value,i).then((e=>{"workAuthStatus"===t&&I([...E,e])})).catch((e=>console.log(e)))})),e.filter((e=>e.isDeleted)).forEach((e=>{Object(S.a)(e.id,i).catch((e=>console.log(e)))}));const c=e.filter((e=>!e.isDeleted));"workAuthStatus"===t&&I(c)}(e,"workAuthStatus","visaDetails"),creatable:!0,required:!0,placeholder:"please select",deletable:j.a.hasAdminRole()||j.a.hasBDManagerRole()}),!C&&("opt"===(null===u||void 0===u?void 0:u.visaType)||"cpt"===(null===u||void 0===u?void 0:u.visaType)||"stem opt"===(null===u||void 0===u?void 0:u.visaType))&&Object(A.jsx)(x.a,{name:"usEntryDate",label:" US ENTRY DATE",type:"date",id:"usEntryDate",max:"2999-12-31",min:h,onChange:e=>U(e),value:(null===u||void 0===u?void 0:u.usEntryDate)||"",disabled:!l}),!C&&("opt"===(null===u||void 0===u?void 0:u.visaType)||"cpt"===(null===u||void 0===u?void 0:u.visaType)||"stem opt"===(null===u||void 0===u?void 0:u.visaType))&&Object(A.jsx)(x.a,{name:"entryDateOfF1",label:" EntryDateOfF1",type:"date",id:"entryDateOfF1",max:"2999-12-31",min:h,onChange:e=>U(e),value:(null===u||void 0===u?void 0:u.entryDateOfF1)||"",disabled:!l}),Object(A.jsx)(f.a,{name:"visaStatus",label:" Status",id:"visaStatus",onChange:U,value:(null===u||void 0===u?void 0:u.visaStatus)||"",options:[{id:1,value:"APPLIED",name:"Applied"},{id:2,value:"ACTIVE",name:"Active"},{id:3,value:"REJECTED",name:"Rejected"},{id:3,value:"EXPIRED",name:"Expired"},{id:4,value:"NOT APPLICABLE",name:"Not Applicable"}],disabled:!l}),!C&&"APPLIED"===(null===u||void 0===u?void 0:u.visaStatus)&&Object(A.jsx)(x.a,{name:"visaAppliedDate",label:"Applied On",type:"date",id:"visaAppliedDate",onChange:e=>U(e),value:(null===u||void 0===u?void 0:u.visaAppliedDate)||"",disabled:!l||"APPLIED"!==u.visaStatus}),!C&&"ACTIVE"===(null===u||void 0===u?void 0:u.visaStatus)&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(x.a,{name:"visaStartDate",label:" Start Date",type:"date",id:"visaStartDate",max:"2999-12-31",onChange:e=>U(e),value:(null===u||void 0===u?void 0:u.visaStartDate)||"",disabled:!l}),Object(A.jsx)(x.a,{name:"visaExpiryDate",label:" Expiry Date",type:"date",id:"visaExpiryDate",max:"2999-12-31",min:h,onChange:e=>U(e),value:(null===u||void 0===u?void 0:u.visaExpiryDate)||"",disabled:!l})]}),!C&&"EXPIRED"===(null===u||void 0===u?void 0:u.visaStatus)&&Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(x.a,{name:"visaExpiryDate",label:" Expiry Date",type:"date",id:"visaExpiryDate",max:"2999-12-31",min:h,onChange:e=>U(e),value:(null===u||void 0===u?void 0:u.visaExpiryDate)||"",disabled:!l})}),Object(A.jsx)(f.a,{label:"Worker",name:"workerId",onChange:e=>{r({...u,worker:{id:+e.target.value}})},value:(null===u||void 0===u||null===(t=u.worker)||void 0===t?void 0:t.id)||"",options:b,disabled:!l,required:!0}),Object(A.jsx)(f.a,{label:"Country Of Birth",name:"countryOfBirth",value:(null===u||void 0===u?void 0:u.countryOfBirth)||"",onChange:H,placeholder:"Country Of Birth...",options:v,required:!0,disabled:!l}),Object(A.jsx)(f.a,{label:"Country Of Residence",name:"visaCountryOfResidence",id:"visaCountryOfResidence",value:(null===u||void 0===u?void 0:u.visaCountryOfResidence)||"",onChange:H,options:v,required:!0,disabled:!l}),Object(A.jsx)(f.a,{label:"Country Of Citizenship",name:"visaCountry",value:(null===u||void 0===u?void 0:u.visaCountry)||"",onChange:H,placeholder:"Country...",options:v,required:!0,disabled:!l}),Object(A.jsx)(x.a,{name:"passportNumber",label:" Passport Number",id:"passportNumber",onChange:e=>U(e,"validateHasAlpha"),value:null===u||void 0===u?void 0:u.passportNumber,disabled:!l,errMssg:T.passportNumber}),Object(A.jsx)(x.a,{name:"visaNumber",label:" Visa Number",id:"visaNumber",onChange:e=>U(e),value:null===u||void 0===u?void 0:u.visaNumber,disabled:!l}),Object(A.jsx)(A.Fragment,{children:l?Object(A.jsxs)("div",{children:[Object(A.jsx)(x.a,{label:"Resume",type:"file",name:"resume",onChange:F,disabled:!l}),l&&z?Object(A.jsx)(o.a,{type:"button",className:"x-small",handleClick:M,children:Y?"Cancel":"Replace"}):l&&!z?Object(A.jsx)(o.a,{type:"button",className:"x-small",handleClick:M}):null]}):Object(A.jsxs)("div",{children:[Object(A.jsx)("label",{style:{fontWeight:"200",fontSize:"12px",textTransform:"uppercase",color:"rgba(0, 0, 0, 0.8)"},children:"Document"}),Object(A.jsxs)("div",{style:{display:"flex",paddingTop:"4px",fontSize:"13px"},children:[Object(A.jsx)(P,{id:null===u||void 0===u?void 0:u.id,resume:null===u||void 0===u||null===(a=u.resume)||void 0===a?void 0:a.resumeName,displayType:"link",required:!0,disabled:!l,noLabel:!0,className:"small"}),null===u||void 0===u||null===(s=u.resume)||void 0===s?void 0:s.resumeName]})]})})]})},T=a(857);var L=e=>{const[t,a]=Object(c.useState)([]),[s]=Object(c.useState)(j.a.getHeaders()),{visaDetails:n}=Object(d.c)((e=>e.visatracking)),[r,o]=Object(c.useState)(1),[i,l]=Object(c.useState)(0),v=Object(c.useCallback)((e=>{e&&p.a.get("".concat(u.a.serverURL,"/visahistory/visaPage?visaId=").concat(e,"&pageNo=").concat(r-1,"&pageSize=5&orderBy=visaStatus&orderMode=asc"),{headers:s}).then((e=>{e.data&&(a(e.data),l(e.headers["total-elements"]))})).catch((e=>{console.log(e)}))}),[s,r]);return Object(c.useEffect)((()=>{v(null===n||void 0===n?void 0:n.id)}),[n,v]),Object(A.jsxs)("div",{children:[Object(A.jsx)("h3",{className:"disabled-form-section-header",children:"History"}),Object(A.jsx)(T.a,{history:t,currentPage:r,setCurrentPage:o,totalItems:i})]})},z=a(840),M=a(781),Y=a(685),F=a(783),V=a(219),B=a(218),U=a(420),H=a(152);t.default=()=>{var e,t,a,b;const O=Object(l.useParams)(),[y,f]=Object(c.useState)(!0),[x]=Object(c.useState)(j.a.getHeaders()),C=Object(l.useHistory)(),[w,D]=Object(c.useState)(!1),[k]=Object(c.useState)("".concat(u.a.serverURL,"/visatracking")),[S]=Object(c.useState)({}),[N,E]=Object(c.useState)(!1),{editEnabled:P}=Object(d.c)((e=>e.visatracking)),{visaDetails:R}=Object(d.c)((e=>e.visatracking)),{requiredErr:T}=Object(d.c)((e=>e.visatracking)),{changesMade:q}=Object(d.c)((e=>e.visatracking)),X=Object(d.b)(),[J,K]=Object(c.useState)({}),W=Object(c.useMemo)((()=>j.a.isAdminOrOperations()),[]),[G,Q]=Object(c.useState)(!0),[Z,$]=Object(c.useState)(!1),[_,ee]=Object(c.useState)({}),[te,ae]=Object(c.useState)(null),[se,ne]=Object(c.useState)(!1),ce=Object(c.useCallback)((()=>{X(Object(h.b)(!1)),j.a.logout()}),[X]),re=Object(c.useCallback)((e=>X(Object(g.c)(e))),[X]),oe=Object(c.useCallback)((e=>X(Object(g.e)(e))),[X]),ie=Object(c.useCallback)((e=>X(Object(g.d)(e))),[X]),le=Object(c.useCallback)((e=>X(Object(g.b)(e))),[X]),de=Object(c.useCallback)((async()=>{try{const e=null===O||void 0===O?void 0:O.visaTrackingId;if(!e)return;const t=await Object(z.e)(x,e);200===t.statusCode?(oe(t.visaData),ee(t.resumeData)):401===t.statusCode&&ce()}catch(e){console.log(e)}}),[null===O||void 0===O?void 0:O.visaTrackingId,x,oe,ce]);Object(c.useEffect)((()=>{de()}),[y,P,de]);const ue=async e=>{e.preventDefault();const t="isLoading",a={...R};try{const e=await Object(z.h)(x,a,R.id);200===e.statusCode?te?ve():(je(),f(!0),oe(e.data),ee(e.data.resume),U.b.success({content:"visa updated!",messgKey:t,duration:5,style:{marginTop:"5%"}})):U.b.error({content:"An error occurred while saving changes (".concat(e.statusCode,")"),messgKey:t,duration:10})}catch(n){var s;401===(null===(s=n.response)||void 0===s?void 0:s.status)&&ce()}},ve=async()=>{try{const e=new FormData;e.append("file",te);let t={};if(_){200===(await Object(z.b)(x,R.id)).status&&(t=await Object(z.g)(x,R.id,e))}else t=await Object(z.g)(x,R.id,e);201===t.status&&(ee(te),oe(t.data),ee(t.data.resume),je(),U.b.success({content:"Candidate updated!",duration:5,style:{marginTop:"5%"}}))}catch(t){var e;U.b.error({content:"An error occurred while saving changes (".concat(null===(e=t.response)||void 0===e?void 0:e.status,")"),duration:10})}},be=()=>{D(!1),K({})},pe=()=>{oe(),re(!1),ne(!1),ae(null)},je=()=>{re(!1),ne(!1)};return Object(A.jsxs)(V.a,{children:[Object(A.jsx)(H.a,{onActive:()=>{Q(!0)},onIdle:()=>{Q(!1)},onLogout:()=>{$(!0)}}),Object(A.jsx)(B.a,{breadcrumbs:Object(A.jsx)(r.a,{className:"header",crumbs:[{id:0,text:"All Visas",onClick:()=>(je(),re(!1),ee({}),void C.push("/viewvisatrackings"))},{id:1,text:"".concat(null===R||void 0===R||null===(e=R.worker)||void 0===e?void 0:e.firstName," ").concat(null===R||void 0===R||null===(t=R.worker)||void 0===t?void 0:t.lastName),lastCrumb:!0}]}),actions:W&&Object(A.jsxs)(i.a,{children:[Object(A.jsx)(o.a,{type:"button",handleClick:()=>{P?pe():(re(!P),f(!y))},className:"btn icon marginX",title:"Edit",children:Object(A.jsx)(M.a,{})}),Object(A.jsx)(o.a,{type:"button",disabled:!0,className:"btn icon marginX",title:"Share",children:Object(A.jsx)(Y.a,{})}),Object(A.jsx)(o.a,{type:"button",disabled:!0,className:"btn icon marginX",title:"Export Report",children:Object(A.jsx)(F.a,{})})]})}),Object(A.jsxs)(s.a,{children:[N&&Object(A.jsx)("span",{className:"fixed-error-banner",children:"Resolve errors before submitting: ".concat(Object.keys(S).concat(Object.keys(T)).join(", "))}),Object(A.jsx)(n.a,{onSubmit:e=>{if(e.preventDefault(),Object.keys(S).length>0||Object.keys(T).length>0)E(!0);else{E(!1);const t={};p.a.post("".concat(k,"/checks/").concat(R.id),t,{headers:x}).then((t=>{200===t.status&&ue(e)})).catch((e=>{v.d(e),D(!0),K({title:"Error",details:"".concat(e.response.data),confirmValue:"Close"})}))}},cancel:()=>{q?(D(!0),K({title:"Confirm Discard Changes",details:"All changes will be discarded, proceed?",confirmValue:"Confirm",cancelValue:"Cancel"})):re(!1)},formEnabled:P,children:Object(A.jsx)(I,{resume:_,enableReplaceResume:()=>{ne((e=>!e))},replaceResumeEnabled:se,uploadNewResume:e=>{if(e.target.files[0].size>1048576)ie({...S,[e.target.name]:"File is too big. Please select file with size < 1MB"}),e.target.value="";else{le(!0);let t={...S};delete t[e.target.name],ie(t);let a=e.target.files[0];ae(a)}}})}),Object(A.jsx)(L,{})]}),Object(A.jsx)(m.a,{openModal:w,type:(null===(a=J.title)||void 0===a?void 0:a.toLowerCase())||"",closePopUp:be,handleConfirmClose:null!==(b=J.title)&&void 0!==b&&b.includes("Confirm")?pe:be,confirmValue:J.confirmValue,cancelValue:J.cancelValue,message:J})]})}},810:function(e,t,a){"use strict";a.d(t,"g",(function(){return l})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return u})),a.d(t,"f",(function(){return b})),a.d(t,"i",(function(){return p})),a.d(t,"a",(function(){return j})),a.d(t,"c",(function(){return h})),a.d(t,"b",(function(){return m})),a.d(t,"h",(function(){return O}));var s=a(25),n=a(13),c=a(16),r=a.n(c);const o="".concat(s.a.serverURL,"/worker"),i=e=>{var t,a;if(!e.response)throw new Error;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&n.a.logout(),{status:null===(a=e.response)||void 0===a?void 0:a.status,err:e}},l=async function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{const c=s||n?s?"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a,"&").concat(s):"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a):"?pageNo=".concat(t-1,"&pageSize=-1"),i=n?await r.a.put("".concat(o).concat(c),n,{headers:e}):await r.a.get("".concat(o).concat(c),{headers:e});if(200===i.status)return{data:i.data,totalItems:i.headers["total-elements"],status:i.status}}catch(c){return i(c)}},d=async(e,t)=>{try{const a=await r.a.get("".concat(s.a.serverURL,"/worker/").concat(t),{headers:e});let n={};return 200===a.status&&(n.workerData=a.data,n.workerProjectDetails=a.data,n.statusCode=a.status),n}catch(n){var a;return console.log(n),{statusCode:null===(a=n.response)||void 0===a?void 0:a.status}}},u=async function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").concat(t);return await v(e,a)},v=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const s=await r.a.get("".concat(o).concat(t).concat(a),{headers:e});let n={};return 200===s.status&&(n.tableData=(e=>e.map((e=>({...e}))))(s.data),n.totalItems=s.headers["total-elements"],n.statusCode=s.status),n}catch(c){var s;return 401===c.response.status&&n.a.logout(),{statusCode:null===(s=c.response)||void 0===s?void 0:s.status}}},b=async e=>{try{const t=await r.a.get("".concat(s.a.serverURL,"/worker?dropdownFilter=true"),{headers:e});let a={};return 200===t.status&&(a.tableData=t.data,a.totalItems=t.headers["total-elements"],a.statusCode=t.status),a}catch(a){var t;return console.log(a),{statusCode:null===(t=a.response)||void 0===t?void 0:t.status}}},p=async(e,t,a)=>{try{const n=await r.a.patch("".concat(s.a.serverURL,"/worker/").concat(a),t,{headers:e});if(200===n.status)return{statusCode:200,data:n.data};if(401===n.status)return{statusCode:401}}catch(n){return console.log(n),{statusCode:n.response.status}}},j=async(e,t)=>{try{const a=await r.a.all(t.map((t=>r.a.delete("".concat(o,"/").concat(t),{headers:e}))));if(a)return{status:a[0].status}}catch(a){return i(a)}},h=async(e,t,a)=>{try{const s=await r.a.get("".concat(o,"?archives=true&pageNo=").concat(t-1,"&pageSize=").concat(a),{headers:e});if(s)return{data:s.data.map((e=>{var t;return{id:e.id,cellOne:"".concat(e.firstName," ").concat(e.lastName),cellTwo:e.email,cellThree:e.phoneNumber,cellFour:null===e||void 0===e?void 0:e.status,cellFive:null===e||void 0===e?void 0:e.subContractorCompanyName,cellSix:null===(t=e.client)||void 0===t?void 0:t.clientName}})),totalItems:s.headers["total-elements"]}}catch(s){return i(s)}},m=async(e,t)=>{const a="/".concat(t,"/resume");try{return await r.a.delete("".concat(o).concat(a),{headers:e})}catch(c){var s;return 401===c.response.status&&n.a.logout(),{statusCode:null===(s=c.response)||void 0===s?void 0:s.status}}},O=async(e,t,a)=>{const s="/".concat(t,"/resume");try{return await r.a.post("".concat(o).concat(s),a,{headers:e})}catch(i){var c;return 401===i.response.status&&n.a.logout(),{statusCode:null===(c=i.response)||void 0===c?void 0:c.status}}}},817:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(824);var s=a(312),n=a(1);const c=e=>{let{columns:t,data:a,...c}=e;const r=e=>{const a=[];return t.forEach(((t,s)=>{e[t.key]&&t.render?a.push(Object(n.jsx)("td",{children:t.render(e[t.key],e)},s)):e[t.key]&&!t.render?a.push(Object(n.jsx)("td",{children:e[t.key]},s)):a.push(Object(n.jsx)("td",{},s))})),a};return Object(n.jsx)("div",{className:c.className?"table-component-container ".concat(c.className):"table-component-container",children:Object(n.jsx)("div",{className:"actions-pagination-container",children:Object(n.jsxs)("div",{className:"small-table-container",children:[Object(n.jsxs)("table",{className:"small-table",children:[Object(n.jsx)("thead",{children:Object(n.jsx)("tr",{className:"small-table-headers",children:t.map(((e,t)=>Object(n.jsx)("th",{children:e.title},t)))})}),Object(n.jsx)("tbody",{children:a.length>0&&(null===a||void 0===a?void 0:a.map(((e,t)=>e&&Object(n.jsx)("tr",{className:"small-table-body",children:r(e)},t))))})]}),c.includePagination&&Object(n.jsx)(s.a,{total:c.totalItems,itemsPerPage:c.perPage,currentPage:c.currentPage,onPageChange:c.onPageChange,items:c.items})]})})})}},818:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var s=a(2),n=a(0),c=a(819),r=a(24),o=function(e,t){return n.createElement(r.a,Object(s.a)({},e,{ref:t,icon:c.a}))};var i=n.forwardRef(o),l=a(1);const d=()=>Object(l.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"var(--tertiary)"},children:[Object(l.jsx)(i,{style:{fontSize:"40px"}}),"No Data"]})},819:function(e,t,a){"use strict";t.a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"}},824:function(e,t,a){},840:function(e,t,a){"use strict";a.d(t,"f",(function(){return l})),a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return v})),a.d(t,"d",(function(){return b})),a.d(t,"e",(function(){return p})),a.d(t,"h",(function(){return j})),a.d(t,"b",(function(){return h})),a.d(t,"g",(function(){return m}));var s=a(25),n=a(13),c=a(16),r=a.n(c);const o="".concat(s.a.serverURL,"/visatracking"),i=e=>{var t,a;if(!e.response)throw new Error;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&n.a.logout(),{status:null===(a=e.response)||void 0===a?void 0:a.status,err:e}},l=async function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").concat(t);return await d(e,a)},d=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const s=await r.a.get("".concat(o).concat(t).concat(a),{headers:e});let n={};return 200===s.status&&(n.tableData=(e=>e.map((e=>({...e}))))(s.data),n.totalItems=s.headers["total-elements"],n.statusCode=s.status),n}catch(c){var s;return 401===c.response.status&&n.a.logout(),{statusCode:null===(s=c.response)||void 0===s?void 0:s.status}}},u=async(e,t,a,s,n)=>{try{const c=s||n?s?"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a,"&").concat(s):"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a):"?pageNo=".concat(t-1,"&pageSize=-1"),i=n?await r.a.put("".concat(o).concat(c),n,{headers:e}):await r.a.get("".concat(o).concat(c),{headers:e});if(200===i.status)return{data:i.data,totalItems:i.headers["total-elements"],status:i.status}}catch(c){return i(c)}},v=async(e,t)=>{try{const a=await r.a.all(t.map((t=>r.a.delete("".concat(o,"/").concat(t),{headers:e}))));if(a)return{status:a.map((e=>e.status))}}catch(a){return i(a)}},b=async(e,t,a)=>{try{const s=await r.a.get("".concat(o,"?archives=true&pageNo=").concat(t-1,"&pageSize=").concat(a),{headers:e});if(s)return{data:s.data.map((e=>{var t,a;return{id:e.id,cellOne:"".concat(null===(t=e.worker)||void 0===t?void 0:t.firstName," ").concat(null===(a=e.worker)||void 0===a?void 0:a.lastName),cellTwo:e.countryOfBirth,cellThree:e.visaCountry,cellFour:e.visaCountryOfResidence,cellFive:e.visaType,cellSix:e.visaStatus}})),totalItems:s.headers["total-elements"]}}catch(s){return i(s)}},p=async(e,t)=>{try{const a=await r.a.get("".concat(o,"/").concat(t),{headers:e});let s={};return 200===a.status&&(s.visaData=a.data,s.statusCode=a.status),s}catch(s){var a;return console.log(s),{statusCode:null===(a=s.response)||void 0===a?void 0:a.status}}},j=async(e,t,a)=>{try{const s=await r.a.patch("".concat(o,"/").concat(a),t,{headers:e});if(console.log("Update Visa Response:",s),200===s.status)return{statusCode:200,data:s.data};if(401===s.status)return{statusCode:401}}catch(s){return console.error("Update Visa Error:",s),{statusCode:s.response.status}}},h=async(e,t)=>{const a="/".concat(t,"/resume");try{return await r.a.delete("".concat(o).concat(a),{headers:e})}catch(c){var s;return 401===c.response.status&&n.a.logout(),{statusCode:null===(s=c.response)||void 0===s?void 0:s.status}}},m=async(e,t,a)=>{const s="/".concat(t,"/resume");try{return await r.a.post("".concat(o).concat(s),a,{headers:e})}catch(i){var c;return 401===i.response.status&&n.a.logout(),{statusCode:null===(c=i.response)||void 0===c?void 0:c.status}}}},857:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var s=a(0),n=a(11),c=a.n(n),r=a(817),o=a(818),i=a(312),l=a(1);const d=e=>{let{history:t,...a}=e;const[n,d]=Object(s.useState)([]);Object(s.useEffect)((()=>{if(t.length){const e=t.map((e=>({birthCountry:e.countryOfBirth,citizenOf:e.visaCountry,residesIn:e.visaCountryOfResidence,type:e.visaType,status:e.visaStatus,start:e.visaStartDate,expires:e.visaExpiryDate,applied:e.visaAppliedDate,user:e.user,updatedDate:e.updatedDate,id:e.visaHistoryId})));d(e)}}),[t]);const u=[{title:"Status",key:"status",render:e=>Object(l.jsxs)("span",{className:"small-table-status ".concat(e&&e.toLowerCase()),children:[e," "]})},{title:"Updated",key:"user",render:(e,t)=>Object(l.jsxs)("div",{className:"updatedon-container",children:[Object(l.jsx)("span",{children:e}),Object(l.jsx)("span",{children:null!==t&&void 0!==t&&t.updatedDate?c()(null===t||void 0===t?void 0:t.updatedDate).format("MM/DD/YYYY"):""})]})},{title:"Birth Country",key:"birthCountry"},{title:"Citizen of",key:"citizenOf"},{title:"Resides In",key:"residesIn"},{title:"Visa Type",key:"type"},{title:"Starts On",key:"start",render:e=>e?c()(e).format("MM/DD/YYYY"):""},{title:"Expires On",key:"expires",render:e=>e?c()(e).format("MM/DD/YYYY"):""},{title:"Applied On",key:"applied",render:e=>e?c()(e).format("MM/DD/YYYY"):""}];return t.length?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(r.a,{data:n,columns:u}),a.totalItems>5&&Object(l.jsx)(i.a,{total:a.totalItems,itemsPerPage:5,currentPage:a.currentPage,onPageChange:e=>{a.setCurrentPage(e)}})]}):Object(l.jsx)(o.a,{})}}}]);