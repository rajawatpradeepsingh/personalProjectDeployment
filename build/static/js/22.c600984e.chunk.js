(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[22],{1085:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a(75),n=a(13),s=a(22),o=a(219),l=a(218),i=a(804),d=a(798),u=a(806),b=a(420),j=a(762),p=a(152),v=a(11),h=a.n(v),f=a(841),m=a(801),g=(a(822),a(1));const O=Object(r.forwardRef)(((e,t)=>{let{open:a,setOpen:c,...s}=e;const o=Object(r.useMemo)((()=>n.a.getHeaders()),[]),[l,i]=Object(r.useState)(1),[d,u]=Object(r.useState)(0),[b,j]=Object(r.useState)([]),p=Object(r.useCallback)((async()=>{const e=await Object(f.b)(o,l,10);e&&(j(e.data),u(e.totalItems))}),[l,o]);return Object(r.useEffect)((()=>{p()}),[l,o,p]),Object(r.useImperativeHandle)(t,(()=>({loadArchive(){p()},length:b.length}))),Object(g.jsx)(m.a,{openArchive:a,setOpenArchive:c,loadArchive:p,archive:b,archivedData:"projects",headers:["Client","Project Name","Worker","Start Date","End Date","Resource Manager","Net Bill Rate "],totalItems:d,setArchiveCurrentPage:i,archiveCurrentPage:l})}));var y=a(16),k=a.n(y),x=a(25);var S=a(805),C=a(808);t.default=()=>{var e;const t=Object(c.useHistory)(),a=Object(r.useMemo)((()=>n.a.getHeaders()),[]),v=Object(r.useRef)(null),[m,y]=Object(r.useState)(!1),[N,w]=Object(r.useState)(!1),[D,R]=Object(r.useState)(!1),[M,A]=Object(r.useState)([]),[I,E]=Object(r.useState)(0),[P,L]=Object(r.useState)(!0),[Y,F]=Object(r.useState)(10),[U,B]=Object(r.useState)(1),[H,z]=Object(r.useState)([]),[T,W]=Object(r.useState)({}),[J,V]=Object(r.useState)({}),[G,K]=Object(r.useState)([]),[_,q]=Object(r.useState)([]),[Q,X]=Object(r.useState)(!0),[Z,$]=Object(r.useState)(!1),[ee,te]=Object(r.useState)([]),[ae,re]=Object(r.useState)([]),[ce,ne]=Object(r.useState)([]),se=Object(r.useMemo)((()=>n.a.getUserInfo()),[]),[oe,le]=Object(r.useState)(se.roles[0]);Object(r.useEffect)((()=>{n.a.hasAdminRole()&&R(!0)}),[]);const ie=Object(r.useCallback)((e=>{t.push("/projects/".concat(e))}),[t]),de=Object(r.useCallback)((async()=>{await k.a.get("".concat(x.a.serverURL,"/clients?dropdownFilter=true"),{headers:a}).then((e=>{e.data&&te(e.data.map((e=>{var t;return{text:"".concat(e.clientName," (").concat(null===(t=e.address)||void 0===t?void 0:t.city,")"),value:e.id}})))})).catch((e=>console.log(e)))}),[a]);Object(r.useEffect)((()=>de()),[de]);const ue=Object(r.useCallback)((async()=>{await k.a.get("".concat(x.a.serverURL,"/worker?dropdownFilter=true"),{headers:a}).then((e=>{e.data&&re(e.data.map((e=>({text:"".concat(e.firstName," (").concat(e.lastName,")"),value:e.id}))))})).catch((e=>console.log(e)))}),[a]);Object(r.useEffect)((()=>ue()),[ue]);const be=Object(r.useCallback)((async()=>{await k.a.get(x.a.serverURL+"/resourcemanager?dropdownFilter=true&role=SALESMANAGER",{headers:a}).then((e=>{e.data&&ne(e.data.map((e=>({text:"".concat(e.firstName," (").concat(e.lastName,")"),value:e.resourceManagerId}))))})).catch((e=>console.log(e)))}),[a]);Object(r.useEffect)((()=>be()),[be]);const je=Object(r.useMemo)((()=>[{title:"Project",dataIndex:"projectName",key:"projectName",sorter:!0,fixed:"left",width:170,render:(e,t)=>Object(g.jsx)(d.a,{label:"".concat(e," "),onClick:()=>ie(t.id),extra:t.projectNumber})},{title:"Worker",dataIndex:"worker",key:"worker.firstName",filters:ae,sorter:!0,fixed:"left",width:170,render:(e,t)=>Object(g.jsx)(d.a,{label:"".concat(e.firstName," ").concat(e.lastName),onClick:()=>ie(t.id)}),filterSearch:!0},{title:"Client",dataIndex:"client",key:"client.clientName",width:120,sorter:!0,filters:ee,render:e=>{var t;return Object(g.jsx)(u.a,{name:e.clientName,location:"".concat(null===(t=e.address)||void 0===t?void 0:t.city)})},filterSearch:!0},{title:"Start Date",dataIndex:"startDate",key:"startDate",sorter:!0,render:e=>h()(e).format("MM/DD/YYYY")},{title:"End Date",dataIndex:"endDate",key:"endDate",sorter:!0,render:e=>h()(e).format("MM/DD/YYYY")},{title:"Resource Manager",dataIndex:"resourceManager",key:"resourceManager.firstName",width:120,sorter:!0,render:e=>Object(g.jsx)(u.a,{name:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName)}),filters:ce,filterSearch:!0},{title:"Client Rate",dataIndex:"clientRate",key:"clientRate",render:e=>Object(g.jsx)("div",{style:{textAlign:"right",marginLeft:"10px"},children:Number(e).toFixed(2)})},{title:"VMS Adjusted Bill Rate",dataIndex:"billRate",key:"billRate",render:e=>Object(g.jsx)("div",{style:{textAlign:"right",marginLeft:"10px"},children:Number(e).toFixed(2)})},{title:"Rebate Adjusted Bill Rate",dataIndex:"netBillRate",key:"netBillRate",render:e=>Object(g.jsx)("div",{style:{textAlign:"right",marginLeft:"10px"},children:Number(e).toFixed(2)})}]),[ae,ee,ce]);Object(r.useEffect)((()=>{K(je)}),[je]);const pe=Object(r.useCallback)((async()=>{const e="pageNo=".concat(U,"&pageSize=-1");if(Object.keys(J).length){let e="";for(const a in T)a&&(e+="&orderBy=".concat(a,"&orderMode=").concat(T[a]));const t=Object.keys(J).length?J:null;L(!0);const r=await Object(f.e)(a,U,Y,e||"&orderBy=id&orderMode=desc",t);r&&L(!1),200===r.status&&(A(r.data),E(r.totalItems)),200!==r.status&&b.b.error("Something's gone wrong, refresh page or contact your system admin")}else{let t="?".concat(e);for(const e in T)e&&(t+="&orderBy=".concat(e,"&orderMode=").concat(T[e]));const r=await Object(f.d)(a,t);r&&L(!1),200===r.statusCode&&(A(r.tableData),E(r.totalItems)),200!==r.statusCode&&b.b.error("Something's gone wrong, refresh page or contact your system admin")}}),[a,U,Y,T,J]);Object(r.useEffect)((()=>{pe()}),[pe,J,null===v||void 0===v||null===(e=v.current)||void 0===e?void 0:e.length]);Object(r.useEffect)((()=>{pe()}),[pe]);const ve=Object(r.useCallback)((e=>V({...J,search:e})),[J]),he=Object(r.useCallback)((e=>{let t=[];for(let a in e)if("string"!==typeof e[a]&&"number"!==typeof e[a]||"id"===a||""===e[a])"object"===typeof e[a]&&(t=t.concat(he(e[a])));else if("projectName"===a){let r=e[a].split(", ");t.push(r[0],r[1],r[2])}else t.push(e[a]);return t}),[]);Object(r.useEffect)((()=>{if(M){let e=[];for(let t of M){he(t).forEach((t=>{e.includes(t)||e.push(t)}))}z(e)}}),[M,he]);const fe={onChange:(e,t)=>{D||oe.projectsPermission?q(e):q([])},selectedRowKeys:_};return Object(g.jsxs)(o.a,{children:[Object(g.jsx)(l.a,{title:"Projects",actions:D||oe.projectsPermission?Object(g.jsxs)(s.a,{type:"button",className:"btn main",handleClick:()=>{t.push("/addprojects")},children:[Object(g.jsx)(j.a,{className:"icon"}),"Add Project"]}):""}),Object(g.jsx)(p.a,{onActive:()=>{X(!0)},onIdle:()=>{X(!1)},onLogout:()=>{$(!0)}}),Object(g.jsx)(i.a,{loading:P,data:M.map((e=>({...e,key:e.id}))),columns:G,setColumns:K,defaultColumns:je,rowSelection:!(!D&&!oe.projectsPermission)&&fe,total:I,setCurrentPage:B,setPageSize:F,setSort:W,setFilters:V,filters:J,searchOptions:H,searchList:M,handleSearch:ve,openArchive:()=>y(!0),openReports:()=>w(!0),handleConfirmArchive:async()=>{200===await Object(f.a)(a,_)?(pe(),b.b.success("Project record archived successfully!"),v.current.loadArchive(),q([])):b.b.error("Something's gone wrong, refresh page or contact your system admin")},handleCancelArchiving:()=>{q([])},removeableColumns:je.filter((e=>"Project"!==e.title&&e.title)).map((e=>e.title))}),Object(g.jsx)(S.a,{showReportModal:N,setShowReportModal:w,individualReportName:"projects",individualList:M,list:M.map((e=>({id:e.id,name:"".concat(e.projectName)}))),listLabel:"Projects",filename:"project_report",tableFields:[{label:"Client",value:"client",key:"client"},{label:"Worker",value:"worker",key:"worker"},{label:"Start Date",value:"startDate",key:"startDate"},{label:"End Date",value:"endDate",key:"endDate"},{label:"Resource Manager",value:"resourceManager",key:"resourceManager"},{label:"Client Rate",value:"clientRate",key:"clientRate"},{label:"VMS Adjusted bill Rate",value:"billRate",key:"billRate"},{label:"Rebate Adjusted bill Rate",value:"netBillRate",key:"netBillRate"}],pdfFormatter:C.a.projectPdfFormat,csvExcelFormatter:C.a.projectCSVExcel}),Object(g.jsx)(O,{open:m,setOpen:y,ref:v})]})}},798:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(800);var r=a(1);const c=e=>Object(r.jsxs)("div",{className:"tablelink-container",children:[Object(r.jsx)("span",{onClick:e.onClick,className:"tablelink ".concat(e.styleRed&&"red"," ").concat(e.className&&e.className),children:e.label}),e.extra&&Object(r.jsx)("span",{className:"table-link-extra",children:e.extra})]})},806:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(807);var r=a(1);const c=e=>{let{name:t,location:a,...c}=e;return Object(r.jsxs)("div",{className:"client-details-container",children:[Object(r.jsx)("span",{children:t}),Object(r.jsx)("span",{children:a}),c.extra&&Object(r.jsx)("span",{children:c.extra})]})}},807:function(e,t,a){},822:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return n}));const r=()=>[{label:"Hiring Type ",value:"hiringType",key:"hiringType"},{label:"Start Date",value:"startDate",key:"startDate"},{label:"End Date",value:"endDate",key:"endDate"},{label:"Sign Up Contract",value:"signUpContract",key:"signUpContract"},{label:"Client",value:"client",key:"client"},{label:"Ease Portal Setup",value:"easePortalSetUp",key:"easePortalSetUp"},{label:"Work Order",value:"workOrder",key:"workOrder"},{label:"Background Check",value:"backgroundCheck",key:"backgroundCheck"},{label:"Delivery Of Laptop",value:"deliveryOfLaptop",key:"deliveryOfLaptop"}],c=()=>["Candidate Name","Client","Hiring Type","Start Date","End Date","Sign Up Contract","Delivery Of Laptop"],n=[{text:"Direct Hire",value:"Direct Hire"},{text:"Internal Hire",value:"Internal Hire"},{text:"Corp to Corp Hire",value:"Corp to Corp Hire"}]},841:function(e,t,a){"use strict";a.d(t,"d",(function(){return b})),a.d(t,"e",(function(){return p})),a.d(t,"b",(function(){return v})),a.d(t,"a",(function(){return h})),a.d(t,"c",(function(){return f})),a.d(t,"f",(function(){return m}));var r=a(25),c=a(13),n=a(16),s=a.n(n),o=a(11),l=a.n(o);const i="".concat(r.a.serverURL,"/projects"),d=e=>{var t,a;if(!e.response)throw new Error;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&c.a.logout(),{status:null===(a=e.response)||void 0===a?void 0:a.status,err:e}},u=e=>e.map((e=>{var t;return{...e,projectNumber:"PRJ-".concat(null===e||void 0===e||null===(t=e.client)||void 0===t?void 0:t.clientName.toUpperCase().substr(0,3),"-").concat(("00"+(null===e||void 0===e?void 0:e.id)).slice(-5))}})),b=async function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").concat(t);return await j(e,a)},j=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const r=await s.a.get("".concat(i).concat(t).concat(a),{headers:e});let c={};return 200===r.status&&(c.tableData=u(r.data),c.totalItems=r.headers["total-elements"],c.statusCode=r.status),c}catch(n){var r;return 401===n.response.status&&c.a.logout(),{statusCode:null===(r=n.response)||void 0===r?void 0:r.status}}},p=async(e,t,a,r,c)=>{try{const n=r||c?r?"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a,"&").concat(r):"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a):"?pageNo=".concat(t-1,"&pageSize=-1"),o=c?await s.a.put("".concat(i).concat(n),c,{headers:e}):await s.a.get("".concat(i).concat(n),{headers:e});if(200===o.status)return{data:o.data,totalItems:o.headers["total-elements"],status:o.status}}catch(n){return d(n)}},v=async(e,t,a)=>{try{const r=await s.a.get("".concat(i,"?archives=true&pageNo=").concat(t-1,"&pageSize=").concat(a),{headers:e});if(r)return{data:r.data.map((e=>{var t,a,r,c,n;return{id:e.id,cellOne:(null===(t=e.client)||void 0===t?void 0:t.clientName)||"",cellTwo:(null===e||void 0===e?void 0:e.projectName)||"",cellThree:"".concat(null===(a=e.worker)||void 0===a?void 0:a.firstName," ").concat(null===(r=e.worker)||void 0===r?void 0:r.lastName),cellFour:e.startDate?l()(e.startDate).format("MM/DD/YYYY"):"",cellFive:e.endDate?l()(e.endDate).format("MM/DD/YYYY"):"",cellSix:"".concat(null===(c=e.resourceManager)||void 0===c?void 0:c.firstName," ").concat(null===(n=e.resourceManager)||void 0===n?void 0:n.lastName),cellSeven:e.netBillRate||""}})),totalItems:r.headers["total-elements"]}}catch(r){console.log(r)}},h=async(e,t)=>{try{const a=await s.a.all(t.map((t=>s.a.delete("".concat(i,"/").concat(t),{headers:e}))));if(a.length)return a[0].status}catch(a){return d(a)}},f=async(e,t)=>{try{const a=await s.a.get("".concat(r.a.serverURL,"/projects/").concat(t),{headers:e});let c={};return 200===a.status&&(c.projectData=a.data,c.Details=a.data,c.statusCode=a.status),c}catch(c){var a;return console.log(c),{statusCode:null===(a=c.response)||void 0===a?void 0:a.status}}},m=async(e,t,a)=>{try{const c=await s.a.patch("".concat(r.a.serverURL,"/projects/").concat(a),t,{headers:e});if(200===c.status)return{statusCode:200,data:c.data};if(401===c.status)return{statusCode:c.status}}catch(o){var n;return 401===o.response.status&&c.a.logout(),{statusCode:null===(n=o.response)||void 0===n?void 0:n.status}}}}}]);