(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[52],{1058:function(e,s,n){"use strict";n.r(s);var t=n(0),i=n(75),a=n(95),r=n(28),o=n(137),l=n(66),m=n(27),c=n(306),d=(n(981),n(96)),g=n(318),b=n(219),u=n(218),p=n(13),j=n(91),O=n(344),w=n(313),P=n(683),h=n(1);s.default=()=>{const e=Object(r.b)(),s=Object(i.useHistory)(),n=Object(i.useParams)(),B=Object(t.useMemo)((()=>p.a.getHeaders()),[]),{selectedRole:k,roles:v}=Object(r.c)((e=>e.roles)),[x,f]=Object(t.useState)(k.roleName),[C,y]=Object(t.useState)(""),[N,S]=Object(t.useState)(""),[R,E]=Object(t.useState)(!1),[L,M]=Object(t.useState)({}),I=Object(t.useCallback)((()=>{e(Object(j.b)(!1)),p.a.logout()}),[e]),J=Object(t.useCallback)((s=>e(Object(O.c)(s))),[e]),U=Object(t.useCallback)((async()=>{const e=(null===n||void 0===n?void 0:n.roleId)||(null===L||void 0===L?void 0:L.id);e&&Object(g.d)(B,e).then((e=>{200===e.statusCode?(console.log(e),J(e.roledata),M(e.roledata)):401===e.statusCode&&I()}))}),[null===n||void 0===n?void 0:n.roleId,null===L||void 0===L?void 0:L.id,B,I]);Object(t.useEffect)((()=>{U()}),[U]);Object(t.useEffect)((()=>{const e=v.find((e=>e.roleName.toLowerCase()===x.toLowerCase()&&e.id!==k.id));y(e?"This role already exists":"")}),[x,v,k.id,k]);const z=()=>{E(!1)},D=()=>{s.push("/viewroles")};return Object(h.jsxs)(b.a,{children:[Object(h.jsx)(u.a,{breadcrumbs:Object(h.jsx)(c.a,{className:"header",crumbs:[{text:"Roles",onClick:()=>D(),id:0},{text:"Edit Role",lastCrumb:!0,id:1}]})}),Object(h.jsxs)(o.a,{children:[Object(h.jsx)(l.a,{cancel:()=>{M({...L,roleName:k.roleName,manager:k.manager,client:k.client,worker:k.worker,candidates:k.candidates,jobOpenings:k.jobOpenings,suppliers:k.suppliers,onBoardings:k.onBoardings,settings:k.settings,interviews:k.interviews}),D()},onSubmit:e=>{s.push("/viewroles"),e.preventDefault();const n={roleName:x.toUpperCase(),manager:L.manager,managerPermission:L.managerPermission,candidates:L.candidates,candidatePermission:L.candidatePermission,client:L.client,clientPermission:L.clientPermission,jobOpenings:L.jobOpenings,jobOpeningsPermission:L.jobOpeningsPermission,interviews:L.interviews,interviewsPermission:L.interviewsPermission,onBoardings:L.onBoardings,onBoardingsPermission:L.onBoardingsPermission,suppliers:L.suppliers,suppliersPermission:L.suppliersPermission,settings:L.settings,settingsPermission:L.settingsPermission,worker:L.worker,workerPermission:L.workerPermission,projects:L.projects,projectsPermission:L.projectsPermission,workOrder:L.workOrder,workOrderPermission:L.workOrderPermission,calendar:L.calendar,calendarPermission:L.calendarPermission,timesheet:L.timesheet,timesheetPermission:L.timesheetPermission};let t=JSON.parse(sessionStorage.getItem("headers"));C||Object(g.f)(t,k.id,n).then((e=>{200===e.status&&E(!0)}))},formEnabled:!0,className:"centered",children:Object(h.jsxs)("div",{style:{justifyContent:"space-between",flexDirection:"column",display:"flex",width:465},children:[Object(h.jsx)("div",{style:{width:500,marginBottom:5,marginLeft:115},children:Object(h.jsx)(m.a,{type:"text",label:"Role Name",name:"roleName",value:x||L.roleName,onChange:e=>((e,s)=>{const n=Object(a.a)(s,e.target.value);f(e.target.value),S(n?"":"Role names can only contain letters")})(e,"validateName"),maxLength:"20",errMssg:C||N,required:!0})}),Object(h.jsx)(w.a,{headers:[{label:"Module Name"},{label:"Visibility"},{label:"Permission"}],body:[{id:1,key:"key",cells:[{id:0,className:"cell",data:[{label:"manager",name:"manager"},{label:"candidates",name:"candidates"},{label:"worker",name:"worker"},{label:"client",name:"client"},{label:"job Openings",name:"jobOpenings"},{label:"interviews",name:"interviews"},{label:"suppliers",name:"suppliers"},{label:"on Boardings",name:"onBoardings"},{label:"projects",name:"projects"},{label:"timesheet",name:"timesheet"},{label:"calendar",name:"calendar"},{label:"work Order",name:"workOrder"},{label:"settings",name:"settings"}].map((e=>Object(h.jsx)("div",{style:{},children:Object(h.jsx)("h5",{children:e.label.toUpperCase()},e.name)})))},{id:1,data:[{label:"manager",name:"manager",toggleButton:L.manager},{label:"candidate",name:"candidates",toggleButton:L.candidates},{label:"worker",name:"worker",toggleButton:L.worker},{label:"client",name:"client",toggleButton:L.client},{label:"job Openings",name:"jobOpenings",toggleButton:L.jobOpenings},{label:"interviews",name:"interviews",toggleButton:L.interviews},{label:"suppliers",name:"suppliers",toggleButton:L.suppliers},{label:"on Boardings",name:"onBoardings",toggleButton:L.onBoardings},{label:"projects",name:"projects",toggleButton:L.projects},{label:"timesheet",name:"timesheet",toggleButton:L.timesheet},{label:"calendar",name:"calendar",toggleButton:L.calendar},{label:"work Order",name:"workOrder",toggleButton:L.workOrder},{label:"settings",name:"settings",toggleButton:L.settings}].map((e=>Object(h.jsx)("div",{style:{marginBottom:5.5},children:Object(h.jsx)(P.a,{label:e.label,onChange:s=>M({...L,[e.name]:!!s}),checked:e.toggleButton?"Yes":"",size:"small"},e.name)})))},{id:2,data:[{label:"manager",name:"managerPermission",toggleButton:L.managerPermission},{label:"candidate",name:"candidatePermission",toggleButton:L.candidatePermission},{label:"worker",name:"workerPermission",toggleButton:L.workerPermission},{label:"client",name:"clientPermission",toggleButton:L.clientPermission},{label:"jobOpenings",name:"jobOpeningsPermission",toggleButton:L.jobOpeningsPermission},{label:"interviews",name:"interviewsPermission",toggleButton:L.interviewsPermission},{label:"suppliers",name:"suppliersPermission",toggleButton:L.suppliersPermission},{label:"onBoardings",name:"onBoardingsPermission",toggleButton:L.onBoardingsPermission},{label:"projects",name:"projectsPermission",toggleButton:L.projectsPermission},{label:"timesheet",name:"timesheetPermission",toggleButton:L.timesheetPermission},{label:"calendar",name:"calendarPermission",toggleButton:L.calendarPermission},{label:"workOrder",name:"workOrderPermission",toggleButton:L.workOrderPermission},{label:"settings",name:"settingsPermission",toggleButton:L.settingsPermission}].map((e=>Object(h.jsx)("div",{style:{marginBottom:5.5},children:Object(h.jsx)(P.a,{checkedChildren:"Editable",unCheckedChildren:"Read Only",label:e.label,onChange:s=>M({...L,[e.name]:!!s}),checked:e.toggleButton?"Yes":"",size:"small",disabled:e.name.includes("manager")&&!L.manager||e.name.includes("candidate")&&!L.candidates||e.name.includes("worker")&&!L.worker||e.name.includes("client")&&!L.client||e.name.includes("jobOpenings")&&!L.jobOpenings||e.name.includes("interviews")&&!L.interviews||e.name.includes("suppliers")&&!L.suppliers||e.name.includes("onBoardings")&&!L.onBoardings||e.name.includes("settings")&&!L.settings||e.name.includes("projects")&&!L.projects||e.name.includes("workOrder")&&!L.workOrder||e.name.includes("timesheet")&&!L.timesheet||e.name.includes("calendar")&&!L.calendar},e.name)},e.name)))}]}]})]})}),Object(h.jsx)(d.a,{type:"Success",openModal:R,closePopUp:z,handleConfirmClose:z,confirmValue:"Ok",message:{title:"Success",details:"Role updated successfully."}})]})]})}},981:function(e,s,n){}}]);