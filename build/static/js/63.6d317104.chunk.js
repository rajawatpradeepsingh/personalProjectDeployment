(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[63],{1078:function(e,t,a){"use strict";a.r(t);var n=a(306),s=a(28),l=a(75),c=a(13),o=a(0),i=a(22),d=a(137),r=a(66),u=a(96),b=a(27),v=a(323),m=a(35),j=a(220),p=a(138),g=a(95),O=a(112),h=a(63),f=a(1);var C=()=>{var e,t,a,n,l,i;const d=Object(s.b)(),[r]=Object(o.useState)(c.a.getHeaders()),{basicInfo:u}=Object(s.c)((e=>e.supplier)),{editEnabled:C}=Object(s.c)((e=>e.supplier)),{inputErr:x,requiredErr:y}=Object(s.c)((e=>e.supplier)),N=e=>d(Object(v.b)(e)),S=e=>d(Object(v.c)(e)),w=e=>d(Object(v.e)(e)),[E,D]=Object(o.useState)(!1),[I,P]=Object(o.useState)([]),[k,L]=Object(o.useState)([]),[Y,M]=Object(o.useState)([]),[A,T]=Object(o.useState)([]),[F,V]=Object(o.useState)([]),R=Object(o.useCallback)((async()=>{const e={};return e.prime=await Object(h.e)("supplierCompanyName",r),e.secondary=await Object(h.e)("designation",r),e}),[r]);Object(o.useEffect)((()=>{let e=!1;return(async()=>{try{const t=await R();Object.keys(t).length&&(e||(M(t.prime),T(t.secondary)))}catch(t){e||console.log(t)}})(),()=>e=!0}),[R]),Object(o.useEffect)((()=>{L(p.c())}),[]),Object(o.useEffect)((()=>{var e;if(null!==u&&void 0!==u&&null!==(e=u.address)&&void 0!==e&&e.countryCode){var t,a;V(p.d(u.address.countryCode));const e=p.b(u.address.countryCode);null!==(t=u.address)&&void 0!==t&&t.stateCode&&P(p.a(u.address.countryCode,u.address.stateCode)),D((null===(a=u.address)||void 0===a||!a.stateCode)&&e>100)}}),[u]);const U=e=>{X({[e.target.name]:e.target.value})},q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;S(!0);const a=Object(g.a)(t,e.target.value);let n;var s;""!==e.target.value&&(n={...y},delete n[e.target.name],s=n,d(Object(v.f)(s))),N({...u,[e.target.name]:e.target.value}),a?(n={...x},delete n[e.target.name],w(n)):w({...x,[e.target.name]:"Invalid format or characters"})},B=function(e,t){const a=e.filter((e=>e.selected)).map((e=>e.value)).join(",");let n=t;"supplierCompanyName"===t&&(n="supplierCompanyName"),"designation"===t&&(n="designation");const s={target:{name:n,value:a||""}};q(s),e.filter((e=>!e.id&&!e.isDeleted)).forEach((e=>{Object(h.h)(t,e.value,r).then((e=>{"supplierCompanyName"===t&&M([...Y,e]),"designation"===t&&T([...A,e])})).catch((e=>console.log(e)))})),e.filter((e=>e.isDeleted)).forEach((e=>{Object(h.a)(e.id,r).catch((e=>console.log(e)))}));const l=e.filter((e=>!e.isDeleted));"supplierCompanyName"===t&&M(l),"designation"===t&&T(l)},X=e=>{S(!0),N({...u,address:{...u.address,...e}})};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h3",{className:"disabled-form-section-header",children:" Basic Information"}),Object(f.jsx)(O.a,{label:"Supplier",options:Y.map((e=>{var t;return{id:e.id,value:e.value,label:e.value,selected:null===u||void 0===u||null===(t=u.supplierCompanyName)||void 0===t?void 0:t.includes(e.value)}})),handleChange:e=>B(e,"supplierCompanyName","basicInfo"),creatable:!0,isMulti:!0,disabled:!C}),Object(f.jsx)(O.a,{label:"Title",options:A.map((e=>{var t;return{id:e.id,value:e.value,label:e.value,selected:null===u||void 0===u||null===(t=u.designation)||void 0===t?void 0:t.includes(e.value)}})),handleChange:e=>B(e,"designation","basicInfo"),creatable:!0,isMulti:!0,disabled:!C}),Object(f.jsx)("h3",{className:"disabled-form-section-header",children:" Contact"}),C?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(b.a,{type:"text",label:"First Name",name:"firstName",value:(null===u||void 0===u?void 0:u.firstName)||"",onChange:e=>q(e,"validateName"),maxLength:"40",required:!0,disabled:!C,errMssg:x.firstName}),Object(f.jsx)(b.a,{type:"text",label:"Last Name",name:"lastName",value:(null===u||void 0===u?void 0:u.lastName)||"",onChange:e=>q(e,"validateName"),maxLength:"40",disabled:!C,errMssg:x.lastName})]}):Object(f.jsx)(b.a,{label:"Name",readOnly:!0,value:"".concat(null===u||void 0===u?void 0:u.firstName," ").concat(null===u||void 0===u?void 0:u.lastName)}),Object(f.jsx)(b.a,{type:"email",label:"Email",name:"email",value:(null===u||void 0===u?void 0:u.email)||"",onChange:e=>q(e,"validateEmail"),required:!0,disabled:!C,errMssg:x.email}),Object(f.jsx)(j.a,{label:"Phone Num.",phoneNumber:(null===u||void 0===u?void 0:u.phone_no)||"",handleChange:e=>{N({...u,phone_no:e})},disabled:!C,setError:e=>{if(e)Object(v.e)({...x,phone_no:!0});else{let e={...x};delete e.phone_no,Object(v.e)(e)}}}),Object(f.jsx)(b.a,{type:"text",label:"Website",name:"website",value:(null===u||void 0===u?void 0:u.website)||"",onChange:e=>q(e,"validateURL"),errMssg:x.website,disabled:!C}),Object(f.jsx)(m.a,{name:"status",label:"Status",type:"status",id:"status",onChange:e=>q(e),value:null===u||void 0===u?void 0:u.status,options:[{id:1,value:"ACTIVE",name:"Active"},{id:2,value:"INACTIVE",name:"Inactive"}],disabled:!C}),Object(f.jsx)("h3",{className:"disabled-form-section-header",children:" Address"}),Object(f.jsx)(m.a,{label:"Country",name:"country",value:(null===u||void 0===u||null===(e=u.address)||void 0===e?void 0:e.country)||"",onChange:e=>{var t;const a=e.target.selectedOptions[0].index,n=a?k[e.target.selectedOptions[0].index-1]:{};let s=[];a&&(s=p.a(n.code)),X({country:n.name,countryCode:n.code,state:"",stateCode:"",city:""}),V(a?p.d(n.code):[]),P(a?p.a(n.code):[]),D(!!a&&(null===(t=s)||void 0===t?void 0:t.length)>100)},placeholder:"Select Country",options:k,disabled:!C}),Object(f.jsx)(m.a,{placeholder:"Select state",label:"State / Province",name:"state",value:(null===u||void 0===u||null===(t=u.address)||void 0===t?void 0:t.state)||"",onChange:e=>{const t=e.target.selectedOptions[0].index,a=t?F[e.target.selectedOptions[0].index-1]:{};let n=[];var s,l,c;t?(n=p.a(null===(s=u.address)||void 0===s?void 0:s.countryCode,a.code),D(!1)):(n=p.a(null===(l=u.address)||void 0===l?void 0:l.countryCode),D((null===(c=n)||void 0===c?void 0:c.length)>100));X({[e.target.name]:a.name,stateCode:a.code,city:""}),P(n)},options:F,disabled:!C||!(null!==u&&void 0!==u&&u.address.country)&&0===F.length}),I.length>0?Object(f.jsx)(m.a,{label:"City",name:"city",value:(null===u||void 0===u||null===(a=u.address)||void 0===a?void 0:a.city)||"",onChange:U,options:I,required:!0,guide:E?"Select a state/province":"",disabled:!C}):Object(f.jsx)(b.a,{type:"text",label:"City",name:"city",value:(null===u||void 0===u||null===(n=u.address)||void 0===n?void 0:n.city)||"",placeholder:"Select state for menu or enter city",onChange:q,maxLength:"40",autoComplete:"off",disabled:!C,errMssg:x.city}),Object(f.jsx)(b.a,{type:"text",label:"Address Line 1",name:"addressLine1",value:null===u||void 0===u||null===(l=u.address)||void 0===l?void 0:l.addressLine1,onChange:U,maxLength:"200",disabled:!C}),Object(f.jsx)(b.a,{type:"text",label:"ZIP Code",name:"postalCode",value:null===u||void 0===u||null===(i=u.address)||void 0===i?void 0:i.postalCode,onChange:e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Object(g.a)(t,e.target.value)){let t={...x};delete t[e.target.name],w({inputErr:t}),X({[e.target.name]:e.target.value})}else N({...u,address:{[e.target.name]:e.target.value}}),w({...x,[e.target.name]:"Invalid format or characters"})}(e,"validateZip"),maxLength:"6",disabled:!C,errMssg:x.postalCode})]})},x=a(11),y=a.n(x),N=a(308),S=a.n(N);var w=()=>{const e=Object(s.b)(),t=t=>e(Object(v.e)(t)),{inputErr:a,requiredErr:n}=Object(s.c)((e=>e.supplier)),[l,c]=Object(o.useState)(null),{editEnabled:i}=Object(s.c)((e=>e.supplier)),d=t=>e(Object(v.b)(t)),{basicInfo:r}=Object(s.c)((e=>e.supplier)),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=e.target.max?+e.target.max:null,s=Object(g.a)(t,e.target.value,n),l=""===e.target.value;if(d({...r,[e.target.name]:e.target.value}),s){if(s||l){let t={...a};delete t[e.target.name],Object(v.e)(t)}}else Object(v.e)({...a,[e.target.name]:"Invalid characters"})},j=function(s){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var c;c=!0,e(Object(v.c)(c));const o=Object(g.a)(l,s.target.value);let i;""!==s.target.value&&(i={...n},delete i[s.target.name],(t=>{e(Object(v.f)(t))})(i)),d({...r,[s.target.name]:s.target.value}),o?(i={...a},delete i[s.target.name],t(i)):t({...a,[s.target.name]:"Invalid format or characters"})};return Object(o.useEffect)((()=>{const e=S()("1d"),t=new Date(+new Date(null===r||void 0===r?void 0:r.contractStartDate)+e);c(y()(t).format("YYYY-MM-DD"))}),[null===r||void 0===r?void 0:r.contractStartDate]),Object(f.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(f.jsx)("h3",{className:"disabled-form-section-header",children:" Tax Details"}),Object(f.jsx)(b.a,{type:"text",label:"Net Terms",name:"netTerms",value:(null===r||void 0===r?void 0:r.netTerms)||"",onChange:e=>j(e,"validateNum"),errMssg:a.netTerms,disabled:!i}),Object(f.jsx)(m.a,{label:"W-8Ben",name:"w8Bene",value:(null===r||void 0===r?void 0:r.w8Bene)||"",onChange:e=>j(e),options:[{id:"Yes",value:"Yes",name:"Yes"},{id:"No",value:"No",name:"No"},{id:"Pending",value:"Pending",name:"Pending"}],disabled:!i}),Object(f.jsx)(m.a,{label:"D-590",name:"d590",value:(null===r||void 0===r?void 0:r.d590)||"",onChange:e=>j(e),options:[{id:"Yes",value:"Yes",name:"Yes"},{id:"No",value:"No",name:"No"},{id:"Pending",value:"Pending",name:"Pending"}],disabled:!i}),Object(f.jsx)(m.a,{label:"W-9",name:"w9",value:(null===r||void 0===r?void 0:r.w9)||"",onChange:e=>j(e),options:[{id:"Yes",value:"Yes",name:"Yes"},{id:"No",value:"No",name:"No"},{id:"Pending",value:"Pending",name:"Pending"}],disabled:!i}),Object(f.jsx)(m.a,{label:"A-1099",name:"a1099",value:(null===r||void 0===r?void 0:r.a1099)||"",onChange:e=>j(e),options:[{id:"Yes",value:"Yes",name:"Yes"},{id:"No",value:"No",name:"No"},{id:"Pending",value:"Pending",name:"Pending"}],disabled:!i}),Object(f.jsx)(b.a,{type:"date",label:"Certificate Of Insurance",name:"certificateOfInsurance",onChange:e=>j(e),value:(null===r||void 0===r?void 0:r.certificateOfInsurance)||"",max:"2999-12-31",disabled:!i,errMssg:a.certificateOfInsurance}),Object(f.jsx)("h3",{className:"disabled-form-section-header",children:"Contract Details"}),Object(f.jsx)(b.a,{name:"contractStartDate",label:"Contract Start Date",id:"contractStartDate",type:"date",max:"2999-12-31",onChange:e=>u(e),value:(null===r||void 0===r?void 0:r.contractStartDate)||"",disabled:!i}),Object(f.jsx)(b.a,{name:"contractEndDate",label:"Contract End Date",id:"contractEndDate",type:"date",min:l,max:"2999-12-31",onChange:e=>u(e),value:(null===r||void 0===r?void 0:r.contractEndDate)||"",disabled:!i})]})},E=a(86);var D=()=>{const e=Object(s.b)(),{editEnabled:t,basicInfo:a}=Object(s.c)((e=>e.supplier)),{inputErr:n,requiredErr:l}=Object(s.c)((e=>e.supplier)),c=t=>e(Object(v.e)(t)),o=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var o;o=!0,e(Object(v.c)(o));const i=Object(g.a)(s,t.target.value);let d;""!==t.target.value&&(d={...l},delete d[t.target.name],(t=>{e(Object(v.f)(t))})(d)),(t=>{e(Object(v.b)(t))})({...a,[t.target.name]:t.target.value}),i?(d={...n},delete d[t.target.name],c(d)):c({...n,[t.target.name]:"Invalid format or characters"})};return Object(f.jsx)(E.a,{type:"text",label:"Comments",name:"comments",value:(null===a||void 0===a?void 0:a.comments)||"",onChange:e=>o(e),maxLength:"3000",charCount:"".concat(null!==a&&void 0!==a&&a.comments?3e3-(null===a||void 0===a?void 0:a.comments.length):3e3," of 3000"),disabled:!t})},I=a(839),P=a(91),k=a(420),L=a(219),Y=a(218),M=a(307),A=a(309),T=a(310),F=a(781),V=a(685),R=a(783),U=a(763),q=a(786),B=a(152);t.default=()=>{var e,t;const a=Object(s.b)(),b=Object(l.useParams)(),m=Object(l.useHistory)(),[j,p]=Object(o.useState)("1"),{basicInfo:g}=Object(s.c)((e=>e.supplier)),[O]=Object(o.useState)(c.a.getHeaders()),{editEnabled:h}=Object(s.c)((e=>e.supplier)),[x,y]=Object(o.useState)(!0),[N,S]=Object(o.useState)({}),{changesMade:E}=Object(s.c)((e=>e.supplier)),[X,_]=Object(o.useState)(!1),{showComments:z,showSupplier:K}=Object(s.c)((e=>e.supplier)),[W,H]=Object(o.useState)(!0),[J,Z]=Object(o.useState)(!1),[G,Q]=Object(o.useState)(!1),$=Object(o.useMemo)((()=>c.a.getUserInfo()),[]),[ee,te]=Object(o.useState)($.roles[0]);Object(o.useEffect)((()=>{c.a.hasAdminRole()&&Q(!0)}),[]);const ae=Object(o.useCallback)((()=>{a(Object(P.b)(!1)),c.a.logout()}),[a]),ne=Object(o.useCallback)((e=>a(Object(v.b)(e))),[a]),se=Object(o.useCallback)((e=>a(Object(v.h)(e))),[a]),le=Object(o.useCallback)((e=>a(Object(v.d)(e))),[a]),ce=()=>{_(!1),S({})},oe=Object(o.useCallback)((async()=>{try{const e=null===b||void 0===b?void 0:b.supplierId;if(!e)return;const t=await Object(I.c)(O,e);200===t.statusCode?(ne(t.supplierData),se(t.supplierData)):401===t.statusCode&&ae()}catch(e){console.log(e)}}),[null===b||void 0===b?void 0:b.supplierId,O,ne,se,ae]);Object(o.useEffect)((()=>{oe()}),[x,h,oe]);const ie=async e=>{e.preventDefault();const t="isLoading",a={...g};try{const e=await Object(I.f)(O,a,g.id);200===e.statusCode?(de(),y(!0),ne(e.data),se(e.data.SupplierDetalis),k.b.success({content:"Supplier updated!",messgKey:t,duration:5,style:{marginTop:"5%"}})):k.b.error({content:"An error occurred while saving changes (".concat(e.statusCode,")"),messgKey:t,duration:10})}catch(s){var n;401===(null===(n=s.response)||void 0===n?void 0:n.status)&&ae()}},de=()=>{le(!1)};Object(o.useEffect)((()=>{z&&p("1"),K&&p("2")}),[K,z]);const re=()=>{ne(),le(!1),se({})},ue=()=>{E?(_(!0),S({title:"Confirm Discard Changes",details:"All changes will be discarded, proceed?",confirmValue:"Confirm",cancelValue:"Cancel"})):le(!1)};return Object(f.jsxs)(L.a,{children:[Object(f.jsx)(Y.a,{breadcrumbs:Object(f.jsx)(n.a,{className:"header",crumbs:[{id:0,text:"Supplier",onClick:()=>(m.push("/viewsuppliers"),void de())},{id:1,text:"".concat(null===g||void 0===g?void 0:g.firstName," ").concat(null===g||void 0===g?void 0:g.lastName),lastCrumb:!0}]}),actions:Object(f.jsxs)(f.Fragment,{children:[h&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(i.a,{type:"button",handleClick:ie,className:"btn main submit marginX",children:"Save Changes"}),Object(f.jsx)(i.a,{type:"button",handleClick:ue,className:"btn main reset marginX",children:"Cancel"})]}),Object(f.jsxs)(M.a,{children:[G||ee.managerPermission||ee.candidatesPermission||ee.clientPermission||ee.interviewsPermission||ee.jobOpeningsPermission||ee.onBoardingsPermission||ee.settingsPermission||ee.suppliersPermission?Object(f.jsx)(i.a,{type:"button",handleClick:()=>{h?re():(le(!h),y(!x))},className:"btn icon marginX",title:"Edit",children:Object(f.jsx)(F.a,{})}):"",Object(f.jsx)(i.a,{type:"button",handleClick:()=>console.log("put onClick handler, but not an object"),disabled:!0,className:"btn icon marginX",title:"Share",children:Object(f.jsx)(V.a,{})}),Object(f.jsx)(i.a,{type:"button",handleClick:()=>console.log("put onClick handler, but not an object"),disabled:!0,className:"btn icon marginX",title:"Export Report",children:Object(f.jsx)(R.a,{})})]})]})}),Object(f.jsx)(B.a,{onActive:()=>{H(!0)},onIdle:()=>{H(!1)},onLogout:()=>{Z(!0)}}),Object(f.jsxs)(A.a,{children:[Object(f.jsx)(d.a,{className:"x-small",children:Object(f.jsx)(r.a,{className:"column small",onSubmit:ie,cancel:ue,formEnabled:h,children:Object(f.jsx)(C,{})})}),Object(f.jsx)(d.a,{className:"medium",children:Object(f.jsx)(T.a,{activeKey:j,setActiveKey:e=>{p(e),a(Object(v.g)(!1))},position:"left",items:[{key:"1",label:Object(f.jsxs)("span",{children:[Object(f.jsx)(U.a,{})," Details"]}),children:Object(f.jsx)(w,{})},{key:"2",label:Object(f.jsxs)("span",{children:[Object(f.jsx)(q.a,{})," Comments"]}),children:Object(f.jsx)(D,{})}]})})]}),Object(f.jsx)(u.a,{openModal:X,type:(null===(e=N.title)||void 0===e?void 0:e.toLowerCase())||"",closePopUp:ce,handleConfirmClose:null!==(t=N.title)&&void 0!==t&&t.includes("Confirm")?re:ce,confirmValue:N.confirmValue,cancelValue:N.cancelValue,message:N})]})}},839:function(e,t,a){"use strict";a.d(t,"d",(function(){return d})),a.d(t,"c",(function(){return u})),a.d(t,"f",(function(){return b})),a.d(t,"e",(function(){return v})),a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return j}));var n=a(25),s=a(13),l=a(16),c=a.n(l);const o="".concat(n.a.serverURL,"/supplier"),i=e=>{var t,a;if(!e.response)throw new Error;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&s.a.logout(),{status:null===(a=e.response)||void 0===a?void 0:a.status,err:e}},d=async function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").concat(t);return await r(e,a)},r=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const n=await c.a.get("".concat(o).concat(t).concat(a),{headers:e});let s={};return 200===n.status&&(s.tableData=(e=>e.map((e=>({...e}))))(n.data),s.totalItems=n.headers["total-elements"],s.statusCode=n.status),s}catch(l){var n;return 401===l.response.status&&s.a.logout(),{statusCode:null===(n=l.response)||void 0===n?void 0:n.status}}},u=async(e,t)=>{try{const a=await c.a.get("".concat(n.a.serverURL,"/supplier/").concat(t),{headers:e});let s={};return 200===a.status&&(s.supplierData=a.data,s.supplierDetails=a.data,s.statusCode=a.status),s}catch(s){var a;return console.log(s),{statusCode:null===(a=s.response)||void 0===a?void 0:a.status}}},b=async(e,t,a)=>{try{const s=await c.a.patch("".concat(n.a.serverURL,"/supplier/").concat(a),t,{headers:e});if(200===s.status)return{statusCode:200,data:s.data};if(401===s.status)return{statusCode:401}}catch(s){return console.log(s),{statusCode:s.response.status}}},v=async(e,t,a,n,s)=>{try{const l=n||s?n?"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a,"&").concat(n):"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a):"?pageNo=".concat(t-1,"&pageSize=-1"),i=s?await c.a.put("".concat(o).concat(l),s,{headers:e}):await c.a.get("".concat(o).concat(l),{headers:e});if(200===i.status)return{data:i.data,totalItems:i.headers["total-elements"],status:i.status}}catch(l){return i(l)}},m=async(e,t,a)=>{try{const s=await c.a.get("".concat(n.a.serverURL,"/supplier?archives=true&pageNo=").concat(t-1,"&pageSize=").concat(a),{headers:e});if(s)return{data:s.data.map((e=>{var t,a,n;return{id:e.id,cellOne:e.supplierCompanyName,cellTwo:"".concat(e.firstName," ").concat(e.lastName),cellThree:e.email,cellFour:e.phone_no,cellFive:"".concat(null===(t=e.address)||void 0===t?void 0:t.city,", ").concat(null===(a=e.address)||void 0===a?void 0:a.country,", ").concat(null===(n=e.address)||void 0===n?void 0:n.state),cellSix:e.designation,cellSeven:e.website}})),totalItems:s.headers["total-elements"]}}catch(s){console.log(s)}},j=async(e,t)=>{try{const a=await c.a.all(t.map((t=>c.a.delete("".concat(o,"/").concat(t),{headers:e}))));if(a.length)return a[0].status}catch(a){return i(a)}}}}]);