(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[34],{1075:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a(75),n=a(13),c=a(138),o=a(840),i=a(810);const l=e=>{let t=[];for(let a in e)if("string"!==typeof e[a]&&"number"!==typeof e[a]||"id"===a||""===e[a])"object"===typeof e[a]&&(t=t.concat(l(e[a])));else if("visaStatus"===a){let s=e[a].split(", ");t.push(s[0],s[1],s[2])}else t.push(e[a]);return t};a(814);var u=a(1);const d=[{id:1,value:"H1B",name:"H1B"},{id:2,value:"L1",name:"L1"},{id:3,value:"O1",name:"O1"},{id:4,value:"E1",name:"E1"},{id:5,value:"E3",name:"E3"},{id:5,value:"CITIZEN",name:"Citizen"},{id:6,value:"GREEN CARD",name:"Green Card"}];var v=a(805),p=a(22),h=a(762),b=a(306),f=a(219),m=a(218),y=a(804),O=a(798),g=a(11),j=a.n(g),C=a(308),w=a.n(C),S=a(16),D=a.n(S),k=a(25),x=a(95),E=a(66),N=a(27),A=a(35),I=a(126),R=a(420),T=a(63),B=a(112),F=a(152);var z=e=>{const t={worker:"",workerId:"",visaStatus:"",visaType:"",visaStartDate:"",visaExpiryDate:"",visaAppliedDate:"",visaCountryCode:"",visaCountry:"",countryOfBirth:"",visaCountryOfResidence:"",entryDateOfF1:"",workerOptions:[],workAuthStatusDict:[],passportNumber:"",visaNumber:"",isDeleted:!1},[a,r]=Object(s.useState)(t),[o,i]=Object(s.useState)([]),[l,d]=Object(s.useState)(!1),[v,p]=Object(s.useState)([]),[h,b]=Object(s.useState)(""),[f]=Object(s.useState)(n.a.getHeaders()),[m,y]=Object(s.useState)({}),[O,g]=Object(s.useState)(null),{worker:C}=a,[S,z]=Object(s.useState)([]),[P,L]=Object(s.useState)(!0),[M,V]=Object(s.useState)(!1),H=Object(s.useRef)(null),[U,q]=Object(s.useState)(Date.now()),W=Object(s.useCallback)((async()=>{const e={};return e.workAuth=await Object(T.e)("workAuthStatus",f),e}),[f]);Object(s.useEffect)((()=>{let e=!1;return(async()=>{try{const t=await W();Object.keys(t).length&&(e||z(t.workAuth))}catch(t){e||console.log(t)}})(),()=>e=!0}),[W]);Object(s.useEffect)((()=>{p(c.c())}),[]),Object(s.useEffect)((()=>{const e=w()("1d"),t=new Date(+new Date(a.visaStartDate)+e);g(j()(t).format("YYYY-MM-DD"))}),[a.visaStartDate]);const Y=function(e){var t;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===(t=e.preventDefault)||void 0===t||t.call(e);const n=e.target.max?+e.target.max:null,c=Object(x.a)(s,e.target.value,n),o=""===e.target.value;if(r({...a,[e.target.name]:e.target.value}),"visaType"===e.target.name?(J(e),"Citizen"!==e.target.value&&"Not Applicable"!==e.target.value||(d(!0),J(e),"Citizen"!==e.target.value&&"Not Applicable"!==e.target.value||setTimeout((function(){document.getElementById("visaStatus").value="NOT APPLICABLE"}),300))):d(!1),"opt"===e.target.value||"cpt"===e.target.value||"stem opt"===e.target.value?(d(!0),J(e),"opt"!==e.target.value&&"cpt"!==e.target.value&&"stem opt"!==e.target.value||setTimeout((function(){document.getElementById("entryDateOfF1")}),300)):d(!1),c){if(c||o){let t={...m};delete t[e.target.name],y({inputErr:t})}}else y({...m,[e.target.name]:"Invalid format or characters"})},X=e=>{const t=e.target.selectedOptions[0].index?v[e.target.selectedOptions[0].index-1]:{};r({...a,[e.target.name]:t.name,countryCode:t.code})},G=Object(s.useCallback)((()=>{D.a.get("".concat(k.a.serverURL,"/worker?dropdownFilter=true"),{headers:f}).then((e=>{e.data&&i(e.data)})).catch((e=>console.log(e)))}),[f]);Object(s.useEffect)((()=>{G()}),[G]);const J=e=>{const t=e.target.value,a=e.target.value,s=e.target.value;b(t),b(a),b(s)},_=()=>{r(t),q(Date.now()),e.setOpen(!1)};return Object(u.jsxs)(I.a,{header:{text:"Add New Visa"},open:e.open,close:()=>{_(),e.setOpen(!1)},children:[Object(u.jsx)(F.a,{onActive:()=>{L(!0)},onIdle:()=>{L(!1)},onLogout:()=>{V(!0)}}),Object(u.jsxs)(E.a,{formEnabled:!0,onSubmit:s=>{s.preventDefault();var c=document.getElementById("visaStatus").value;const o="Citizen"===a.visaType||"Not Applicable"===a.visaType,i=o?{visaStartDate:"",visaExpiryDate:"",visaAppliedDate:"",usEntryDate:""}:{visaStartDate:a.visaStartDate,visaExpiryDate:a.visaExpiryDate,visaAppliedDate:a.visaAppliedDate,usEntryDate:a.usEntryDate},l=o?"NOT APPLICABLE":""===a.visaStatus?c:a.visaStatus,u={worker:""===a.worker?null:{id:a.worker},visaCountry:a.visaCountry,visaCountryOfResidence:a.visaCountryOfResidence,visaType:a.visaType,visaStatus:l,...i,countryOfBirth:a.countryOfBirth,passportNumber:a.passportNumber,visaNumber:a.visaNumber,isDeleted:!1};D.a.post("".concat(k.a.serverURL,"/visatracking"),u,{headers:f}).then((s=>{if(201===s.status&&(r(t),r((e=>({...e,visaType:""}))),R.b.success("Visa record created successfully"),e.setOpen(!1),e.refresh(),null!=s.data&&a.file)){let e=s.data.id,t=a.file,r=new FormData;r.append("file",t),D.a.post("".concat(k.a.serverURL,"/visatracking/").concat(e,"/resume"),r,{headers:f}).then((e=>{console.log(e.status)})).catch((e=>{console.log(e),e.response&&401===e.response.status&&n.a.logout()}))}_()})).catch((e=>{console.error(e)}))},cancel:_,children:[Object(u.jsx)(A.a,{label:"Worker",name:"workerId","data-testid":"worker-options",onChange:e=>{e.preventDefault(),r({...a,worker:e.target.value})},value:C,options:o.map((e=>({id:e.id,name:"".concat(e.firstName," ").concat(e.lastName)}))),required:!0}),Object(u.jsx)(A.a,{label:"Country Of Birth",name:"countryOfBirth",value:a.countryOfBirth,onChange:X,placeholder:"Country of Birth..",options:v,required:!0}),Object(u.jsx)(A.a,{label:"Country Of Residence",name:"visaCountryOfResidence",id:"visaCountryOfResidence",onChange:X,value:a.visaCountryOfResidence,placeholder:"Country Of Residence...",options:v,required:!0}),Object(u.jsx)(A.a,{label:"Country Of Citizenship",name:"visaCountry",value:a.visaCountry,onChange:X,placeholder:"Country...",options:v,required:!0}),Object(u.jsx)(B.a,{label:"Type",options:S.map((e=>({id:e.id,value:e.value,label:e.value,selected:a.visaType===e.value}))),handleChange:e=>function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=e.filter((e=>e.selected)).map((e=>e.value)).join(",");let r=t;"workAuthStatus"===t&&(r="visaType"),"basicInfo"===a&&Y({target:{name:r,value:s||""}}),e.filter((e=>!e.id&&!e.isDeleted)).forEach((e=>{Object(T.h)(t,e.value,f).then((e=>{"workAuthStatus"===t&&z([...S,e])})).catch((e=>console.log(e)))})),e.filter((e=>e.isDeleted)).forEach((e=>{Object(T.a)(e.id,f).catch((e=>console.log(e)))}));const n=e.filter((e=>!e.isDeleted));"workAuthStatus"===t&&z(n)}(e,"workAuthStatus","basicInfo"),creatable:!0,placeholder:"please select",required:!0,deletable:n.a.hasAdminRole()||n.a.hasBDManagerRole()}),("opt"===h||"cpt"===h||"stem opt"===h)&&Object(u.jsx)(N.a,{name:"entryDateOfF1",label:" EntryDateOfF1",type:"date",id:"entryDateOfF1",max:"2999-12-31",onChange:e=>Y(e),value:a.entryDateOfF1,errMssg:m.entryDateOfF1}),("opt"===h||"cpt"===h||"stem opt"===h)&&Object(u.jsx)(N.a,{name:"usEntryDate",label:" US ENTRY DATE",type:"date",id:"usEntryDate",max:"2999-12-31",onChange:e=>Y(e),value:a.usEntryDate,errMssg:m.usEntryDate}),Object(u.jsx)(A.a,{name:"visaStatus",label:" Status",id:"visaStatus",onChange:e=>{Y(e),J(e)},value:a.visaStatus,options:[{id:1,value:"ACTIVE",name:"Active",disabled:l},{id:2,value:"APPLIED",name:"Applied",disabled:l},{id:3,value:"EXPIRED",name:"Expired",disabled:l},{id:4,value:"NOT APPLICABLE",name:"Not Applicable",disabled:!l}]}),("ACTIVE"===h||"EXPIRED"===h)&&Object(u.jsx)("div",{className:"visatrackingcol",id:"visaStartDateDiv",children:Object(u.jsx)(N.a,{name:"visaStartDate",label:" Start Date",type:"date",id:"visaStartDate",max:"2999-12-31",onChange:e=>Y(e),value:a.visaStartDate,errMssg:m.visaStartDate})}),("ACTIVE"===h||"EXPIRED"===h)&&Object(u.jsx)("div",{className:"visatrackingcol",children:Object(u.jsx)(N.a,{name:"visaExpiryDate",label:" Expiry Date",type:"date",min:O,id:"visaExpiryDate",max:"2999-12-31",onChange:e=>Y(e),value:a.visaExpiryDate,errMssg:m.visaExpiryDate})}),"APPLIED"===h&&Object(u.jsx)("div",{className:"visatrackingcol",children:Object(u.jsx)(N.a,{name:"visaAppliedDate",label:" Applied Date",type:"date",id:"visaAppliedDate",onChange:e=>Y(e),value:a.visaAppliedDate})}),Object(u.jsx)(N.a,{name:"passportNumber",label:"Passport NUmber",type:"text",id:"passportNumber",onChange:e=>Y(e,"validateHasAlpha"),value:a.passportNumber,required:!0,errMssg:m.passportNumber}),Object(u.jsx)(N.a,{name:"visaNumber",label:"Visa NUmber",type:"text",id:"visaNumber",onChange:e=>Y(e),value:a.visaNumber,required:!0}),Object(u.jsx)("div",{style:{fontSize:"12px",display:"flex"},children:Object(u.jsx)(N.a,{type:"file",label:"Attach Document","data-testid":"file",name:"file",ref:H,onChange:e=>{e.target.files&&e.target.files.length>0?e.target.files[0].size>1048576?(r((e=>({...e,inputErr:{...e.inputErr,file:"File is too big. Please select a file with size < 1MB"},file:null}))),H.current.value=null):r((t=>({...t,file:e.target.files[0],inputErr:{...t.inputErr,file:void 0}}))):r((e=>({...e,file:null})))},errMssg:m.file})})]},U)]},_?"reset":"no-reset")},P=a(801);const L=Object(s.forwardRef)(((e,t)=>{let{open:a,setOpen:r,...c}=e;const i=Object(s.useMemo)((()=>n.a.getHeaders()),[]),[l,d]=Object(s.useState)(1),[v,p]=Object(s.useState)(0),[h,b]=Object(s.useState)([]),f=Object(s.useCallback)((async()=>{const e=await Object(o.d)(i,l,10);e&&(b(e.data),p(e.totalItems))}),[l,i]);return Object(s.useEffect)((()=>{f()}),[l,i,f]),Object(s.useImperativeHandle)(t,(()=>({loadArchive(){f()},length:h.length}))),Object(u.jsx)(P.a,{openArchive:a,setOpenArchive:r,loadArchive:f,archive:h,archivedData:"visatracking",headers:["Worker","Country Of Birth","Country Of Citizenship","Country Of Residence","Visa Type","Visa Status"],totalItems:v,setArchiveCurrentPage:d,archiveCurrentPage:l})}));a(158);var M=a(808);t.default=()=>{var e;const t=Object(r.useHistory)(),a=Object(s.useRef)(null),[g,j]=Object(s.useState)([]),[C,w]=Object(s.useState)(0),[S,D]=Object(s.useState)(10),[k,x]=Object(s.useState)(1),[E,N]=Object(s.useState)([]),[A,I]=Object(s.useState)([]),[T,B]=Object(s.useState)(!1),[P,V]=Object(s.useState)(!1),[H,U]=Object(s.useState)({}),[q]=Object(s.useState)(n.a.getHeaders()),[W,Y]=Object(s.useState)(!1),[X,G]=Object(s.useState)({}),[J,_]=Object(s.useState)([]),[K,Z]=Object(s.useState)(!1),[Q,$]=Object(s.useState)(!1),[ee,te]=Object(s.useState)([]),[ae,se]=Object(s.useState)([]),[re,ne]=Object(s.useState)(!0),[ce,oe]=Object(s.useState)(!1),ie=Object(s.useMemo)((()=>n.a.getUserInfo()),[]),[le,ue]=Object(s.useState)(ie.roles[0]),[de,ve]=Object(s.useState)(!1);Object(s.useEffect)((()=>{n.a.hasAdminRole()&&ve(!0)}),[]),Object(s.useEffect)((()=>{n.a.isAdminOrOperations()&&Z(!0)}),[]);const pe=Object(s.useCallback)((e=>t.push("/visatracking/".concat(e))),[t]),he=Object(s.useCallback)((async()=>{const e=await Object(i.f)(q);e.tableData.length&&te(e.tableData.map((e=>({text:"".concat(e.firstName," ").concat(e.lastName),value:e.id}))))}),[q]);Object(s.useEffect)((()=>he()),[he]),Object(s.useEffect)((()=>{const e=Object(c.c)();se(e.map((e=>({text:e.name,value:e.name}))))}),[]);const be=Object(s.useMemo)((()=>[{title:"Worker",dataIndex:"worker",key:"worker.firstName",fixed:"left",filters:ee,sorter:!0,width:170,render:(e,t)=>Object(u.jsx)(O.a,{label:"".concat(e.firstName," ").concat(e.lastName),onClick:()=>pe(t.id)})},{title:"Status",dataIndex:"visaStatus",key:"visaStatus",sorter:!0,width:120,render:e=>Object(u.jsx)("span",{className:"table-record-status ".concat(e&&"v_".concat(e.toLowerCase())),children:e})},{title:"Type",dataIndex:"visaType",key:"visaType",sorter:!0,filters:d.map((e=>({text:e.name,value:e.value}))),width:140},{title:"Applied In",dataIndex:"visaAppliedDate",key:"visaAppliedDate",width:120},{title:"Active From",dataIndex:"visaStartDate",key:"visaStartDate",width:120},{title:"Expires On",dataIndex:"visaExpiryDate",key:"visaExpiryDate",width:120},{title:"Citizen Of",dataIndex:"visaCountry",key:"visaCountry",filters:ae,filterSearch:!0,width:120},{title:"Resides In",dataIndex:"visaCountryOfResidence",key:"visaCountryOfResidence",width:120},{title:"Birth Country",dataIndex:"countryOfBirth",key:"countryOfBirth",width:120},{title:"EntryDateOfF1",dataIndex:"entryDateOfF1",key:"entryDateOfF1",width:120},{title:"US Entry Date",dataIndex:"usEntryDate",key:"usEntryDate",width:120},{title:"Passport Number",dataIndex:"passportNumber",key:"passportNumber",width:120},{title:"Visa Number",dataIndex:"visaNumber",key:"visaNumber",width:120}]),[pe,ee,ae]);Object(s.useEffect)((()=>{N(be)}),[be]);const fe=Object(s.useCallback)((async()=>{const e="pageNo=".concat(k,"&pageSize=-1");if(Object.keys(H).length){let e="";for(const s in X)s&&(e+="&orderBy=".concat(s,"&orderMode=").concat(X[s]));const t=Object.keys(H).length?H:null;B(!0);const a=await Object(o.c)(q,k,S,e||"&orderBy=id&orderMode=desc",t);if(a&&B(!1),200===a.status){const e=a.data.map((e=>{var t;return{...e,key:e.id,resume:null===(t=e.worker)||void 0===t?void 0:t.resume}}));j(e),w(a.totalItems)}200!==a.status&&R.b.error("Something's gone wrong, refresh page or contact your system admin")}else{let t="?".concat(e);for(const e in X)e&&(t+="&orderBy=".concat(e,"&orderMode=").concat(X[e]));const a=await Object(o.f)(q,t);if(a&&B(!1),200===a.statusCode){const e=a.tableData.map((e=>{var t;return{...e,key:e.id,resume:null===(t=e.worker)||void 0===t?void 0:t.resume}}));j(e),w(a.totalItems)}200!==a.statusCode&&R.b.error("Something's gone wrong, refresh page or contact your system admin")}}),[q,k,S,X,H]);Object(s.useEffect)((()=>{fe()}),[fe,H,null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e.length]);const me=Object(s.useCallback)((e=>U({...H,search:e})),[H]);Object(s.useEffect)((()=>{g.length&&_((e=>{let t=[];for(let a of e)l(a).forEach((e=>{t.includes(e)||t.push(e)}));return t})(g))}),[g]);const ye={onChange:(e,t)=>{K||de||le.workerPermission?I(e):I([])},selectedRowKeys:A};return Object(u.jsxs)(f.a,{children:[Object(u.jsx)(F.a,{onActive:()=>{ne(!0)},onIdle:()=>{ne(!1)},onLogout:()=>{oe(!0)}}),Object(u.jsx)(m.a,{breadcrumbs:Object(u.jsx)(b.a,{className:"header",crumbs:[{id:0,text:"Workers",onClick:()=>{t.push("/viewworkers")}},{id:1,text:"All Visa Details",lastCrumb:!0}]}),actions:K&&(de||le.workerPermission?Object(u.jsxs)(p.a,{type:"button",className:"btn main",handleClick:()=>$(!0),children:[Object(u.jsx)(h.a,{className:"icon"}),"Add Visa Details"]}):"")}),Object(u.jsx)(y.a,{loading:T,data:g.map((e=>({...e,key:e.id}))),columns:E,setColumns:N,defaultColumns:be,rowSelection:!(!de&&!le.workerPermission)&&ye,total:C,setCurrentPage:x,setPageSize:D,setSort:G,setFilters:U,filters:H,searchOptions:J,searchList:g,handleSearch:me,openArchive:()=>V(!0),openReports:()=>Y(!0),handleConfirmArchive:async()=>{(await Object(o.a)(q,A)).status.filter((e=>200!==e)).length?R.b.error("Something's gone wrong, refresh page or contact your system admin"):(fe(),R.b.success("Visa record(s) archived successfully!"),a.current.loadArchive(),I([]))},handleCancelArchiving:()=>{I([])},removeableColumns:be.filter((e=>"Worker"!==e.title&&e.title)).map((e=>e.title))}),Object(u.jsx)(v.a,{showReportModal:W,setShowReportModal:Y,individualReportName:"visatracking",individualList:g,list:g.map((e=>({id:e.id,name:"".concat(e.worker.firstName," ").concat(e.worker.lastName)}))),listLabel:"Visatrackings",filename:"visatracking_report",tableFields:[{label:"Type",value:"visaType",key:"visaType"},{label:"Status",value:"visaStatus",key:"visaStatus"},{label:"Applied On",value:"visaAppliedDate",key:"visaAppliedDate"},{label:"Start Date",value:"visaStartDate",key:"visaStartDate"},{label:"Expiry On",value:"visaExpiryDate",key:"visaExpiryDate"},{label:"Citizen Of",value:"visaCountry",key:"visaCountry"},{label:"Birth Country",value:"countryOfBirth",key:"countryOfBirth"},{label:"Resides In",value:"visaCountryOfResidence",key:"visaCountryOfResidence"}],pdfFormatter:M.a.visatrackingPdfFormat,csvExcelFormatter:M.a.visatrackingCSVExcel}),Object(u.jsx)(L,{open:P,setOpen:V,ref:a}),Object(u.jsx)(z,{open:Q,setOpen:$,refresh:fe})]})}},798:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a(800);var s=a(1);const r=e=>Object(s.jsxs)("div",{className:"tablelink-container",children:[Object(s.jsx)("span",{onClick:e.onClick,className:"tablelink ".concat(e.styleRed&&"red"," ").concat(e.className&&e.className),children:e.label}),e.extra&&Object(s.jsx)("span",{className:"table-link-extra",children:e.extra})]})},810:function(e,t,a){"use strict";a.d(t,"g",(function(){return l})),a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"f",(function(){return p})),a.d(t,"i",(function(){return h})),a.d(t,"a",(function(){return b})),a.d(t,"c",(function(){return f})),a.d(t,"b",(function(){return m})),a.d(t,"h",(function(){return y}));var s=a(25),r=a(13),n=a(16),c=a.n(n);const o="".concat(s.a.serverURL,"/worker"),i=e=>{var t,a;if(!e.response)throw new Error;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&r.a.logout(),{status:null===(a=e.response)||void 0===a?void 0:a.status,err:e}},l=async function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{const n=s||r?s?"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a,"&").concat(s):"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a):"?pageNo=".concat(t-1,"&pageSize=-1"),i=r?await c.a.put("".concat(o).concat(n),r,{headers:e}):await c.a.get("".concat(o).concat(n),{headers:e});if(200===i.status)return{data:i.data,totalItems:i.headers["total-elements"],status:i.status}}catch(n){return i(n)}},u=async(e,t)=>{try{const a=await c.a.get("".concat(s.a.serverURL,"/worker/").concat(t),{headers:e});let r={};return 200===a.status&&(r.workerData=a.data,r.workerProjectDetails=a.data,r.statusCode=a.status),r}catch(r){var a;return console.log(r),{statusCode:null===(a=r.response)||void 0===a?void 0:a.status}}},d=async function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").concat(t);return await v(e,a)},v=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const s=await c.a.get("".concat(o).concat(t).concat(a),{headers:e});let r={};return 200===s.status&&(r.tableData=(e=>e.map((e=>({...e}))))(s.data),r.totalItems=s.headers["total-elements"],r.statusCode=s.status),r}catch(n){var s;return 401===n.response.status&&r.a.logout(),{statusCode:null===(s=n.response)||void 0===s?void 0:s.status}}},p=async e=>{try{const t=await c.a.get("".concat(s.a.serverURL,"/worker?dropdownFilter=true"),{headers:e});let a={};return 200===t.status&&(a.tableData=t.data,a.totalItems=t.headers["total-elements"],a.statusCode=t.status),a}catch(a){var t;return console.log(a),{statusCode:null===(t=a.response)||void 0===t?void 0:t.status}}},h=async(e,t,a)=>{try{const r=await c.a.patch("".concat(s.a.serverURL,"/worker/").concat(a),t,{headers:e});if(200===r.status)return{statusCode:200,data:r.data};if(401===r.status)return{statusCode:401}}catch(r){return console.log(r),{statusCode:r.response.status}}},b=async(e,t)=>{try{const a=await c.a.all(t.map((t=>c.a.delete("".concat(o,"/").concat(t),{headers:e}))));if(a)return{status:a[0].status}}catch(a){return i(a)}},f=async(e,t,a)=>{try{const s=await c.a.get("".concat(o,"?archives=true&pageNo=").concat(t-1,"&pageSize=").concat(a),{headers:e});if(s)return{data:s.data.map((e=>{var t;return{id:e.id,cellOne:"".concat(e.firstName," ").concat(e.lastName),cellTwo:e.email,cellThree:e.phoneNumber,cellFour:null===e||void 0===e?void 0:e.status,cellFive:null===e||void 0===e?void 0:e.subContractorCompanyName,cellSix:null===(t=e.client)||void 0===t?void 0:t.clientName}})),totalItems:s.headers["total-elements"]}}catch(s){return i(s)}},m=async(e,t)=>{const a="/".concat(t,"/resume");try{return await c.a.delete("".concat(o).concat(a),{headers:e})}catch(n){var s;return 401===n.response.status&&r.a.logout(),{statusCode:null===(s=n.response)||void 0===s?void 0:s.status}}},y=async(e,t,a)=>{const s="/".concat(t,"/resume");try{return await c.a.post("".concat(o).concat(s),a,{headers:e})}catch(i){var n;return 401===i.response.status&&r.a.logout(),{statusCode:null===(n=i.response)||void 0===n?void 0:n.status}}}},814:function(e,t,a){"use strict";var s=a(2),r=a(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M296 250c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 144H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 458H208V148h560v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm440-88H728v-36.6c46.3-13.8 80-56.6 80-107.4 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 50.7 33.7 93.6 80 107.4V764H520c-8.8 0-16 7.2-16 16v152c0 8.8 7.2 16 16 16h352c8.8 0 16-7.2 16-16V780c0-8.8-7.2-16-16-16zM646 620c0-27.6 22.4-50 50-50s50 22.4 50 50-22.4 50-50 50-50-22.4-50-50zm180 266H566v-60h260v60z"}}]},name:"audit",theme:"outlined"},c=a(24),o=function(e,t){return r.createElement(c.a,Object(s.a)({},e,{ref:t,icon:n}))};t.a=r.forwardRef(o)},840:function(e,t,a){"use strict";a.d(t,"f",(function(){return l})),a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return v})),a.d(t,"d",(function(){return p})),a.d(t,"e",(function(){return h})),a.d(t,"h",(function(){return b})),a.d(t,"b",(function(){return f})),a.d(t,"g",(function(){return m}));var s=a(25),r=a(13),n=a(16),c=a.n(n);const o="".concat(s.a.serverURL,"/visatracking"),i=e=>{var t,a;if(!e.response)throw new Error;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&r.a.logout(),{status:null===(a=e.response)||void 0===a?void 0:a.status,err:e}},l=async function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").concat(t);return await u(e,a)},u=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const s=await c.a.get("".concat(o).concat(t).concat(a),{headers:e});let r={};return 200===s.status&&(r.tableData=(e=>e.map((e=>({...e}))))(s.data),r.totalItems=s.headers["total-elements"],r.statusCode=s.status),r}catch(n){var s;return 401===n.response.status&&r.a.logout(),{statusCode:null===(s=n.response)||void 0===s?void 0:s.status}}},d=async(e,t,a,s,r)=>{try{const n=s||r?s?"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a,"&").concat(s):"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a):"?pageNo=".concat(t-1,"&pageSize=-1"),i=r?await c.a.put("".concat(o).concat(n),r,{headers:e}):await c.a.get("".concat(o).concat(n),{headers:e});if(200===i.status)return{data:i.data,totalItems:i.headers["total-elements"],status:i.status}}catch(n){return i(n)}},v=async(e,t)=>{try{const a=await c.a.all(t.map((t=>c.a.delete("".concat(o,"/").concat(t),{headers:e}))));if(a)return{status:a.map((e=>e.status))}}catch(a){return i(a)}},p=async(e,t,a)=>{try{const s=await c.a.get("".concat(o,"?archives=true&pageNo=").concat(t-1,"&pageSize=").concat(a),{headers:e});if(s)return{data:s.data.map((e=>{var t,a;return{id:e.id,cellOne:"".concat(null===(t=e.worker)||void 0===t?void 0:t.firstName," ").concat(null===(a=e.worker)||void 0===a?void 0:a.lastName),cellTwo:e.countryOfBirth,cellThree:e.visaCountry,cellFour:e.visaCountryOfResidence,cellFive:e.visaType,cellSix:e.visaStatus}})),totalItems:s.headers["total-elements"]}}catch(s){return i(s)}},h=async(e,t)=>{try{const a=await c.a.get("".concat(o,"/").concat(t),{headers:e});let s={};return 200===a.status&&(s.visaData=a.data,s.statusCode=a.status),s}catch(s){var a;return console.log(s),{statusCode:null===(a=s.response)||void 0===a?void 0:a.status}}},b=async(e,t,a)=>{try{const s=await c.a.patch("".concat(o,"/").concat(a),t,{headers:e});if(console.log("Update Visa Response:",s),200===s.status)return{statusCode:200,data:s.data};if(401===s.status)return{statusCode:401}}catch(s){return console.error("Update Visa Error:",s),{statusCode:s.response.status}}},f=async(e,t)=>{const a="/".concat(t,"/resume");try{return await c.a.delete("".concat(o).concat(a),{headers:e})}catch(n){var s;return 401===n.response.status&&r.a.logout(),{statusCode:null===(s=n.response)||void 0===s?void 0:s.status}}},m=async(e,t,a)=>{const s="/".concat(t,"/resume");try{return await c.a.post("".concat(o).concat(s),a,{headers:e})}catch(i){var n;return 401===i.response.status&&r.a.logout(),{statusCode:null===(n=i.response)||void 0===n?void 0:n.status}}}}}]);