(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[25],{1054:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(75),i=a(28),s=a(137),d=a(86),r=a(112),l=a(319),o=a(13),u=a(812),j=a(816),b=a(152),h=a(1);t.default=()=>{var e;const t=Object(c.useHistory)(),a=Object(i.b)(),{navMenuOpen:m}=Object(i.c)((e=>e.nav)),{subjects:v,areas:O,clients:f,editEnabled:x}=Object(i.c)((e=>e.iGuide)),{guide:g}=Object(i.c)((e=>e.iGuide)),[p]=Object(n.useState)(o.a.getHeaders()),[y,w]=Object(n.useState)(),[S,C]=Object(n.useState)([]),[N,I]=Object(n.useState)(!1),[k,E]=Object(n.useState)(!0),[A,T]=Object(n.useState)(!0),[q,G]=Object(n.useState)(!1),M=Object(n.useCallback)((e=>a(Object(l.d)(e))),[a]),F=Object(n.useCallback)((()=>{z(),t.push("/viewguides")}),[t]);Object(n.useEffect)((()=>{null!==g&&void 0!==g&&g.id&&w(g.subject.id)}),[g]),Object(n.useEffect)((()=>{const e=O.filter((e=>{var t;return+(null===(t=e.subject)||void 0===t?void 0:t.id)===+y}));C(e)}),[O,y]);const P=e=>{const{name:t,value:n}=e.target;let c={...g,[t]:n};c="questions"===t?{...g,[t]:n}:{...g,[t]:{id:n}},"subject"===t&&(c={...c,area:null},w(n)),I("subject"===t),a(Object(l.e)(c))},Q=()=>{M(!1)},D=async(e,t)=>{(async(e,t)=>{try{const a=e.find((e=>!e.id));if(!a)return{};let n={name:a.value};return n="subject"===t?{...n}:{...n,subject:{id:y}},await Object(u.i)(p,t,n)}catch{return{}}})(e,t).then((n=>{var c;const i=n.id?[...e.filter((e=>e.id)),{...n,selected:!0}]:e.filter((e=>e.id));if("subject"===t&&n.id){const e=[...v,n];a(Object(l.g)(e))}if("area"===t&&n.id){const e=[...O,n];a(Object(l.b)(e))}const s={name:t,value:null===(c=i.filter((e=>null===e||void 0===e?void 0:e.selected))[0])||void 0===c?void 0:c.id};P({target:s})})).catch((e=>console.log(e)))},z=()=>{M(!1)};return Object(h.jsxs)("div",{className:m?"page-container":"page-container full-width",children:[Object(h.jsx)("div",{className:"page-actions-container",children:Object(j.d)({closeForm:F,auth:o.a,toggleForm:()=>{x?Q():(M(!x),T(!A))},handleSubmit:()=>{const e={...g,user:{id:o.a.getUserId()}};null!==g&&void 0!==g&&g.id?Object(u.j)(p,e).then((()=>F())).catch((e=>console.log(e))):Object(u.h)(p,e).then((()=>F())).catch((e=>console.log(e))),a(Object(l.e)({})),w()},editEnabled:x})}),Object(h.jsxs)(s.a,{className:"guide-modify-container",children:[Object(h.jsx)(b.a,{onActive:()=>{E(!0)},onIdle:()=>{E(!1)},onLogout:()=>{G(!0)}}),Object(h.jsxs)("div",{className:"long-form-subsection",children:[Object(h.jsx)(r.a,{className:"medium",label:"Subject",options:v.map((e=>({id:e.id,value:e.name,selected:+y===+e.id}))),handleChange:e=>D(e,"subject"),placeholder:"Select...",creatable:!0,disabled:!x}),Object(h.jsx)(r.a,{label:"Area of focus",options:S.map((e=>{var t;return{id:e.id,value:e.name,selected:+e.id===+(null===g||void 0===g||null===(t=g.area)||void 0===t?void 0:t.id)}})),handleChange:e=>D(e,"area"),placeholder:"Select...",creatable:!0,reset:N,disabled:!x}),Object(h.jsx)(r.a,{label:"Client",options:f.map((e=>{var t;return{id:e.id,value:e.clientName,selected:+e.id===+(null===g||void 0===g||null===(t=g.client)||void 0===t?void 0:t.id)}})),handleChange:e=>D(e,"client"),placeholder:"Select...",disabled:!x})]}),Object(h.jsx)(d.a,{className:"guide-textarea",label:"Questions",name:"questions",value:g.questions||"",onChange:P,charCount:"".concat(g.questions?3e3-g.questions.length:3e3," of 3000"),maxLength:"3000",rows:10,placeholder:null!==(e=g.area)&&void 0!==e&&e.id?"":"Please select all required fields before submitting a guide",required:!0,disabled:!x})]})]})}},798:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(800);var n=a(1);const c=e=>Object(n.jsxs)("div",{className:"tablelink-container",children:[Object(n.jsx)("span",{onClick:e.onClick,className:"tablelink ".concat(e.styleRed&&"red"," ").concat(e.className&&e.className),children:e.label}),e.extra&&Object(n.jsx)("span",{className:"table-link-extra",children:e.extra})]})},800:function(e,t,a){},812:function(e,t,a){"use strict";a.d(t,"g",(function(){return o})),a.d(t,"b",(function(){return u})),a.d(t,"i",(function(){return j})),a.d(t,"f",(function(){return b})),a.d(t,"c",(function(){return h})),a.d(t,"h",(function(){return m})),a.d(t,"j",(function(){return v})),a.d(t,"a",(function(){return O})),a.d(t,"d",(function(){return f})),a.d(t,"e",(function(){return x}));var n=a(16),c=a.n(n),i=a(25),s=a(13);const d="".concat(i.a.serverURL,"/guides"),r=e=>({...e,Accept:"application/json","Content-Type":"application/json"}),l=async(e,t,a)=>{try{return await c.a.get("".concat(d).concat(t).concat(a),{headers:e})}catch(i){var n;return 401===i.response.status&&s.a.logout(),{statusCode:null===(n=i.response)||void 0===n?void 0:n.status}}},o=async e=>{const t=await fetch("".concat(d,"/subjects"),{method:"GET",headers:r(e)});return await t.json()},u=async e=>{const t=await fetch("".concat(d,"/areas"),{method:"GET",headers:r(e)});return await t.json()},j=async(e,t,a)=>{const n=await fetch("".concat(d,"/").concat(t,"s"),{method:"POST",headers:r(e),body:JSON.stringify(a)});return await n.json()},b=async(e,t,a,n)=>{const c="?page=".concat(a-1||0,"&size=").concat(n||i.a.ITEMS_PER_PAGE),s=null!==t&&void 0!==t&&t.subject?"&subjectName=".concat(t.subject):"",d=null!==t&&void 0!==t&&t.search?"&search=".concat(t.search):"",r="".concat(c).concat(s).concat(d),o=await l(e,"/latest",r),u={};return 200===o.status&&(u.data=o.data.content,u.totalItems=o.data.totalElements,u.statusCode=o.status),u},h=async(e,t,a,n,i,s)=>{const r="?page=".concat(n-1||0,"&size=").concat(i||10),l="&subjectId=".concat(t,"&areaId=").concat(a),o=null!==s&&void 0!==s&&s.search?"&search=".concat(s.search):"",u="".concat(r).concat(l).concat(o);try{const t=await c.a.put("".concat(d).concat(u),{},{headers:e});return{data:t.data,totalItems:t.headers["total-elements"]}}catch(j){console.log("Error: ".concat(j))}},m=async(e,t)=>{const a=await fetch("".concat(d),{method:"POST",headers:r(e),body:JSON.stringify(t)});return await a.json()},v=async(e,t)=>{var a;const n={subject:{id:t.subject.id},area:{id:t.area.id},client:{id:(null===t||void 0===t||null===(a=t.client)||void 0===a?void 0:a.id)||null},user:{id:t.user.id},questions:t.questions},c=await fetch("".concat(d,"/").concat(t.id),{method:"PUT",headers:r(e),body:JSON.stringify(n)});return await c.json()},O=async(e,t)=>{try{return await c.a.all(t.map((t=>c.a.delete("".concat(d,"/").concat(t),{headers:e}))))}catch(n){var a;return 401===n.response.status&&s.a.logout(),{statusCode:null===(a=n.response)||void 0===a?void 0:a.status,err:n}}},f=async(e,t,a)=>{try{let c={};const i="?pageNo=".concat(t-1,"&pageSize=").concat(a),s="/deleted",d=await l(e,s,i);var n;if(200===d.status)c.tableData=null===(n=d.data.content)||void 0===n?void 0:n.map((e=>{var t,a,n;return{id:e.id,cellOne:null===e||void 0===e||null===(t=e.subject)||void 0===t?void 0:t.name,cellTwo:null===e||void 0===e||null===(a=e.area)||void 0===a?void 0:a.name,cellThree:null===e||void 0===e||null===(n=e.client)||void 0===n?void 0:n.clientName}})),c.totalItems=d.data.totalElements,c.statusCode=d.status;return c}catch(i){var c;return 401===i.response.status&&s.a.logout(),{statusCode:null===(c=i.response)||void 0===c?void 0:c.status,err:i}}},x=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.a.ITEMS_PER_PAGE;const c=Object.entries(t).map((e=>{let[t,a]=e;return"".concat(t,"Name=").concat(a)})).join("&"),s="?page=".concat(a-1||0,"&size=").concat(n),d="".concat(s,"&").concat(c),r=await l(e,"/filter",d),o={};return 200===r.status&&(o.data=r.data.content,o.totalItems=r.data.totalElements,o.statusCode=r.status),o}},816:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"e",(function(){return v})),a.d(t,"f",(function(){return O})),a.d(t,"b",(function(){return x})),a.d(t,"c",(function(){return g})),a.d(t,"g",(function(){return p})),a.d(t,"h",(function(){return y})),a.d(t,"d",(function(){return w}));var n=a(22),c=a(306),i=a(321),s=a(783),d=a(762),r=a(685),l=a(781),o=a(50),u=a(798),j=a(218),b=a(307),h=a(1);const m=["Subject","Area","Client"],v=e=>{const{openForm:t,toggleShareModal:a}=e;return Object(h.jsxs)("div",{className:"page-actions-container",children:[Object(h.jsx)("h1",{className:"page-header",children:"Interview Questions Guide"}),Object(h.jsxs)("div",{className:"flex-row",children:[Object(h.jsxs)(n.a,{type:"button",className:"btn main margin-right",handleClick:t,children:[Object(h.jsx)(d.a,{style:{fontSize:"12px",marginRight:"5px"}}),"Add Questions"]}),Object(h.jsx)(i.a,{btns:[{handleClick:a,title:"Share",child:Object(h.jsx)(r.a,{})},{handleClick:()=>console.log("click report"),title:"Export report",child:Object(h.jsx)(s.a,{}),disabled:!0}]})]})]})},O=e=>{const{closeForm:t,guide:a}=e;return Object(h.jsx)(c.a,{className:"header",crumbs:[{id:0,text:"Interview Question Guide",onClick:()=>t()},{id:1,text:"Add New Quide",lastCrumb:!0}]})},f={fontWeight:"600",fontSize:"12px",textTransform:"uppercase"},x=e=>[{title:Object(h.jsx)("div",{style:f,children:"Subject"}),dataIndex:"subject",key:"subject",render:(e,t)=>t.subject.name,filters:null===e||void 0===e?void 0:e.map((e=>({text:e.name,value:e.name}))),filterSearch:!0},{title:Object(h.jsx)("div",{style:f,children:"Area of focus"}),dataIndex:"area",key:"area",render:(e,t)=>t.area.name},{title:Object(h.jsx)("div",{style:f,children:"Modified by"}),dataIndex:"user",key:"user",width:150,render:(e,t)=>Object(o.j)(t.user)},{title:Object(h.jsx)("div",{style:f,children:"Modified on"}),dataIndex:"date",key:"date",width:120,render:(e,t)=>{var a=t.updatedAt.split("/")||t.createdAt.split("/");return new Date(+a[2],a[1]-1,+a[0]).toLocaleDateString()}}],g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return[{title:Object(h.jsx)("div",{style:f,children:"Subject"}),dataIndex:"subject",render:(t,a)=>Object(h.jsx)(u.a,{label:t.name,onClick:()=>e?e(a.id):{}})},{title:Object(h.jsx)("div",{style:f,children:"Area of focus"}),dataIndex:"area",render:e=>e.name},{title:Object(h.jsx)("div",{style:f,children:"Client"}),dataIndex:"client",render:e=>null===e||void 0===e?void 0:e.clientName},{title:Object(h.jsx)("div",{style:f,children:"Modified by"}),dataIndex:"user",render:e=>Object(o.j)(e),width:150},{title:Object(h.jsx)("div",{style:f,children:"Modified on"}),dataIndex:"modifiedOn",key:"date",render:(e,t)=>new Date(t.updatedAt||t.createdAt).toLocaleDateString(),width:120}]},p=[{title:"Subject",dataIndex:"subject",render:e=>Object(h.jsx)("div",{children:e.name})},{title:"Area of focus",dataIndex:"area",render:e=>Object(h.jsx)("div",{children:e.name})},{title:"Client",dataIndex:"client",render:e=>Object(h.jsx)("div",{children:e.clientName})},{title:"Questions",dataIndex:"questions",render:e=>e&&e.length>35?Object(h.jsx)("span",{title:e,children:e.slice(0,35)+"..."}):e,width:280},{title:Object(h.jsx)("div",{children:"Modified on"}),dataIndex:"modifiedOn",key:"date",render:(e,t)=>new Date(t.updatedAt||t.createdAt).toLocaleDateString(),width:105}],y=e=>[{id:1,name:"Subject",options:e.Subject.map((e=>({id:e.id,name:e.name})))},{id:2,name:"Client",options:e.Clients.map((e=>({id:e.id,name:e.clientName})))}],w=e=>{const{closeForm:t,auth:a,toggleForm:i,handleSubmit:s,editEnabled:d}=e;return Object(h.jsx)(j.a,{breadcrumbs:Object(h.jsx)(c.a,{className:"header",crumbs:[{id:0,text:"Interview Question Guide",onClick:()=>t()},{id:1,text:"Edit Quide",lastCrumb:!0}]}),actions:Object(h.jsxs)(h.Fragment,{children:[d&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(n.a,{type:"button",handleClick:s,className:"btn main submit marginX",children:"Save Changes"}),Object(h.jsx)(n.a,{type:"button",handleClick:t,className:"btn main reset marginX",children:"Cancel"})]}),Object(h.jsx)(b.a,{children:Object(h.jsx)(n.a,{type:"button",handleClick:i,className:"btn icon marginX",title:"Edit",children:Object(h.jsx)(l.a,{})})})]})})}}}]);