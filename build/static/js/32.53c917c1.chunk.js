(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[32],{1050:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return q}));var a=s(0),i=s.n(a),n=s(16),r=s.n(n),l=s(106),d=s(25),c=s(13),o=s(95),h=s(137),u=s(66),p=s(802),m=s(27),b=s(35),g=s(306),C=s(96),v=(s(976),s(138)),j=s(220),x=s(219),y=s(218),S=s(86),f=s(152),O=s(63),P=s(112),N=s(1);class q extends a.Component{constructor(e){var t;super(e),t=this,this.initialState={firstName:"",lastName:"",email:"",phone_no:"",designation:"",netTerms:"",supplierCompanyName:"",w8Bene:"",d590:"",w9:"",a1099:"",certificateOfInsurance:"",contractStartDate:"",contractEndDate:"",website:"",comments:"",status:"",addressLine1:"",addressLine2:"",addressLine3:"",city:"",state:"",country:"",postalCode:"",inputErr:"",countryList:[],stateList:[],headers:c.a.getHeaders(),relExpBool:!1,isDuplicate:!1,currentPage:"Basic Information",basicRequiredPercent:0,basicRequiredFields:{firstName:!1,lastName:!1,email:!1,designation:!1,supplierCompanyName:!1},detailsRequiredPercent:0,detailsRequiredFields:{certificateOfInsurance:!1},addressRequiredPercent:0,addressRequiredFields:{country:!1,city:!1,addressLine1:!1,postalCode:!1},currentPercent:0,showModal:!1,invalidMssg:"",submitError:"",openPopUp:!1,designationDict:[],supplierDict:[]},this.resetSupplier=()=>{this.setState((()=>this.initialState))},this.showModal=()=>{this.setState({show:!this.state.show})},this.togglePopUp=()=>{this.setState({openPopUp:!this.state.openPopUp})},this.submitSupplier=e=>{e.preventDefault();const t={firstName:this.state.firstName,lastName:this.state.lastName,phone_no:this.state.phone_no,email:this.state.email,supplierCompanyName:this.state.supplierCompanyName,designation:this.state.designation,website:this.state.website,status:this.state.status,netTerms:this.state.netTerms,w8Bene:this.state.w8Bene,d590:this.state.d590,w9:this.state.w9,a1099:this.state.a1099,certificateOfInsurance:this.state.certificateOfInsurance,contractStartDate:this.state.contractStartDate,contractEndDate:this.state.contractEndDate,comments:this.state.comments,isDeleted:!1,address:{city:this.state.city,country:this.state.country,state:this.state.state,postalCode:this.state.postalCode,addressLine1:this.state.addressLine1,addressLine2:this.state.addressLine2,addressLine3:this.state.addressLine3,countryCode:this.state.countryCode,stateCode:this.state.stateCode}};let s=JSON.parse(sessionStorage.getItem("headers"));r.a.post("".concat(d.a.serverURL,"/supplier"),t,{headers:s}).then((()=>{this.resetSupplier(),this.setState({openPopUp:!0})})).catch((e=>{console.log(e),this.setState({submitError:e.res.data,openPopUp:!0}),e.res&&401===e.res.status&&c.a.logout()}))},this.supplierChange=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{value:a,max:i,name:n}=e.target,r=""===a,l=Object(o.a)(s,a,i);if(t.setState({[n]:a}),l){let e={...t.state.inputErr};delete e[n],t.setState({inputErr:e})}else t.setState({inputErr:{...t.state.inputErr,[n]:"Invalid format or characters"}});if(100!==t.state.basicRequiredPercent||100!==t.state.detailsRequiredPercent||100!==t.state.addressRequiredPercent){const e=["firstName","lastName","supplierCompanyName","email","designation"].includes(n)?"basic":["certificateOfInsurance"].includes(n)?"details":["country","city","addressLine1","postalCode"].includes(n)?"address":"";e&&t.checkRequiredFields(n,!r,e)}},this.multiSelectChange=(e,t)=>{const s=e.filter((e=>e.selected)).map((e=>e.value)).join(",");const a={target:{name:t,value:s||""}};this.supplierChange(a),e.filter((e=>!e.id&&!e.isDeleted&&e.value)).forEach((e=>{Object(O.h)(t,e.value,this.state.headers).then((e=>{const s={id:e.id,value:e.value,selected:!0,isDeleted:e.isDeleted};console.log(s),"designation"===t&&this.setState({designationDict:[...this.state.designationDict,s]}),"supplierCompanyName"===t&&this.setState({supplierDict:[...this.state.supplierDict,s]})})).catch((e=>console.log(e)))})),e.filter((e=>e.isDeleted)).forEach((e=>{Object(O.a)(e.id,this.state.headers).catch((e=>console.log(e)))}));const i=e.filter((e=>!e.isDeleted&&e.id));"designation"===t&&this.setState({designationDict:i}),"supplierCompanyName"===t&&this.setState({supplierDict:i})},this.checkRequiredFields=(e,t,s)=>{switch(s){case"basic":this.setState({basicRequiredFields:{...this.state.basicRequiredFields,[e]:t}});break;case"details":this.setState({detailsRequiredFields:{...this.state.detailsRequiredFields,[e]:t}});break;case"address":this.setState({addressRequiredFields:{...this.state.addressRequiredFields,[e]:t}})}},this.handlePhoneChange=e=>{this.setState({phone_no:e})},this.setCurrentPage=e=>{this.setState({currentPage:e.title})},this.countryChange=e=>{const t=e.target.selectedOptions[0].index,s=t?this.state.countryList[e.target.selectedOptions[0].index-1]:{};if(t){const e=v.a(s.code);this.setState({country:s.name,countryCode:s.code,stateList:v.d(s.code),stateCode:"",citiesList:e,city:"",disableCities:(null===e||void 0===e?void 0:e.length)>100}),this.checkRequiredFields("country",!0,"address")}else this.setState({stateList:[],citiesList:[],country:"",countryCode:"",state:"",stateCode:"",city:"",disableCities:!1,mandatory:{...this.state.mandatory,address:!1}}),this.checkRequiredFields("country",!1,"address")},this.stateChange=e=>{var t;const s=e.target.selectedOptions[0].index,a=s?this.state.stateList[e.target.selectedOptions[0].index-1]:{};let i=[];var n;s?(i=v.a(this.state.countryCode,a.code),this.setState({disableCities:(null===(n=i)||void 0===n?void 0:n.length)>100&&!(null!==a&&void 0!==a&&a.code)})):(i=v.a(this.state.countryCode),this.setState({disableCities:!1}));this.setState({[e.target.name]:a.name,stateCode:(null===a||void 0===a?void 0:a.code)||"",citiesList:i,city:"",disableCities:(null===(t=i)||void 0===t?void 0:t.length)>100&&!(null!==a&&void 0!==a&&a.code)}),s&&this.setState({disableCities:!1})},this.cityChange=e=>{this.setState({[e.target.name]:e.target.value}),""!==e.target.value?this.checkRequiredFields("city",!0,"address"):this.checkRequiredFields("city",!1,"address")},this.closeForm=()=>{this.props.history.push("/viewsuppliers")},this.state={...this.initialState},this.supplierChange=this.supplierChange.bind(this),this.submitSupplier=this.submitSupplier.bind(this),this.handleNext=this.handleNext.bind(this),this.handleReset=this.handleReset.bind(this),this.docRef=i.a.createRef(null)}async componentDidMount(){const e=c.a.getHeaders(),t=await Object(O.e)("designation",e),s=await Object(O.e)("supplierCompanyName",e);this.setState({countryList:v.c(),designationDict:t,supplierDict:s,setIsActive:!0,setLogout:!1})}componentDidUpdate(e,t){if((this.state.contractStartDate!==t.contractStartDate||this.state.contractEndDate!==t.contractEndDate)&&this.state.contractEndDate)if(this.state.contractStartDate>=this.state.contractEndDate)this.setState({inputErr:{...this.state.inputErr,contractEndDate:"End date can't be before start date"}});else{let e={...this.state.inputErr};delete e.contractEndDate,this.setState({inputErr:e})}if(this.state.currentPage!==t.currentPage&&("Basic Information"===this.state.currentPage&&this.setState({currentPercent:this.state.basicRequiredPercent}),"Details"===this.state.currentPage&&this.setState({currentPercent:this.state.detailsRequiredPercent}),"Address"===this.state.currentPage&&this.setState({currentPercent:this.state.addressRequiredPercent}),"Comments"===this.state.currentPage&&this.setState({currentPercent:0})),this.state.basicRequiredFields!==t.basicRequiredFields){let e=0;for(let t in this.state.basicRequiredFields)this.state.basicRequiredFields[t]&&(e+=20);this.setState({currentPercent:e}),Object.values(this.state.basicRequiredFields).includes(!1)||this.setState({basicRequiredPercent:100})}if(this.state.detailsRequiredFields!==t.detailsRequiredFields){let e=0;for(let t in this.state.detailsRequiredFields)this.state.detailsRequiredFields[t]&&(e+=100);this.setState({currentPercent:e}),Object.values(this.state.detailsRequiredFields).includes(!1)||this.setState({detailsRequiredPercent:100})}if(this.state.addressRequiredFields!==t.addressRequiredFields){let e=0;for(let t in this.state.addressRequiredFields)this.state.addressRequiredFields[t]&&(e+=25);this.setState({currentPercent:e}),Object.values(this.state.addressRequiredFields).includes(!1)||this.setState({addressRequiredPercent:100})}}handleNext(e){e.preventDefault(),this.state.firstName&&!this.state.lastName&&this.setState({next:this.state.lastName})}handleReset(){this.setState({next:null,lastName:""})}render(){var e;return Object(N.jsxs)(x.a,{children:[Object(N.jsx)(f.a,{onActive:()=>{this.setState({setIsActive:!0})},onIdle:()=>{this.setState({setIsActive:!1})},onLogout:()=>{this.setState({setLogout:!0})}}),Object(N.jsx)(y.a,{breadcrumbs:Object(N.jsx)(g.a,{className:"header",crumbs:[{id:0,text:"Suppliers",onClick:()=>this.closeForm()},{id:1,text:"Add Supplier",lastCrumb:!0}]})}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(p.a,{steps:[{title:"Basic Information",hasRequiredFields:!0,subTitle:Object(N.jsx)("span",{style:{fontSize:"20px",marginBottom:"8px",color:"var(--secondary)"},children:"*"})},{title:"Details",hasRequiredFields:!0,subTitle:Object(N.jsx)("span",{style:{fontSize:"20px",marginBottom:"8px",color:"var(--secondary)"},children:"*"})},{title:"Address",hasRequiredFields:!0,subTitle:Object(N.jsx)("span",{style:{fontSize:"20px",marginBottom:"8px",color:"var(--secondary)"},children:"*"})},{title:"Comments"}],canSubmit:this.state.basicRequiredPercent>=100&&this.state.detailsRequiredPercent>=100&&this.state.addressRequiredPercent>=100,submit:this.submitSupplier,reset:this.resetSupplier,setCurrentPage:this.setCurrentPage,percent:this.state.currentPercent,error:Object.keys(this.state.inputErr).length,children:Object(N.jsxs)(u.a,{children:["Basic Information"===this.state.currentPage&&Object(N.jsxs)(a.Fragment,{children:[Object(N.jsx)(P.a,{label:"Supplier",options:this.state.supplierDict.map((e=>({id:e.id,value:e.value,label:e.value}))),handleChange:e=>this.multiSelectChange(e,"supplierCompanyName"),required:!0,deletable:c.a.hasAdminRole(),creatable:!0}),Object(N.jsx)(m.a,{type:"text",label:"First Name",name:"firstName",value:this.state.firstName,onChange:e=>this.supplierChange(e,"validateName"),maxLength:"20",errMssg:this.state.inputErr.firstName,required:!0}),Object(N.jsx)(m.a,{type:"text",label:"Last Name",name:"lastName",value:this.state.lastName,onChange:e=>this.supplierChange(e,"validateName"),maxLength:"20",errMssg:this.state.inputErr.lastName,required:!0}),Object(N.jsx)(P.a,{label:"Title",options:this.state.designationDict.map((e=>({id:e.id,value:e.value,label:e.value}))),handleChange:e=>this.multiSelectChange(e,"designation"),required:!0,deletable:c.a.hasAdminRole(),creatable:!0}),Object(N.jsx)(j.a,{phoneNumber:this.state.phone_no,handleChange:this.handlePhoneChange,label:"Phone Num.",setError:this.setPhoneNumError}),Object(N.jsx)(m.a,{type:"email",label:"E-mail",name:"email",value:this.state.email,onChange:e=>this.supplierChange(e,"validateEmail"),required:!0,errMssg:this.state.inputErr.email}),Object(N.jsx)(m.a,{type:"text",label:"Website",name:"website",value:this.state.website,onChange:e=>this.supplierChange(e,"validateURL"),errMssg:this.state.inputErr.website}),Object(N.jsx)(b.a,{name:"status",label:"Status",type:"status",id:"status",onChange:e=>this.supplierChange(e),value:this.state.status,options:[{id:1,value:"ACTIVE",name:"Active"},{id:2,value:"INACTIVE",name:"Inactive"}]})]}),this.state.currentPage.includes("Details")&&Object(N.jsxs)(a.Fragment,{children:[Object(N.jsx)(m.a,{type:"text",label:"Net Terms",name:"netTerms",value:this.state.netTerms,onChange:e=>this.supplierChange(e,"validateNum"),errMssg:this.state.inputErr.netTerms}),Object(N.jsx)(b.a,{label:"W-8Ben",name:"w8Bene",value:this.state.w8Bene,onChange:e=>this.supplierChange(e),options:[{id:"Yes",value:"Yes",name:"Yes"},{id:"No",value:"No",name:"No"},{id:"Pending",value:"Pending",name:"Pending"}]}),Object(N.jsx)(b.a,{label:"D-590",name:"d590",value:this.state.d590,onChange:e=>this.supplierChange(e),options:[{id:"Yes",value:"Yes",name:"Yes"},{id:"No",value:"No",name:"No"},{id:"Pending",value:"Pending",name:"Pending"}]}),Object(N.jsx)(b.a,{label:"W-9",name:"w9",value:this.state.w9,onChange:e=>this.supplierChange(e),options:[{id:"Yes",value:"Yes",name:"Yes"},{id:"No",value:"No",name:"No"},{id:"Pending",value:"Pending",name:"Pending"}]}),Object(N.jsx)(b.a,{label:"A-1099",name:"a1099",value:this.state.a1099,onChange:e=>this.supplierChange(e),options:[{id:"Yes",value:"Yes",name:"Yes"},{id:"No",value:"No",name:"No"},{id:"Pending",value:"Pending",name:"Pending"}]}),Object(N.jsx)(m.a,{type:"date",label:"Certificate Of Insurance",name:"certificateOfInsurance",onChange:e=>this.supplierChange(e),value:this.state.certificateOfInsurance,max:"2999-12-31",errMssg:this.state.inputErr.certificateOfInsurance,required:!0}),Object(N.jsx)(m.a,{name:"contractStartDate",label:"Contract Start Date",id:"contractStartDate",type:"date",max:"2999-12-31",onChange:e=>this.supplierChange(e),value:this.state.contractStartDate,errMssg:this.state.inputErr.contractStartDate}),Object(N.jsx)(m.a,{name:"contractEndDate",label:"Contract End Date",id:"contractEndDate",type:"date",max:"2999-12-31",onChange:e=>this.supplierChange(e),value:this.state.contractEndDate,errMssg:this.state.inputErr.contractEndDate})]}),this.state.currentPage.includes("Address")&&Object(N.jsxs)(a.Fragment,{children:[Object(N.jsx)(b.a,{label:"Country",name:"country",value:this.state.country,onChange:this.countryChange,placeholder:"Select Country",options:this.state.countryList,required:!0}),Object(N.jsx)(b.a,{label:"State / Province",name:"state",id:"state",value:this.state.state,onChange:this.stateChange,options:this.state.stateList,required:this.state.stateList.length>0}),null!==(e=this.state.citiesList)&&void 0!==e&&e.length&&!this.state.disableCities?Object(N.jsx)(b.a,{label:"City",name:"city",value:this.state.city,onChange:this.cityChange,options:this.state.citiesList,required:!0,placeholder:this.state.disableCities?"Select State/Province first":"",disabled:this.state.disableCities}):Object(N.jsx)(m.a,{type:"text",label:"City",name:"city",value:this.state.city,placeholder:"Enter city",onChange:e=>this.supplierChange(e,"validateName"),maxLength:"40",required:!0,errMssg:this.state.inputErr.city}),Object(N.jsx)(m.a,{type:"text",label:"Address Line 1",name:"addressLine1",value:this.state.addressLine1,onChange:e=>this.supplierChange(e,"validateName"),maxLength:"200",required:!0}),Object(N.jsx)(m.a,{type:"text",label:"Address Line 2",name:"addressLine2",maxLength:"200",value:this.state.addressLine2,onChange:e=>this.supplierChange(e,"validateName")}),Object(N.jsx)(m.a,{type:"text",label:"Address Line 3",name:"addressLine3",maxLength:"200",value:this.state.addressLine3,onChange:e=>this.supplierChange(e,"validateName")}),Object(N.jsx)(m.a,{type:"text",label:"ZIP Code",name:"postalCode",value:this.state.postalCode,onChange:e=>this.supplierChange(e,"validateZip"),required:!0,maxLength:"6",errMssg:this.state.inputErr.postalCode})]}),"Comments"===this.state.currentPage&&Object(N.jsx)(S.a,{label:"Comments",name:"comments",value:this.state.comments,onChange:this.supplierChange,charCount:"".concat(this.state.comments?3e3-this.state.comments.length:3e3," of 3000"),maxLength:"3000"})]})}),Object(N.jsx)(C.a,{openModal:this.state.openPopUp,closePopUp:this.togglePopUp,handleConfirmClose:this.togglePopUp,type:this.state.submitError?"Warning":"Success",message:{title:this.state.submitError?"Error":"Supplier Added Succesfully",details:this.state.submitError?"Error while saving record ".concat(this.state.submitError):"To view supplier go to "},link:this.state.submitError?"":Object(N.jsx)(l.b,{to:"/viewsuppliers",children:"Suppliers"})})]})]})}}},802:function(e,t,s){"use strict";var a=s(0),i=s(1066),n=s(22),r=s(1042),l=s(677),d=(s(803),s(158),s(1));t.a=e=>{var t,s,c;const[o,h]=Object(a.useState)(0),u=null===(t=e.steps)||void 0===t?void 0:t.map((e=>({title:e.title,subTitle:e.subTitle&&e.subTitle,icon:e.icon&&e.icon,status:e.status&&e.status})));Object(a.useEffect)((()=>{h(e.index||0)}),[e.index]);return Object(d.jsxs)("div",{className:"form-nav-container",children:[Object(d.jsx)(i.a,{className:"form-nav-steps",current:o,percent:e.percent,onChange:e.clickable?t=>{h(t),e.setCurrentPage(e.steps[t])}:null,type:e.type&&"navigation"===e.type?"navigation":"",items:u}),Object(d.jsx)("div",{className:"steps-content-container",children:e.children}),Object(d.jsxs)("div",{className:"steps-action",children:[!e.hideNavBtns&&Object(d.jsxs)(n.a,{type:"button",name:"form-nav-back-btn",className:"icon-btn icon-text no-border",handleClick:()=>(h(o-1),void e.setCurrentPage(e.steps[o-1])),disabled:0===o,children:[Object(d.jsx)(r.a,{}),"Previous"]}),e.canSubmit&&!e.hideFormBtns&&Object(d.jsx)(n.a,{type:"reset",name:"form-reset-btn",className:"btn main reset",handleClick:()=>{e.reset(),h(0)},children:"Cancel"}),e.canSubmit&&!e.hideFormBtns&&Object(d.jsx)(n.a,{type:"submit",name:"form-submit-btn",className:"btn main submit",disabled:e.submitError,handleClick:t=>(t=>{e.submit(t),h(0)})(t),children:"Submit"}),!e.hideFormBtns&&Object(d.jsxs)(n.a,{type:"button",name:"form-nav-next-btn",className:"icon-btn icon-text no-border",handleClick:()=>(h(o+1),void e.setCurrentPage(e.steps[o+1])),disabled:e.error||(null===(s=e.steps[o])||void 0===s?void 0:s.hasRequiredFields)&&e.percent<100||o>=(null===(c=e.steps)||void 0===c?void 0:c.length)-1,children:["Next",Object(d.jsx)(l.a,{})]})]})]})}},803:function(e,t,s){},976:function(e,t,s){}}]);