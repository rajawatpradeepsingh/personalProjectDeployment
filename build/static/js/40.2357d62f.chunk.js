(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[40],{1077:function(e,t,s){"use strict";s.r(t);var c=s(0),a=s(28),l=s(75),n=s(16),i=s.n(n),r=s(25),d=s(13),o=s(221),b=s(91),j=s(345);var h=s(808),u=s(805),O=s(22),p=s(801),m=s(1);const x=e=>{let{open:t,setOpen:s,...a}=e;const l=Object(c.useMemo)((()=>d.a.getHeaders()),[]),[n,i]=Object(c.useState)(1),[r,b]=Object(c.useState)(0),[j,h]=Object(c.useState)([]),u=Object(c.useCallback)((async()=>{const e=await Object(o.b)(l,n,10);e&&(h(e.tableData),b(e.totalItems))}),[n,l]);return Object(c.useEffect)((()=>{u()}),[n,l,u,t]),Object(m.jsx)(p.a,{openArchive:t,setOpenArchive:s,loadArchive:u,archive:j,archivedData:"clients",headers:["Client","Phone No.","Website","Location"],totalItems:r,setArchiveCurrentPage:i,archiveCurrentPage:n})};var v=s(804),y=s(798),f=s(342);const k=e=>{let{record:t,...s}=e;const c=null===t||void 0===t?void 0:t.preVmsFees.split(","),a=null===t||void 0===t?void 0:t.preUser.split(","),l=null===t||void 0===t?void 0:t.preDate.split(",");return Object(m.jsxs)(f.a,{title:"VMS Fee History",content:Object(m.jsxs)("table",{style:{width:"100%"},children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"VMS Fee(%)"}),Object(m.jsx)("th",{children:"Updated By"}),Object(m.jsx)("th",{children:"Updated On"})]})}),Object(m.jsx)("tbody",{children:c.map(((e,t)=>Object(m.jsxs)("tr",{children:[Object(m.jsxs)("td",{children:[e,"%"]}),Object(m.jsx)("td",{children:a[t]}),Object(m.jsx)("td",{children:l[t]})]},t)))})]}),children:[s.children,"%"]})},C=e=>{let{record:t,...s}=e;const c=null===t||void 0===t?void 0:t.preAdminFees.split(","),a=null===t||void 0===t?void 0:t.preAdminUser.split(","),l=null===t||void 0===t?void 0:t.preAdminDate.split(",");return Object(m.jsxs)(f.a,{title:"Admin Fee History",content:Object(m.jsxs)("table",{style:{width:"100%"},children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Admin Fee(%)"}),Object(m.jsx)("th",{children:"Updated By"}),Object(m.jsx)("th",{children:"Updated On"})]})}),Object(m.jsx)("tbody",{children:c.map(((e,t)=>Object(m.jsxs)("tr",{children:[Object(m.jsxs)("td",{children:[e,"%"]}),Object(m.jsx)("td",{children:a[t]}),Object(m.jsx)("td",{children:l[t]})]},t)))})]}),children:[s.children,"%"]})},F=e=>{let{record:t,...s}=e;const c=null===t||void 0===t?void 0:t.preRebateFees.split(","),a=null===t||void 0===t?void 0:t.preRebateUser.split(","),l=null===t||void 0===t?void 0:t.preRebateDate.split(",");return Object(m.jsxs)(f.a,{title:"Rebate Fee History",content:Object(m.jsxs)("table",{style:{width:"100%"},children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Rebate Fee(%)"}),Object(m.jsx)("th",{children:"Updated By"}),Object(m.jsx)("th",{children:"Updated On"})]})}),Object(m.jsx)("tbody",{children:c.map(((e,t)=>Object(m.jsxs)("tr",{children:[Object(m.jsxs)("td",{children:[e,"%"]}),Object(m.jsx)("td",{children:a[t]}),Object(m.jsx)("td",{children:l[t]})]},t)))})]}),children:[s.children,"%"]})};var S=s(219),N=s(218),w=s(420),g=s(762),A=s(152);s(158),s(821);t.default=()=>{const e=Object(a.b)(),t=Object(l.useHistory)(),s=Object(c.useMemo)((()=>d.a.getHeaders()),[]),{clientOptions:n}=Object(a.c)((e=>e.filters)),[p,f]=Object(c.useState)([]),[R,L]=Object(c.useState)(0),[I,E]=Object(c.useState)({}),[M,P]=Object(c.useState)(!1),[U,D]=Object(c.useState)(!1),[V,H]=Object(c.useState)({}),[B,W]=Object(c.useState)([]),[z,J]=Object(c.useState)(!1),[_,K]=Object(c.useState)(!0),[Z,q]=Object(c.useState)([]),[G,Q]=Object(c.useState)([]),[T,X]=Object(c.useState)(1),[Y,$]=Object(c.useState)(10),[ee,te]=Object(c.useState)(!0),[se,ce]=Object(c.useState)(!1),ae=Object(c.useCallback)((()=>{e(Object(b.b)(!1)),d.a.logout()}),[e]),le=Object(c.useMemo)((()=>d.a.getUserInfo()),[]),[ne,ie]=Object(c.useState)(le.roles[0]),[re,de]=Object(c.useState)(!1),[oe,be]=Object(c.useState)(!1);console.log(ne),Object(c.useEffect)((()=>{d.a.hasAdminRole()&&de(!0)}),[]),Object(c.useEffect)((()=>{d.a.hasRecruiterRole()&&J(!0)}),[]);const je=Object(c.useCallback)((e=>{t.push("/clients/".concat(e))}),[t]),he=Object(c.useMemo)((()=>[{title:"Client",dataIndex:"clientName",key:"clientName",sorter:!0,filters:n.map((e=>({text:"".concat(e.clientName," (").concat(e.city,")"),value:e.id}))),fixed:"left",width:170,render:(e,t)=>Object(m.jsx)(y.a,{onClick:()=>je(t.id),label:e})},{title:"Website",dataIndex:"website",key:"website",render:e=>Object(m.jsx)(y.a,{label:e,className:"small ellipses",onClick:()=>window.open("".concat(e),"_blank")})},{title:"Phone No.",dataIndex:"phoneNumber",key:"phoneNumber"},{title:"VMS Fee (%)",dataIndex:"vmsFees",key:"vmsFees",render:(e,t)=>t.preVmsFees?Object(m.jsx)("div",{className:"fees",children:Object(m.jsx)(k,{record:t,children:Number(e).toFixed(2)})}):Object(m.jsx)("div",{className:"fees",children:Object(m.jsxs)("span",{children:[e,"%"]})})},{title:"Admin Fee (%)",dataIndex:"adminFees",key:"adminFees",render:(e,t)=>t.preAdminFees?Object(m.jsx)("div",{className:"fees",children:Object(m.jsx)(C,{record:t,children:Number(e).toFixed(2)})}):Object(m.jsx)("div",{className:"fees",children:Object(m.jsxs)("span",{children:[e,"%"]})})},{title:"Rebate Fee (%)",dataIndex:"rebateFees",key:"rebateFees",render:(e,t)=>t.preRebateFees?Object(m.jsx)("div",{className:"fees",children:Object(m.jsx)(F,{record:t,children:Number(e).toFixed(2)})}):Object(m.jsx)("div",{className:"fees",children:Object(m.jsxs)("span",{children:[e,"%"]})})},{title:"Location",dataIndex:"city",key:"address.city",render:(e,t)=>Object(m.jsxs)("span",{children:[e,", ",t.address.state,", ",t.address.country]}),sorter:!0},{title:"Zip Code",dataIndex:"postalCode",key:"postalCode"}]),[n,je]);Object(c.useEffect)((()=>{q(he)}),[he,n]);const ue=Object(c.useCallback)((async()=>{const e="pageNo=".concat(T-1,"&pageSize=-1");if(!Object.keys(I).length){let t="?".concat(e);for(const e in V)e&&(t+="&orderBy=".concat(e,"&orderMode=").concat(V[e]));return await o.d(s,t)}{const e=Object.keys(V)[0]?Object.keys(V)[0]:"",t=e?V[e]:"",c=await o.e(s,T,Y,I,e||"id",t||"desc");200===c.statusCode&&(f(c.data),L(c.totalItems),K(!1))}}),[s,T,Y,V,I]);Object(c.useEffect)((()=>{let e=!1;return ue().then((e=>{200===e.statusCode&&(f(e.tableData),L(e.totalItems))})).catch((t=>{e||console.log(t)})).finally((()=>K(!1))),()=>e=!0}),[ue,M]);const Oe=Object(c.useCallback)((e=>{E({...I,search:e})}),[I]),pe=Object(c.useCallback)((e=>{let t=[];for(let s in e)"string"!==typeof e[s]&&"number"!==typeof e[s]||"id"===s||""===e[s]?"object"===typeof e[s]&&(t=t.concat(pe(e[s]))):t.push(e[s]);return t}),[]);Object(c.useEffect)((()=>{if(p){let e=[];for(let t of p){pe(t).forEach((t=>{e.includes(t)||e.push(t)}))}W(e)}}),[p,I,pe]);const me={onChange:(e,t)=>{Q(z?[]:e)},selectedRowKeys:G},xe=Object(c.useCallback)((async()=>{try{const t=await o.a(s);t.tableData&&e(Object(j.b)(t.tableData))}catch(t){console.log(t)}}),[s,e]);return Object(c.useEffect)((()=>xe()),[xe]),Object(m.jsxs)(S.a,{children:[Object(m.jsx)(N.a,{title:"Clients",actions:!z&&(re||ne.clientPermission?Object(m.jsxs)(O.a,{type:"button",className:"btn main margin-left",handleClick:()=>{t.push("/addclient")},children:[Object(m.jsx)(g.a,{className:"icon"}),"Add Client"]}):"")}),Object(m.jsx)(A.a,{onActive:()=>{te(!0)},onIdle:()=>{te(!1)},onLogout:()=>{ce(!0)}}),Object(m.jsx)(v.a,{loading:_,data:p.map((e=>({...e,key:e.id}))),columns:Z,setColumns:q,defaultColumns:he,rowSelection:!(z||!re&&!ne.managerPermission)&&me,total:R,setCurrentPage:X,setPageSize:$,setSort:H,setFilters:E,filters:I,searchOptions:B,searchList:p,handleSearch:Oe,openArchive:()=>P(!0),openReports:()=>D(!0),handleConfirmArchive:async()=>{try{if(await i.a.all(G.map((e=>i.a.delete("".concat(r.a.serverURL,"/clients/").concat(e),{headers:s}))))){const e=await ue();e&&(f(e.tableData),L(e.totalItems),w.b.success("Clients archived successfully!"),Q([]))}}catch(t){var e;w.b.error("Error ".concat(null===(e=t.response)||void 0===e?void 0:e.status)),t.response&&401===t.response.status&&ae()}},handleCancelArchiving:()=>{Q([])},removeableColumns:he.filter((e=>"Client"!==e.title&&e.title)).map((e=>e.title))}),Object(m.jsx)(u.a,{showReportModal:U,setShowReportModal:D,individualReportName:"clients",individualList:p,list:p.map((e=>({id:e.id,name:e.clientName}))),listLabel:"Clients",filename:"client_report",tableFields:[{label:"Phone number",value:"phoneNumber",key:"phoneNumber"},{label:"Website",value:"website",key:"website"},{label:"VMS Fee (%)",value:"vmsFees",key:"vmsFees"},{label:"Admin Fee (%)",value:"adminFees",key:"adminFees"},{label:"Rebate Fee (%)",value:"rebateFees",key:"rebateFees"},{label:"Address Line 1",value:"addressLine1",key:"addressLine1"},{label:"Address Line 2",value:"addressLine2",key:"addressLine2"},{label:"Address Line 3",value:"addressLine3",key:"addressLine3"},{label:"City",value:"city",key:"city"},{label:"State",value:"state",key:"state"},{label:"Country",value:"country",key:"country"},{label:"Postal Code",value:"postalCode",key:"postalCode"}],pdfFormatter:h.a.clientPdfFormat,csvExcelFormatter:h.a.clientCSVExcel}),Object(m.jsx)(x,{open:M,setOpen:P})]})}},798:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s(800);var c=s(1);const a=e=>Object(c.jsxs)("div",{className:"tablelink-container",children:[Object(c.jsx)("span",{onClick:e.onClick,className:"tablelink ".concat(e.styleRed&&"red"," ").concat(e.className&&e.className),children:e.label}),e.extra&&Object(c.jsx)("span",{className:"table-link-extra",children:e.extra})]})},821:function(e,t,s){}}]);