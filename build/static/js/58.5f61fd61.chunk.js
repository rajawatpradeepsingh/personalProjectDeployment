(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[58],{1048:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return T}));var s=a(0),i=a(106),n=a(16),o=a.n(n),r=a(25),l=a(13),c=a(11),h=a.n(c),p=a(95),d=a(315),u=a(137),b=a(66),g=a(27),m=a(35),j=a(86),v=a(306),y=a(96),C=a(54),O=a(152),x=(a(855),a(1));class T extends s.Component{constructor(e){var t;super(e),t=this,this.initialState={clientId:"",client:"",clientBillRate:"",recruiterName:"",jobTitle:"",jobDescription:"",comments:"",jobType:"",workLocation:"",flsaType:"",taxType:"",creationDate:h()().format("YYYY-MM-DD"),workType:"",currency:"",city:"",country:"",postalCode:"",state:"",noOfJobopenings:"",priority:"",hiringManager:"",recruiterId:l.a.hasRecruiterRole()?l.a.getUserId():"",period:"Per hour"},this.getClients=()=>{let e=JSON.parse(sessionStorage.getItem("headers"));o.a.get(r.a.serverURL+"/clients?dropdownFilter=true",{headers:e}).then((e=>{const t=e.data;e.data&&this.setState({clientOptions:t})})).catch((e=>{console.log(e),e.response&&401===e.response.status&&l.a.logout()}))},this.resetJob=()=>{this.setState((()=>this.initialState))},this.handlePhoneChange=e=>{this.setState({phoneNumber:e})},this.closePopUp=()=>{this.setState({show:!1})},this.currencyChange=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"validateNum";t.jobChange(e,"clientBillRate"===e.target.name?a:"")},this.setClientAddr=e=>{const t=this.state.clientOptions.filter((t=>+t.id===+e)).pop().address;this.setState({address:{city:(null===t||void 0===t?void 0:t.city)||"",country:(null===t||void 0===t?void 0:t.country)||"",postalCode:(null===t||void 0===t?void 0:t.postalCode)||"",state:(null===t||void 0===t?void 0:t.state)||""}})},this.closeForm=()=>{this.props.history.push("/viewjobs")},this.state={city:"",country:"",state:"",client:"",clientId:"",clientBillRate:"",recruiterName:"",clientOptions:[],jobTitle:"",jobDescription:"",comments:"",jobType:"",workLocation:"",flsaType:"",taxType:"",creationDate:h()().format("YYYY-MM-DD"),workType:"",currency:"",postalCode:"",noOfJobopenings:"",priority:"",hiringManager:"",recruiterId:l.a.hasRecruiterRole()?l.a.getUserId():"",user:JSON.parse(sessionStorage.getItem("userInfo")),show:!1,navMenuOpen:e.navMenuOpen,period:"Per hour"},this.jobChange=this.jobChange.bind(this),this.submitJob=this.submitJob.bind(this)}componentDidMount(){this.getClients(),this.setState({setIsActive:!0,setLogout:!1})}componentDidUpdate(e){this.props.navMenuOpen!==e.navMenuOpen&&this.setState({navMenuOpen:this.props.navMenuOpen})}submitJob(e){if(e.preventDefault(),this.state.jobDescriptionErrFlag)return;const t={client:""===this.state.clientId?null:{id:this.state.clientId},clientBillRate:this.state.clientBillRate,jobTitle:this.state.jobTitle,jobDescription:this.state.jobDescription,comments:this.state.comments,jobType:this.state.jobType,workLocation:this.state.workLocation,flsaType:this.state.flsaType,taxType:this.state.taxType,creationDate:this.state.creationDate,workType:this.state.workType,currency:this.state.currency||"USD, $",noOfJobopenings:this.state.noOfJobopenings,priority:this.state.priority,hiringManager:this.state.hiringManager,recruiter:""===this.state.recruiterId?{id:JSON.parse(sessionStorage.getItem("userInfo")).id}:{id:this.state.recruiterId},period:this.state.period};let a=JSON.parse(sessionStorage.getItem("headers"));o.a.post(r.a.serverURL+"/jobopenings",t,{headers:a}).then((e=>{null!=e.data&&(this.resetJob(),this.setState({show:!0,message:"To view jobs go to ",status:"Success"}))})).catch((e=>{this.setState({show:!0,message:e.response.data,status:"Error"}),console.log(e)}))}jobChange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=""===e.target.value,s=Object(p.a)(t,e.target.value,e.target.max);(a||s)&&this.setState({[e.target.name]:e.target.value})}postValidation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=t&&!Object(p.a)(t,e.target.value);this.setState({["".concat(e.target.name,"ErrFlag")]:Boolean(a)})}render(){var e,t,a,s;const{clientId:n,jobTitle:o,jobDescription:r,comments:l,jobType:c,flsaType:h,taxType:p,workType:T,priority:f,hiringManager:S,noOfJobopenings:J,navMenuOpen:I,period:k}=this.state;return Object(x.jsxs)("div",{className:I?"page-container":"page-container full-width",children:[Object(x.jsx)("div",{className:"page-actions-container",children:Object(x.jsx)(v.a,{className:"header",crumbs:[{id:0,text:"Jobs",onClick:()=>this.closeForm()},{id:1,text:"Add Job Opening",lastCrumb:!0}]})}),Object(x.jsxs)(u.a,{children:[Object(x.jsx)(O.a,{onActive:()=>{this.setState({setIsActive:!0})},onIdle:()=>{this.setState({setIsActive:!1})},onLogout:()=>{this.setState({setLogout:!0})}}),Object(x.jsxs)(b.a,{onSubmit:this.submitJob,cancel:this.resetJob,formEnabled:!0,children:[Object(x.jsx)(g.a,{label:"Job Title",type:"text",name:"jobTitle",value:o,onChange:e=>this.jobChange(e,"validateName"),pattern:"[^0-9@#%^$&*?]+",maxLength:"50",required:!0}),Object(x.jsx)(g.a,{label:"No. of Openings",type:"number",name:"noOfJobopenings",value:J,onChange:e=>{this.jobChange(e,"validateInt")},max:"9999",required:!0,style:{textAlign:"right"},className:"align"}),Object(x.jsx)(m.a,{label:"Period",name:"period",className:"short",value:k,onChange:this.jobChange,required:!0,options:C.e.map((e=>({id:e,value:e,name:e})))}),Object(x.jsx)(d.a,{label:"Client Bill Rate",guide:this.state.period||"Per hour",id:"currency",nameCurrency:"currency",nameRate:"clientBillRate",handleChange:this.currencyChange,valueCurrency:this.state.currency,valueRate:this.state.clientBillRate,placeholder:"Enter the amount",required:!0}),Object(x.jsx)(m.a,{label:"Work Type",name:"workType",value:T,onChange:this.jobChange,required:!0,options:[{id:"Hybrid",value:"Hybrid Work",name:"Hybrid Work"},{id:"Onsite",value:"Onsite Work",name:"Onsite Work"},{id:"Remote",value:"Remote Work",name:"Remote Work"}]}),Object(x.jsx)(m.a,{label:"Priority",name:"priority",value:f,onChange:this.jobChange,required:!0,options:C.m.map((e=>({id:e,value:e,name:e})))}),Object(x.jsx)(g.a,{label:"Hiring Manager",type:"text",name:"hiringManager",value:S,onChange:e=>this.jobChange(e,"validateName"),maxLength:"20",required:!0}),Object(x.jsx)(m.a,{label:"Client",name:"clientId","data-testid":"client-options",required:!0,value:n,onChange:e=>{this.jobChange(e),this.setClientAddr(e.target.value)},options:this.state.clientOptions.map((e=>{var t;return{id:e.id,name:"".concat(e.clientName," (").concat((null===(t=e.address)||void 0===t?void 0:t.city)||"",")")}}))}),Object(x.jsx)(m.a,{label:"Employment Type",name:"jobType",value:c,onChange:this.jobChange,required:!0,options:C.k.map((e=>({id:e,value:e,name:e})))}),Object(x.jsx)(m.a,{label:"FLSA Type",name:"flsaType",value:h,onChange:this.jobChange,options:[{id:"Exempt",value:"Exempt",name:"Exempt"},{id:"Non Exempt",value:"Non Exempt",name:"Non Exempt"}]}),Object(x.jsx)(m.a,{label:"Tax Type",name:"taxType",value:p,onChange:this.jobChange,options:[{id:"C2C",value:"C2C",name:"C2C"},{id:"W-2",value:"W-2",name:"W-2"}]}),Object(x.jsx)(j.a,{label:"Job Description",name:"jobDescription",value:r,onChange:e=>{this.postValidation(e,"validateHasAlphabet"),this.jobChange(e)},required:!0,charCount:"".concat(r?3e3-r.length:3e3," of 3000"),errMssg:this.state.jobDescriptionErrFlag&&"Description can't only contain numbers",maxLength:"3000"}),Object(x.jsx)(j.a,{label:"Comments",name:"comments",value:l,onChange:e=>{this.jobChange(e)},charCount:"".concat(l?3e3-l.length:3e3," of 3000"),maxLength:"3000"})]}),Object(x.jsx)(y.a,{openModal:this.state.show,closePopUp:this.closePopUp,type:null===(e=this.state)||void 0===e?void 0:e.status,message:{title:"Error"===(null===(t=this.state)||void 0===t?void 0:t.status)?"Error":"Job Added Succesfully",details:null===(a=this.state)||void 0===a?void 0:a.message},link:"Error"===(null===(s=this.state)||void 0===s?void 0:s.status)?"":Object(x.jsx)(i.b,{to:"/viewjobs",children:"Job Openings"})})]})]})}}},855:function(e,t,a){}}]);