(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[36],{1083:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a(75),n=a(229),r=a(13),i=a(336),l=a(221),o=a(63),d=a(805);var u=a(808),b=a(22),j=a(219),O=a(218),h=a(804),m=a(798),f=a(806),v=a(801),p=a(1);const x=Object(c.forwardRef)(((e,t)=>{let{open:a,setOpen:s,...n}=e;const l=Object(c.useMemo)((()=>r.a.getHeaders()),[]),[o,d]=Object(c.useState)(1),[u,b]=Object(c.useState)(0),[j,O]=Object(c.useState)([]),h=Object(c.useCallback)((async()=>{const e=await Object(i.b)(l,o,10);e&&(O(e.data),b(e.totalItems))}),[o,l]);return Object(c.useEffect)((()=>{h()}),[o,l,h]),Object(c.useImperativeHandle)(t,(()=>({loadArchive(){h()},length:j.length}))),Object(p.jsx)(v.a,{openArchive:a,setOpenArchive:s,loadArchive:h,archive:j,archivedData:"interviewer",headers:["Interviewer(s)","Email","Contact","Location","Interview Skills","Experience","Client"],totalItems:u,setArchiveCurrentPage:d,archiveCurrentPage:o})}));var y=a(420),w=a(762),g=a(152);t.default=()=>{var e;const t=Object(s.useHistory)(),a=Object(c.useMemo)((()=>r.a.getHeaders()),[]),v=Object(c.useRef)(null),[k,S]=Object(c.useState)(1),[C,I]=Object(c.useState)(!1),[N,E]=Object(c.useState)(!1),[_,A]=Object(c.useState)([]),[R,M]=Object(c.useState)(0),[P,L]=Object(c.useState)(10),[F,H]=Object(c.useState)(!0),[B,D]=Object(c.useState)([]),[z,J]=Object(c.useState)([]),[K,T]=Object(c.useState)({}),[U,V]=Object(c.useState)({}),[q,G]=Object(c.useState)([]),[Q,W]=Object(c.useState)([]),[X,Y]=Object(c.useState)([]),[Z,$]=Object(c.useState)(!0),[ee,te]=Object(c.useState)(!1),ae=Object(c.useMemo)((()=>r.a.getUserInfo()),[]),[ce,se]=Object(c.useState)(ae.roles[0]),[ne,re]=Object(c.useState)(!1),[ie,le]=Object(c.useState)(!1);console.log(ce),Object(c.useEffect)((()=>{r.a.hasAdminRole()&&re(!0)}),[]);const oe=Object(c.useCallback)((e=>{t.push("/interviewer/".concat(e))}),[t]),de=Object(c.useCallback)((async()=>{const e=await Object(l.a)(a);200===e.statusCode?W(e.tableData.map((e=>{var t;return{text:"".concat(e.clientName," (").concat(null===(t=e.address)||void 0===t?void 0:t.city,")"),value:e.id}}))):y.b.warning("Problem getting client filter data, refresh page or contact system admin")}),[a]),ue=Object(c.useCallback)((async()=>{const e=await Object(o.e)("primeSkills",a);if(e.length){const t=e.map((e=>e.value)).sort();Y(t.map((e=>({text:e,value:e}))))}}),[a]);Object(c.useEffect)((()=>de()),[de]),Object(c.useEffect)((()=>ue()),[ue]);const be=Object(c.useMemo)((()=>[{title:"Name",dataIndex:"firstName",key:"firstName",sorter:!0,fixed:"left",width:170,render:(e,t)=>Object(p.jsx)(m.a,{onClick:()=>oe(t.id),label:"".concat(e," ").concat(t.lastName)})},{title:"Contact",dataIndex:"email",key:"email",width:120,render:(e,t)=>Object(p.jsx)(f.a,{name:e,location:t.phone_no?Object(n.b)(t.phone_no):""})},{title:"Location",dataIndex:"address",key:"address.city",sorter:!0,ellipsis:!0,render:e=>Object(p.jsx)(f.a,{name:e.city||"",location:"".concat(e.state&&"".concat(e.state,", ")).concat(e.country&&"".concat(e.country))}),width:180},{title:"Skills",dataIndex:"interview_skills",key:"interview_skills",sorter:!0,ellipsis:!0,width:170,filters:X,filterSearch:!0,render:e=>e.split(",").join(", ")},{title:"Experience",dataIndex:"total_experience",key:"total_experience",render:e=>Object(p.jsx)("div",{style:{textAlign:"right",paddingRight:"10px"},children:e?"".concat(e," year(s)"):""}),width:110,sorter:!0},{title:"Client",dataIndex:"client",key:"client.clientName",width:150,sorter:!0,render:e=>{var t;return Object(p.jsx)(f.a,{name:e.clientName,location:null===(t=e.address)||void 0===t?void 0:t.city})},filters:Q,filterSearch:!0}]),[oe,Q,X]);Object(c.useEffect)((()=>{D(be)}),[be,Q,X]);const je=Object(c.useCallback)((async()=>{const e="pageNo=".concat(k,"&pageSize=-1");if(Object.keys(U).length){let e="";for(const a in K)a&&(e+="&orderBy=".concat(a,"&orderMode=").concat(K[a]));const t=Object.keys(U).length?U:null;H(!0);const c=await Object(i.e)(a,k,P,e||"&orderBy=id&orderMode=desc",t);c&&H(!1),200===c.status&&(A(c.data),M(c.totalItems)),200!==c.status&&y.b.error("Something's gone wrong, refresh page or contact your system admin")}else{let t="?".concat(e);for(const e in K)e&&(t+="&orderBy=".concat(e,"&orderMode=").concat(K[e]));const c=await Object(i.d)(a,t);c&&H(!1),200===c.statusCode&&(A(c.tableData),M(c.totalItems)),200!==c.statusCode&&y.b.error("Something's gone wrong, refresh page or contact your system admin")}}),[a,k,P,K,U]);Object(c.useEffect)((()=>{je()}),[je,U,null===v||void 0===v||null===(e=v.current)||void 0===e?void 0:e.length]);Object(c.useEffect)((()=>{je()}),[je]);const Oe=Object(c.useCallback)((e=>V({...U,search:e})),[U]),he=Object(c.useCallback)((e=>{let t=[];for(let a in e)if("string"!==typeof e[a]&&"number"!==typeof e[a]||"id"===a||""===e[a])"object"===typeof e[a]&&(t=t.concat(he(e[a])));else if("interview_skills"===a){let c=e[a].split(", ");t.push(c[0],c[1],c[2])}else t.push(e[a]);return t}),[]);Object(c.useEffect)((()=>{if(_){let e=[];for(let t of _){he(t).forEach((t=>{e.includes(t)||e.push(t)}))}G(e)}}),[_,U,he]);const me={onChange:(e,t)=>{J(e)},selectedRowKeys:z};return Object(p.jsxs)(j.a,{children:[Object(p.jsx)(g.a,{onActive:()=>{$(!0)},onIdle:()=>{$(!1)},onLogout:()=>{te(!0)}}),Object(p.jsx)(O.a,{title:"Interviewers",actions:ne||ce.interviewsPermission?Object(p.jsxs)(b.a,{type:"button",className:"btn main",handleClick:()=>{t.push("/addinterviewer")},children:[Object(p.jsx)(w.a,{className:"icon"}),"Add Interviewer"]}):""}),Object(p.jsx)(h.a,{loading:F,data:_.map((e=>({...e,key:e.id}))),columns:B,setColumns:D,defaultColumns:be,rowSelection:!(!ne&&!ce.interviewsPermission)&&me,total:R,setCurrentPage:S,setPageSize:L,setSort:T,setFilters:V,filters:U,searchOptions:q,searchList:_,handleSearch:Oe,openArchive:()=>I(!0),openReports:()=>E(!0),handleConfirmArchive:async()=>{(await Object(i.a)(a,z)).status.filter((e=>200!==e)).length?y.b.error("Something's gone wrong, refresh page or contact your system admin"):(je(),J([]),v.current.loadArchive(),y.b.success("Interviewer record archived successfully!"))},handleCancelArchiving:()=>{J([])},removeableColumns:be.filter((e=>"Name"!==e.title&&e.title)).map((e=>e.title))}),Object(p.jsx)(d.a,{showReportModal:N,setShowReportModal:E,individualReportName:"interviewer",individualList:_,list:_.map((e=>({id:e.id,name:"".concat(e.firstName," ").concat(e.lastName)}))),listLabel:"Interviewers",filename:"interviewer_report",tableFields:[{label:"Contact ",value:"phone_no",key:"phone_no"},{label:"Email",value:"email",key:"email"},{label:"Location",value:"location",key:"location"},{label:"Total Experience",value:"total_experience",key:"total_experience"},{label:"Client",value:"client",key:"client"},{label:"Interview Skills",value:"interview_skills",key:"interview_skills"}],pdfFormatter:u.a.interviewerPdfFormat,csvExcelFormatter:u.a.interviewerCSVExcel}),Object(p.jsx)(x,{open:C,setOpen:I,ref:v})]})}},798:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(800);var c=a(1);const s=e=>Object(c.jsxs)("div",{className:"tablelink-container",children:[Object(c.jsx)("span",{onClick:e.onClick,className:"tablelink ".concat(e.styleRed&&"red"," ").concat(e.className&&e.className),children:e.label}),e.extra&&Object(c.jsx)("span",{className:"table-link-extra",children:e.extra})]})},806:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(807);var c=a(1);const s=e=>{let{name:t,location:a,...s}=e;return Object(c.jsxs)("div",{className:"client-details-container",children:[Object(c.jsx)("span",{children:t}),Object(c.jsx)("span",{children:a}),s.extra&&Object(c.jsx)("span",{children:s.extra})]})}},807:function(e,t,a){}}]);