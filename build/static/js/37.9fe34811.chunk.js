(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[37],{1092:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a(75),n=a(28),l=a(16),o=a.n(l),r=a(25),i=a(50),d=a(13),u=a(91),b=a(332),j=a(310),m=a(219),v=a(218),h=a(306),g=a(307),p=a(137),O=a(27),f=a(95),x=a(11),N=a.n(x),C=a(308),y=a.n(C),D=(a(851),a(1));var w=()=>{const e=Object(n.b)(),{editEnabled:t}=Object(n.c)((e=>e.project)),{inputErr:a,requiredErr:c}=Object(n.c)((e=>e.project)),l=t=>e(Object(b.e)(t)),{basicInfo:o}=Object(n.c)((e=>e.project)),[r,i]=Object(s.useState)(null);Object(s.useEffect)((()=>{const e=y()("1d"),t=new Date(+new Date(null===o||void 0===o?void 0:o.startDate)+e);i(N()(t).format("YYYY-MM-DD"))}),[null===o||void 0===o?void 0:o.startDate]);const d=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"validateNum";var n;n=!0,e(Object(b.c)(n));const r=Object(f.a)(s,t.target.value);let i;""!==t.target.value&&(i={...c},delete i[t.target.name],(t=>{e(Object(b.g)(t))})(i)),(t=>{e(Object(b.b)(t))})({...o,[t.target.name]:t.target.value}),r?(i={...a},delete i[t.target.name],l(i)):l({...a,[t.target.name]:"Invalid format or characters"})};return t?Object(D.jsxs)(s.Fragment,{children:[Object(D.jsx)("h3",{className:"disabled-form-section-header",children:"Basic Information"}),Object(D.jsx)(O.a,{label:"Project Name",type:"text",name:"projectName",onChange:e=>d(e,"validateName"),value:null===o||void 0===o?void 0:o.projectName,required:!0,disabled:!t}),Object(D.jsx)(O.a,{label:"Hiring Manager",type:"text",name:"hiringManager",onChange:e=>d(e,"validateName"),value:null===o||void 0===o?void 0:o.hiringManager,disabled:!t}),Object(D.jsx)(O.a,{type:"date",label:"Start Date",name:"startDate",id:"startDate",max:"2999-12-31",disabled:!t,onChange:e=>d(e),value:null===o||void 0===o?void 0:o.startDate}),Object(D.jsx)(O.a,{type:"date",label:"End Date",name:"endDate",id:"endDate",min:r,max:"2999-12-31",onChange:e=>d(e),value:null===o||void 0===o?void 0:o.endDate,disabled:!t}),Object(D.jsx)(O.a,{type:"number",pattern:"[0-9]*",label:"Client Rate",name:"clientRate",value:Number(null===o||void 0===o?void 0:o.clientRate).toFixed(2),onChange:e=>d(e,"validateHasDecimal"),disabled:!t,className:"right-align"}),Object(D.jsx)(O.a,{type:"number",label:"VMS Adjusted Bill Rate",name:"billRate",value:Number(null===o||void 0===o?void 0:o.billRate).toFixed(2),onChange:e=>d(e,"validateHasDecimal"),disabled:!t,className:"right-align"}),Object(D.jsx)(O.a,{type:"number",label:"Rebate Adjusted Bill Rate",name:"netBillRate",value:Number(null===o||void 0===o?void 0:o.netBillRate).toFixed(2),onChange:e=>d(e,"validateHasDecimal"),disabled:!t,className:"right-align"})]}):Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)("div",{className:"disabled-form-section small",children:[Object(D.jsx)("h3",{className:"disabled-form-section-header",children:" Basic Information"}),Object(D.jsxs)("div",{className:"disabled-form-section-content",children:[Object(D.jsxs)("span",{className:"disabled-form-text",children:[Object(D.jsx)("span",{className:"disabled-form-bold-text",children:"Project Name:"}),null===o||void 0===o?void 0:o.projectName]}),Object(D.jsxs)("span",{className:"disabled-form-text",children:[Object(D.jsx)("span",{className:"disabled-form-bold-text",children:"Hiring Manager:"}),null===o||void 0===o?void 0:o.hiringManager]}),Object(D.jsxs)("span",{className:"disabled-form-text",children:[Object(D.jsx)("span",{className:"disabled-form-bold-text",children:"Start Date:"}),N()(null===o||void 0===o?void 0:o.startDate).format("MM/DD/YYYY")]}),Object(D.jsxs)("span",{className:"disabled-form-text",children:[Object(D.jsx)("span",{className:"disabled-form-bold-text",children:"End Date:"}),N()(null===o||void 0===o?void 0:o.endDate).format("MM/DD/YYYY")]}),Object(D.jsxs)("span",{className:"disabled-form-align",children:[Object(D.jsx)("span",{className:"disabled-form-bold-text",children:"Client Rate:"}),Number(null===o||void 0===o?void 0:o.clientRate).toFixed(2)]}),Object(D.jsxs)("span",{className:"disabled-form-align",children:[Object(D.jsx)("span",{className:"disabled-form-bold-text",children:"VMS Adjusted Bill Rate:"}),Number(null===o||void 0===o?void 0:o.billRate).toFixed(2)]}),Object(D.jsxs)("span",{className:"disabled-form-align",children:[Object(D.jsx)("span",{className:"disabled-form-bold-text",children:"Rebate Adjusted Bill Rate:"}),Number(null===o||void 0===o?void 0:o.netBillRate).toFixed(2)]})]})]})})},M=a(66),R=a(22),k=a(96),S=a(420),E=a(781),I=a(685),Y=a(783),F=a(152),A=a(841),L=a(35);var B=()=>{var e,t,a;const{basicInfo:c}=Object(n.c)((e=>e.project)),{editEnabled:l}=Object(n.c)((e=>e.project)),i=Object(n.b)(),[u,j]=Object(s.useState)([]),m=e=>i(Object(b.b)(e)),v=d.a.getHeaders(),[h,g]=Object(s.useState)([]),[p,O]=Object(s.useState)([]),f=Object(s.useCallback)((async()=>{try{return await o.a.get(r.a.serverURL+"/resourcemanager?dropdownFilter=true&role=SALESMANAGER",{headers:v})}catch(e){console.log(e)}}),[v]);Object(s.useEffect)((()=>{let e=!1;return(async()=>{try{if(!e){const e=await f();200===e.status&&g(e.data)}}catch(a){var t;e||401!==(null===(t=a.response)||void 0===t?void 0:t.status)||d.a.logout()}})(),()=>e=!0}),[]);Object(s.useEffect)((()=>{(()=>{if(d.a.hasAdminRole()||d.a.hasRecruiterRole()){let e=JSON.parse(sessionStorage.getItem("headers"));o.a.get(r.a.serverURL+"/worker?dropdownFilter=true",{headers:e}).then((e=>{const t=e.data;e.data&&O(t)})).catch((e=>{console.log(e),e.response&&401===e.response.status&&d.a.logout()}))}})()}),[]);const x=Object(s.useCallback)((async()=>{try{return await o.a.get(r.a.serverURL+"/clients?dropdownFilter=true",{headers:v})}catch(e){console.log(e)}}),[]);Object(s.useEffect)((()=>{let e=!1;return(async()=>{try{if(!e){const e=await x();200===e.status&&j(e.data)}}catch(a){var t;e||401!==(null===(t=a.response)||void 0===t?void 0:t.status)||d.a.logout()}})(),()=>e=!0}),[x]);return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("h3",{className:"disabled-form-section-header",children:"Details "}),Object(D.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(D.jsx)(L.a,{label:"Client",name:"clientId",onChange:e=>{const t=u.filter((t=>+t.id===+e.target.value))[0];m({...c,client:{clientName:t.clientName,id:t.id,address:t.address}})},value:null===c||void 0===c||null===(e=c.client)||void 0===e?void 0:e.id,options:null===u||void 0===u?void 0:u.map((e=>{var t;return{id:null===e||void 0===e?void 0:e.id,name:"".concat(e.clientName," (").concat((null===(t=e.address)||void 0===t?void 0:t.city)||"",")")}})),disabled:!l}),Object(D.jsx)(L.a,{label:"Resource Manager",name:"resourceManagerId",onChange:e=>{const t=h.filter((t=>+t.resourceManagerId===+e.target.value))[0];m({...c,resourceManager:{name:"".concat(null===t||void 0===t?void 0:t.firstName," ").concat(null===t||void 0===t?void 0:t.lastName),resourceManagerId:null===t||void 0===t?void 0:t.resourceManagerId}})},value:null===c||void 0===c||null===(t=c.resourceManager)||void 0===t?void 0:t.resourceManagerId,options:null===h||void 0===h?void 0:h.map((e=>({id:null===e||void 0===e?void 0:e.resourceManagerId,name:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName)}))),required:!0,disabled:!l}),Object(D.jsx)(L.a,{label:"worker",name:"workerId","data-testid":"worker-options",onChange:e=>{let t=p.filter((t=>+t.id===+e.target.value))[0];m({...c,worker:{id:t.id}})},value:null===c||void 0===c||null===(a=c.worker)||void 0===a?void 0:a.id,options:p.map((e=>({id:e.id,name:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName)}))),disabled:!l})]})]})};t.default=()=>{var e,t,a;const l=Object(n.b)(),O=Object(c.useHistory)(),f=Object(c.useParams)(),x=Object(s.useMemo)((()=>d.a.getHeaders()),[]),N=Object(s.useMemo)((()=>"".concat(r.a.serverURL,"/projects")),[]),{basicInfo:C}=Object(n.c)((e=>e.project)),{changesMade:y}=Object(n.c)((e=>e.project)),{requiredErr:L}=Object(n.c)((e=>e.project)),{editEnabled:P,showProjectDetails:U}=Object(n.c)((e=>e.project)),[V,H]=Object(s.useState)(!0),[q,J]=Object(s.useState)("1"),[X]=Object(s.useState)({}),[z,K]=Object(s.useState)(!1),[T,G]=Object(s.useState)({}),[W,Q]=Object(s.useState)(!1),[Z,$]=Object(s.useState)(!0),[_]=Object(s.useState)(!1),ee=Object(s.useCallback)((()=>{l(Object(u.b)(!1)),d.a.logout()}),[l]),te=Object(s.useCallback)((e=>{l(Object(b.d)(e)),J("1")}),[l]),ae=()=>{Q(!1),G({})},se=()=>{te(!1)},ce=Object(s.useCallback)((e=>l(Object(b.f)(e))),[l]),ne=Object(s.useCallback)((e=>l(Object(b.b)(e))),[l]),le=()=>{y?(Q(!0),G({title:"Confirm Discard Changes",details:"All changes will be discarded, proceed?",confirmValue:"Confirm",cancelValue:"Cancel"})):te(!1)};Object(s.useEffect)((()=>{U&&J("2")}),[U]);const oe=Object(s.useCallback)((e=>l(Object(b.g)(e))),[l]),re=e=>{if(e.preventDefault(),Object.keys(X).length>0||Object.keys(L).length>0)K(!0);else{K(!1);const t={projectName:C.projectName,hiringManager:C.hiringManager,startDate:C.startDate,endDate:C.endDate};o.a.post("".concat(N,"/checks/").concat(C.id),t,{headers:x}).then((t=>{200===t.status&&ie(e)})).catch((e=>{i.d(e),Q(!0),G({title:"Error",details:"".concat(e.response.data),confirmValue:"Close"})}))}},ie=async e=>{e.preventDefault();const t="isLoading",a={...C};try{const e=await Object(A.f)(x,a,C.id);200===e.statusCode?(se(),H(!0),ne(e.data),ce(e.data.ProjectDetails),S.b.success({content:"Project updated!",messgKey:t,duration:5,style:{marginTop:"5%"}})):S.b.error({content:"An error occurred while saving changes (".concat(e.statusCode,")"),messgKey:t,duration:10})}catch(c){var s;401===(null===(s=c.response)||void 0===s?void 0:s.status)&&ee()}},de=Object(s.useCallback)((async()=>{try{const e=null===f||void 0===f?void 0:f.managerId;if(!e)return;const t=await Object(A.c)(x,e);200===t.statusCode?ne(t.projectData):401===t.statusCode&&ee()}catch(e){console.log(e)}}),[null===f||void 0===f?void 0:f.managerId,x,ne,ee]);Object(s.useEffect)((()=>{de()}),[de]);const ue=()=>{ce({}),te(!1),de(),Q(!1),oe({}),K(!1)};return Object(D.jsxs)(m.a,{children:[Object(D.jsx)(v.a,{breadcrumbs:Object(D.jsx)(h.a,{className:"header",crumbs:[{id:0,text:"Project",onClick:()=>(se(),te(!1),void O.push("/viewprojects"))},{id:1,text:"PRJ-".concat(null===C||void 0===C||null===(e=C.client)||void 0===e?void 0:e.clientName.toUpperCase().substr(0,3),"-").concat(("00"+(null===C||void 0===C?void 0:C.id)).slice(-5)),lastCrumb:!0}]}),actions:Object(D.jsxs)(D.Fragment,{children:[P&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(R.a,{type:"button",handleClick:re,className:"btn main submit marginX",children:"Save Changes"}),Object(D.jsx)(R.a,{type:"button",handleClick:le,className:"btn main reset marginX",children:"Cancel"})]}),Object(D.jsxs)(g.a,{children:[Object(D.jsx)(R.a,{type:"button",handleClick:()=>{P?ue():(te(!P),H(!V))},className:"btn icon marginX",title:"Edit",children:Object(D.jsx)(E.a,{})}),Object(D.jsx)(R.a,{type:"button",handleClick:()=>console.log("put onClick handler, but not an object"),disabled:!0,className:"btn icon marginX",title:"Share",children:Object(D.jsx)(I.a,{})}),Object(D.jsx)(R.a,{type:"button",handleClick:()=>console.log("put onClick handler, but not an object"),disabled:!0,className:"btn icon marginX",title:"Export Report",children:Object(D.jsx)(Y.a,{})})]})]})}),Object(D.jsx)(F.a,{onActive:()=>{$(!0)},onIdle:()=>{$(!1)},onLogout:()=>{_(!0)}}),Object(D.jsxs)("div",{className:"multi-content-container",children:[z&&Object(D.jsx)("span",{className:"fixed-error-banner",children:"Resolve errors before submitting: ".concat(Object.keys(X).concat(Object.keys(L)).join(", "))}),Object(D.jsx)(p.a,{className:"x-small",children:Object(D.jsx)(M.a,{className:"column small",onSubmit:re,cancel:le,formEnabled:P,children:Object(D.jsx)(w,{logout:ee,handleRequiredCheck:e=>{if(""===e.target.value)oe({...L,[e.target.name]:"Field is required"});else{let t={...L};delete t[e.target.name],oe(t)}}})})}),Object(D.jsx)(p.a,{className:"medium",children:Object(D.jsx)(j.a,{activeKey:q,setActiveKey:e=>{J(e),l(Object(b.h)(!1))},items:[{key:"1",label:Object(D.jsx)("span",{children:"Details"}),children:Object(D.jsx)(B,{})}]})})]}),Object(D.jsx)(k.a,{openModal:W,type:(null===(t=T.title)||void 0===t?void 0:t.toLowerCase())||"",closePopUp:ae,handleConfirmClose:null!==(a=T.title)&&void 0!==a&&a.includes("Confirm")?ue:ae,confirmValue:T.confirmValue,cancelValue:T.cancelValue,message:T})]})}},841:function(e,t,a){"use strict";a.d(t,"d",(function(){return b})),a.d(t,"e",(function(){return m})),a.d(t,"b",(function(){return v})),a.d(t,"a",(function(){return h})),a.d(t,"c",(function(){return g})),a.d(t,"f",(function(){return p}));var s=a(25),c=a(13),n=a(16),l=a.n(n),o=a(11),r=a.n(o);const i="".concat(s.a.serverURL,"/projects"),d=e=>{var t,a;if(!e.response)throw new Error;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&c.a.logout(),{status:null===(a=e.response)||void 0===a?void 0:a.status,err:e}},u=e=>e.map((e=>{var t;return{...e,projectNumber:"PRJ-".concat(null===e||void 0===e||null===(t=e.client)||void 0===t?void 0:t.clientName.toUpperCase().substr(0,3),"-").concat(("00"+(null===e||void 0===e?void 0:e.id)).slice(-5))}})),b=async function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").concat(t);return await j(e,a)},j=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const s=await l.a.get("".concat(i).concat(t).concat(a),{headers:e});let c={};return 200===s.status&&(c.tableData=u(s.data),c.totalItems=s.headers["total-elements"],c.statusCode=s.status),c}catch(n){var s;return 401===n.response.status&&c.a.logout(),{statusCode:null===(s=n.response)||void 0===s?void 0:s.status}}},m=async(e,t,a,s,c)=>{try{const n=s||c?s?"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a,"&").concat(s):"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a):"?pageNo=".concat(t-1,"&pageSize=-1"),o=c?await l.a.put("".concat(i).concat(n),c,{headers:e}):await l.a.get("".concat(i).concat(n),{headers:e});if(200===o.status)return{data:o.data,totalItems:o.headers["total-elements"],status:o.status}}catch(n){return d(n)}},v=async(e,t,a)=>{try{const s=await l.a.get("".concat(i,"?archives=true&pageNo=").concat(t-1,"&pageSize=").concat(a),{headers:e});if(s)return{data:s.data.map((e=>{var t,a,s,c,n;return{id:e.id,cellOne:(null===(t=e.client)||void 0===t?void 0:t.clientName)||"",cellTwo:(null===e||void 0===e?void 0:e.projectName)||"",cellThree:"".concat(null===(a=e.worker)||void 0===a?void 0:a.firstName," ").concat(null===(s=e.worker)||void 0===s?void 0:s.lastName),cellFour:e.startDate?r()(e.startDate).format("MM/DD/YYYY"):"",cellFive:e.endDate?r()(e.endDate).format("MM/DD/YYYY"):"",cellSix:"".concat(null===(c=e.resourceManager)||void 0===c?void 0:c.firstName," ").concat(null===(n=e.resourceManager)||void 0===n?void 0:n.lastName),cellSeven:e.netBillRate||""}})),totalItems:s.headers["total-elements"]}}catch(s){console.log(s)}},h=async(e,t)=>{try{const a=await l.a.all(t.map((t=>l.a.delete("".concat(i,"/").concat(t),{headers:e}))));if(a.length)return a[0].status}catch(a){return d(a)}},g=async(e,t)=>{try{const a=await l.a.get("".concat(s.a.serverURL,"/projects/").concat(t),{headers:e});let c={};return 200===a.status&&(c.projectData=a.data,c.Details=a.data,c.statusCode=a.status),c}catch(c){var a;return console.log(c),{statusCode:null===(a=c.response)||void 0===a?void 0:a.status}}},p=async(e,t,a)=>{try{const c=await l.a.patch("".concat(s.a.serverURL,"/projects/").concat(a),t,{headers:e});if(200===c.status)return{statusCode:200,data:c.data};if(401===c.status)return{statusCode:c.status}}catch(o){var n;return 401===o.response.status&&c.a.logout(),{statusCode:null===(n=o.response)||void 0===n?void 0:n.status}}}},851:function(e,t,a){}}]);