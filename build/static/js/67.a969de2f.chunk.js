(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[67],{1056:function(e,t,i){"use strict";i.r(t);var d=i(0),n=i(75),a=i(25),c=i(16),l=i.n(c),s=i(222),o=i(28),u=i(91),r=i(159),b=i(13),v=i(50),j=i(204),h=i(137),m=i(27),O=i(35),g=i(112),p=i(325),f=i(205),T=i(86),w=i(22),x=i(306),E=i(66),C=i(237),S=i(420),k=i(774),y=i(219),L=i(218),R=i(310),N=i(780),D=i(786),Z=i(152),I=(i(158),i(432),i(1));t.default=()=>{var e,t,i,c,U,A,F,q,H,J,K,M,_,V,z,B,G,P,Q,W,X;const[Y]=Object(d.useState)(b.a.getHeaders()),$=Object(n.useHistory)(),[ee]=Object(d.useState)(b.a.hasRecruiterRole()),te=v.a(),[ie,de]=Object(d.useState)([]),[ne,ae]=Object(d.useState)({timeZone:te}),[ce,le]=Object(d.useState)([]),[se,oe]=Object(d.useState)([]),[ue,re]=Object(d.useState)([]),[be,ve]=Object(d.useState)("1"),[je,he]=Object(d.useState)(!1),[me,Oe]=Object(d.useState)(!1),[ge,pe]=Object(d.useState)(!1),[fe,Te]=Object(d.useState)(!1),[we,xe]=Object(d.useState)(""),[Ee,Ce]=Object(d.useState)(!1),[Se,ke]=Object(d.useState)(""),[ye,Le]=Object(d.useState)(""),Re=Object(o.b)(),{interview:Ne,viewFeedback:De}=Object(o.c)((e=>e.interview)),{viewSchedule:Ze}=Object(o.c)((e=>e.interview)),[Ie,Ue]=Object(d.useState)(!0),[Ae,Fe]=Object(d.useState)(!1),[qe,He]=Object(d.useState)(!1),Je=Object(d.useMemo)((()=>b.a.getUserInfo()),[]),[Ke,Me]=Object(d.useState)(Je.roles[0]);Object(d.useEffect)((()=>{b.a.hasAdminRole()&&He(!0)}),[]),Object(d.useEffect)((()=>de(Ne)),[Ne]),Object(d.useEffect)((()=>{Ze&&ve("1")}),[Ze]),Object(d.useEffect)((()=>{De&&ve("2")}),[De]),Object(d.useEffect)((()=>{var e;pe(new Date("".concat(null===Ne||void 0===Ne||null===(e=Ne.schedule)||void 0===e?void 0:e.date))<new Date)}),[null===Ne||void 0===Ne||null===(e=Ne.schedule)||void 0===e?void 0:e.date]),Object(d.useEffect)((()=>{var e,t;ee&&Je.id!==(null===Ne||void 0===Ne||null===(e=Ne.candidate)||void 0===e||null===(t=e.recruiter)||void 0===t?void 0:t.id)&&Te(!0)}),[Je,ee,null===Ne||void 0===Ne||null===(t=Ne.candidate)||void 0===t||null===(i=t.recruiter)||void 0===i?void 0:i.id]),Object(d.useEffect)((()=>{var e;null!==Ne&&void 0!==Ne&&null!==(e=Ne.schedule)&&void 0!==e&&e.meetingURL&&xe(Object(j.d)(Ne.schedule.meetingURL))}),[null===Ne||void 0===Ne||null===(c=Ne.schedule)||void 0===c?void 0:c.meetingURL]);const _e=Object(d.useCallback)((()=>{l.a.get("".concat(a.a.serverURL,"/interviewer?dropdownFilter=true"),{headers:Y}).then((e=>{200===e.status&&le(e.data.map((e=>({id:e.id,name:"".concat(e.firstName," ").concat(e.lastName)}))))})).catch((e=>v.d(e)))}),[Y]),Ve=Object(d.useCallback)((()=>{l.a.get("".concat(a.a.serverURL,"/jobopenings?dropdownFilter=true"),{headers:Y}).then((e=>{200===e.status&&re(e.data.map((e=>({id:e.id,value:e.id,name:"".concat(e.jobTitle," (").concat(e.client.clientName,")")}))))})).catch((e=>v.d(e)))}),[Y]);Object(d.useEffect)((()=>{_e(),Ve()}),[_e,Ve]),Object(d.useEffect)((()=>{ce.length&&oe(ce.map((e=>{var t;return{id:e.id,value:e.name,label:e.name,selected:null===(t=ie.interviewers)||void 0===t?void 0:t.map((e=>e.id)).includes(e.id),isDeleted:!1}})))}),[ce,ie.interviewers]);const ze=e=>{var t;const{name:i,value:d}=e.target;switch(i){case"jobOpening":const e={id:+d};de({...ie,jobOpening:e}),ae({...ne,jobOpening:e});break;case"roundType":de({...ie,[i]:+d}),ae({...ne,[i]:+d});break;case"interviewLink":de({...ie,[i]:d}),ae({...ne,[i]:d});break;case"date":const n={[i]:d,startTimeZ:v.i(d,v.g(!0)),endTimeZ:v.i(d,v.g(!0))};de({...ie,schedule:{...ie.schedule,...n}}),ae({...ne,...n});break;case"startTimeZ":case"endTimeZ":const a={[i]:v.i(null===ie||void 0===ie||null===(t=ie.schedule)||void 0===t?void 0:t.date,d,te)};de({...ie,schedule:{...ie.schedule,...a}}),ae({...ne,...a});break;case"decision":de({...ie,schedule:{...ie.schedule,[i]:+d}}),ae({...ne,[i]:+d});break;default:if(void 0===i)return;de({...ie,schedule:{...ie.schedule,[i]:d}}),ae({...ne,[i]:d})}},Be=async e=>{var t,i,d;e.preventDefault();const n="isLoading";if(Se||ye)return;ie.schedule.decision||Ge(),S.b.loading({content:"Submitting updates...",messgKey:n,style:{marginTop:"5%"}});const a=ie.schedule.decision&&"NULL"!==ie.schedule.decision?"SELECTED"===(null===(t=ie.schedule)||void 0===t?void 0:t.decision)?1:"TENTATIVE"===(null===(i=ie.schedule)||void 0===i?void 0:i.decision)?2:"REJECTED"===(null===(d=ie.schedule)||void 0===d?void 0:d.decision)?3:ie.schedule.decision:0,c={...ne,decision:a},l=await Object(s.f)(Y,+ie.id,Ee,c);200===l.statusCode&&(S.b.success({content:"Interview updated",messgKey:n,duration:5,style:{marginTop:"5%"}}),Re(Object(r.c)(l.data)),he(!1),Oe(!1)),401===l.statusCode&&(Re(Object(u.b)(!1)),b.a.logout()),400!==l.statusCode&&500!==l.statusCode||S.b.error({content:"An error occurred while saving changes (".concat(l.statusCode,")"),messgKey:n,duration:10})},Ge=()=>{if(we){const e="".concat(ie.candidate.firstName," ").concat(ie.candidate.lastName),t=ie,i=Object(j.c)(e,t.roundType,t.schedule);Object(j.e)(i,we,Y).catch((e=>console.log(e)))}},Pe=()=>{de(Ne),ae({timeZone:te}),he(!1),Oe(!1),ke(""),Le("")},Qe=Object(d.useCallback)((()=>{Re(Object(r.d)(!1)),Re(Object(r.e)(!1)),$.push("/viewinterviews")}),[Re,$]);return Object(d.useEffect)((()=>{var e,t,i,d;je&&((null!==(e=ie.schedule)&&void 0!==e&&e.date&&null!==(t=ie.schedule)&&void 0!==t&&t.startTimeZ||null!==(i=ie.schedule)&&void 0!==i&&i.date&&null!==(d=ie.schedule)&&void 0!==d&&d.endTimeZ)&&(()=>{var e,t;const i=new Date,d=new Date(null===(e=ie.schedule)||void 0===e?void 0:e.startTimeZ),n=new Date(null===(t=ie.schedule)||void 0===t?void 0:t.endTimeZ);ke(d<i?"Interview can't be set for passed date/time":""),Le(d>=n?"End time must be greater than start time":"")})())}),[null===(U=ie.schedule)||void 0===U?void 0:U.startTimeZ,null===(A=ie.schedule)||void 0===A?void 0:A.endTimeZ,null===(F=ie.schedule)||void 0===F?void 0:F.date,je]),Object(d.useEffect)((()=>{Ne.id||Qe()}),[Ne,Qe]),Object(I.jsxs)(y.a,{children:[Object(I.jsx)(L.a,{breadcrumbs:Object(I.jsx)(x.a,{className:"header",crumbs:[{id:0,text:"Interviews",onClick:()=>Qe()},{id:1,text:"Interview: ".concat(null===Ne||void 0===Ne||null===(q=Ne.candidate)||void 0===q?void 0:q.firstName," ").concat(null===Ne||void 0===Ne||null===(H=Ne.candidate)||void 0===H?void 0:H.lastName),lastCrumb:!0}]})}),Object(I.jsx)(Z.a,{onActive:()=>{Ue(!0)},onIdle:()=>{Ue(!1)},onLogout:()=>{Fe(!0)}}),Object(I.jsx)(h.a,{children:Object(I.jsx)(R.a,{activeKey:be,setActiveKey:e=>{ve(e),Re(Object(r.e)(!1)),Re(Object(r.d)(!1))},position:"left",items:[{key:"1",label:Object(I.jsxs)("span",{children:[" ",Object(I.jsx)(N.a,{})," Schedule"]}),children:Object(I.jsxs)(E.a,{onSubmit:Be,cancel:Pe,formEnabled:je,children:[Object(I.jsx)(O.a,{label:"Round",name:"roundType",value:"number"!==typeof(null===ie||void 0===ie?void 0:ie.roundType)?"TECHNICAL_ROUND_1"===(null===ie||void 0===ie?void 0:ie.roundType)?1:"TECHNICAL_ROUND_2"===(null===ie||void 0===ie?void 0:ie.roundType)?2:3:null===ie||void 0===ie?void 0:ie.roundType,options:[{id:1,name:"Technical Round 1"},{id:2,name:"Technical Round 2"},{id:3,name:"HR Round"}],onChange:ze,disabled:!je,required:!0}),(null===ie||void 0===ie?void 0:ie.jobOpening)&&Object(I.jsx)(O.a,{label:"Job Opening",name:"jobOpening",value:(null===ie||void 0===ie?void 0:ie.jobOpening.id)||"",options:ue,onChange:ze,disabled:!je,required:!0}),!(null!==ie&&void 0!==ie&&ie.jobOpening)&&Object(I.jsx)(g.a,{className:"large ".concat(je?"":"multi-select-disabled"),label:"Interviewer(s)",isMulti:!0,options:se,handleChange:e=>{const t=e.filter((e=>e.selected)).map((e=>({id:e.id})));de({...ie,interviewers:t}),ae({...ne,interviewers:t})},disabled:!je,maxSelections:4}),Object(I.jsx)(m.a,{label:"Meeting Link",type:"text",name:"meetingURL",value:null===ie||void 0===ie||null===(J=ie.schedule)||void 0===J?void 0:J.meetingURL,disabled:!je,onChange:ze}),Object(I.jsx)(p.a,{label:"Date",name:"date",id:"date",value:null===ie||void 0===ie||null===(K=ie.schedule)||void 0===K?void 0:K.date,onChange:ze,disabled:!je,required:!0,min:(new Date).toLocaleDateString("en-ca")}),Object(I.jsx)(f.a,{label:"Start Time",required:!0,name:"startTimeZ",id:"startTimeZ",value:v.n(null===ie||void 0===ie||null===(M=ie.schedule)||void 0===M?void 0:M.startTimeZ,!0),disabled:!je,onChange:ze,info:"Timezone: ".concat(te),errMssg:Se}),Object(I.jsx)(f.a,{label:"End Time",name:"endTimeZ",id:"endTimeZ",required:!0,value:v.n(null===ie||void 0===ie||null===(_=ie.schedule)||void 0===_?void 0:_.endTimeZ,!0),disabled:!je,onChange:ze,errMssg:ye}),Object(I.jsx)("div",{className:"update-actions-container",children:!ge&&!je&&!fe&&Object(I.jsx)(w.a,{type:"button",className:"btn main outlined",handleClick:()=>{he(!0)},children:"Update Schedule"})})]})},{key:"2",label:Object(I.jsxs)("span",{children:[Object(I.jsx)(D.a,{})," Feedback & Decision"]}),children:Object(I.jsxs)(E.a,{onSubmit:Be,cancel:Pe,formEnabled:me,children:[Object(I.jsx)(O.a,{label:"Decision",name:"decision",value:"number"!==typeof(null===ie||void 0===ie||null===(V=ie.schedule)||void 0===V?void 0:V.decision)?"SELECTED"===(null===ie||void 0===ie||null===(z=ie.schedule)||void 0===z?void 0:z.decision)?1:"TENTATIVE"===(null===ie||void 0===ie||null===(B=ie.schedule)||void 0===B?void 0:B.decision)?2:"REJECTED"===(null===ie||void 0===ie||null===(G=ie.schedule)||void 0===G?void 0:G.decision)?3:"":null===(P=ie.schedule)||void 0===P?void 0:P.decision,options:[{id:1,name:"Selected"},{id:2,name:"Tentative"},{id:3,name:"Rejected"}],onChange:ze,disabled:!me}),Object(I.jsx)(m.a,{label:"Link to Recording",type:"text",name:"interviewLink",value:(null===ie||void 0===ie?void 0:ie.interviewLink)||"",onChange:ze,disabled:!me,className:"large"}),Object(I.jsx)(T.a,{label:"Feedback",name:"feedback",value:(null===ie||void 0===ie||null===(Q=ie.schedule)||void 0===Q?void 0:Q.feedback)||"",onChange:ze,maxLength:"1024",charCount:"Remaining characters: ".concat(null!==ie&&void 0!==ie&&null!==(W=ie.schedule)&&void 0!==W&&W.feedback?1024-(null===ie||void 0===ie||null===(X=ie.schedule)||void 0===X?void 0:X.feedback.length):1024," of 1024"),disabled:!me}),me&&Object(I.jsx)(C.a,{label:"Inform Candidate by Email",handleSwitch:e=>{Ce(e)}}),Object(I.jsx)("div",{className:"update-actions-container",children:!ge&&!fe&&Object(I.jsx)(k.a,{message:"Come back after interview has passed to leave feedback and update decision.",type:"info",showIcon:!0})}),Object(I.jsx)("div",{children:ge&&!me&&!fe&&Object(I.jsx)(w.a,{type:"button",className:"btn main outlined",handleClick:()=>{Oe(!0)},children:"Update Feedback"})})]})}]})})]})}}}]);