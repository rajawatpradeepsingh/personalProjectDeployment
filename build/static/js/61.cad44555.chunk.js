(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[61],{1089:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(75),s=a(28),o=a(16),i=a.n(o),l=a(25),d=a(13),r=a(50),u=a(91),b=a(330),j=a(838),m=a(35),v=a(95),g=a(221),h=a(54),O=a(108),p=a(1);var f=()=>{var e,t;const a=Object(s.b)(),{basicInfo:c,editEnabled:o,inputErr:i,requiredErr:l}=Object(s.c)((e=>e.onBoarding)),[r,u]=Object(n.useState)([]),[j,f]=Object(n.useState)([]),x=e=>a(Object(b.b)(e)),C=e=>a(Object(b.e)(e)),[y]=Object(n.useState)(d.a.getHeaders());Object(n.useEffect)((()=>{Object(g.a)(y).then((e=>u(200===e.statusCode?e.tableData:[])))}),[y]),Object(n.useEffect)((()=>{(d.a.hasAdminRole()||d.a.hasRecruiterRole())&&Object(O.g)(y).then((e=>f(e||[])))}),[y]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h3",{className:"disabled-form-section-header",children:"Basics"}),Object(p.jsx)(m.a,{label:"Candidate Name",name:"candidateId","data-testid":"candidate-options",value:(null===c||void 0===c||null===(e=c.candidate)||void 0===e?void 0:e.id)||"",onChange:e=>{const t=j.filter((t=>+t.id===+e.target.value))[0];x({...c,candidate:{firstName:t.firstName,lastName:t.lastName,id:t.id}})},options:j.map((e=>({id:e.id,name:e.fullName}))),disabled:!0}),Object(p.jsx)(m.a,{label:"Client",name:"clientId",onChange:e=>{const t=r.filter((t=>+t.id===+e.target.value))[0];x({...c,client:{clientName:t.clientName,id:t.id}})},value:null===c||void 0===c||null===(t=c.client)||void 0===t?void 0:t.id,disabled:!o,options:null===r||void 0===r?void 0:r.map((e=>({id:null===e||void 0===e?void 0:e.id,name:null===e||void 0===e?void 0:e.clientName})))}),Object(p.jsx)(m.a,{type:"text",label:"Hiring Type",name:"hiringType",value:null===c||void 0===c?void 0:c.hiringType,onChange:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{name:n,value:s}=e.target;var o;o=!0,a(Object(b.c)(o));const d=Object(v.a)(t,s);let r;""!==s&&(r={...l},delete r[n],(e=>{a(Object(b.g)(e))})(r)),x({...c,[n]:s}),d?(r={...i},delete r[n],C(r)):C({...i,[n]:"Invalid format or characters"})},maxLength:"20",disabled:!o,options:h.i.map((e=>({id:e,value:e,name:e})))})]})},x=a(27),C=a(11),y=a.n(C),N=a(308),D=a.n(N),k=a(341);var S=()=>{const{editEnabled:e}=Object(s.c)((e=>e.onBoarding)),t=Object(s.b)(),a=e=>t(Object(b.e)(e)),{inputErr:c,requiredErr:o}=Object(s.c)((e=>e.onBoarding)),{basicInfo:i}=Object(s.c)((e=>e.onBoarding)),[l,d]=Object(n.useState)(null),[r]=Object(n.useState)(!1);Object(n.useEffect)((()=>{const e=D()("1d"),t=new Date(+new Date(null===i||void 0===i?void 0:i.startDate)+e);d(y()(t).format("YYYY-MM-DD"))}),[null===i||void 0===i?void 0:i.startDate]);const u=Object(n.useCallback)((e=>t(Object(b.b)(e))),[t]),j=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var s;s=!0,t(Object(b.c)(s));const l=Object(v.a)(n,e.target.value);let d;""!==e.target.value&&(d={...o},delete d[e.target.name],(e=>{t(Object(b.g)(e))})(d)),u({...i,[e.target.name]:e.target.value}),l?(d={...c},delete d[e.target.name],a(d)):a({...c,[e.target.name]:"Invalid format or characters"})};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h3",{className:"disabled-form-section-header",children:"Project "}),Object(p.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(p.jsx)(x.a,{type:"text",label:"Project Name",name:"project",value:null===i||void 0===i?void 0:i.project,z:!0,maxLength:"20",onChange:e=>j(e,"validateName"),errMssg:c.project,disabled:!e}),Object(p.jsx)(x.a,{name:"startDate",label:"Project Start Date",id:"startDate",type:"date",max:"2999-12-31",onChange:e=>j(e),value:null===i||void 0===i?void 0:i.startDate,disabled:!e}),Object(p.jsx)(x.a,{name:"endDate",label:"Project End Date",id:"endDate",type:"date",min:l,max:"2999-12-31",onChange:e=>j(e,"validateGender"),value:null===i||void 0===i?void 0:i.endDate,disabled:!e})]}),Object(p.jsx)("h3",{className:"disabled-form-section-header",children:"Asset"}),Object(p.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:Object(p.jsx)(m.a,{type:"date",label:"Delivery Of Laptop",name:"deliveryOfLaptop",value:null===i||void 0===i?void 0:i.deliveryOfLaptop,onChange:e=>j(e,"validateGender"),maxLength:"20",disabled:!e,options:h.n.map((e=>({id:e,value:e,name:e})))})}),Object(p.jsx)("h3",{className:"disabled-form-section-header",children:"Additional"}),Object(p.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(p.jsx)(m.a,{type:"text",label:"Sign-Up-Contract",name:"signUpContract",value:null===i||void 0===i?void 0:i.signUpContract,onChange:e=>j(e,"validateName"),maxLength:"20",disabled:!e,options:h.n.map((e=>({id:e,value:e,name:e})))}),Object(p.jsx)("div",{children:r?Object(p.jsx)(x.a,{label:"Document",type:"file",name:"resume",onChange:e=>{e.target.files&&e.target.files.length>0&&(e.target.files[0].size>1048576?alert("File is too big. Please select file with size < 1MB"):u({...i,resume:e.target.files[0]}))},disabled:!e}):Object(p.jsx)(k.a,{candidateId:null===i||void 0===i?void 0:i.id,resume:null===i||void 0===i?void 0:i.resume,displayType:"link",label:"Document"})}),Object(p.jsx)(m.a,{label:"Ease Portal Setup",name:"easePortalSetUp",value:null===i||void 0===i?void 0:i.easePortalSetUp,onChange:e=>j(e,"validateName"),maxLength:"20",disabled:!e,options:h.n.map((e=>({id:e,value:e,name:e})))}),Object(p.jsx)(m.a,{label:"Workorder",name:"workOrder",value:null===i||void 0===i?void 0:i.workOrder,disabled:!e,onChange:e=>j(e,"validateName"),options:h.n.map((e=>({id:e,value:e,name:e})))}),Object(p.jsx)(m.a,{label:"Background Check",name:"backgroundCheck",value:null===i||void 0===i?void 0:i.backgroundCheck,onChange:e=>j(e,"validateName"),maxLength:"20",disabled:!e,options:h.n.map((e=>({id:e,value:e,name:e})))})]})]})},w=a(137),E=a(66),P=a(306),L=a(22),B=a(96),I=a(219),U=a(218),R=a(309),Y=a(307),M=a(310),F=a(420),A=a(152),T=a(781),z=a(685),V=a(783),X=a(763);t.default=()=>{var e,t,a,o;const m=Object(c.useParams)(),[v,g]=Object(n.useState)("1"),[h,O]=Object(n.useState)(!0),[x]=Object(n.useState)(d.a.getHeaders()),C=Object(c.useHistory)(),{editEnabled:y}=Object(s.c)((e=>e.onBoarding)),[N,D]=Object(n.useState)(!1),{changesMade:k}=Object(s.c)((e=>e.onBoarding)),[H]=Object(n.useState)("".concat(l.a.serverURL,"/onboarding")),[K]=Object(n.useState)({}),{basicInfo:W}=Object(s.c)((e=>e.onBoarding)),{requiredErr:q}=Object(s.c)((e=>e.onBoarding)),[G,J]=Object(n.useState)(!0),[Q,Z]=Object(n.useState)(!1),[$,_]=Object(n.useState)(!1),ee=Object(n.useMemo)((()=>d.a.getUserInfo()),[]),[te,ae]=Object(n.useState)(ee.roles[0]);Object(n.useEffect)((()=>{d.a.hasAdminRole()&&_(!0)}),[]);const ne=Object(s.b)(),[ce,se]=Object(n.useState)({}),oe=Object(n.useCallback)((()=>{ne(Object(u.b)(!1)),d.a.logout()}),[ne]),ie=Object(n.useCallback)((e=>ne(Object(b.b)(e))),[ne]),le=Object(n.useCallback)((e=>ne(Object(b.d)(e))),[ne]),de=Object(n.useCallback)((e=>ne(Object(b.f)(e))),[ne]),re=()=>{k?(D(!0),se({title:"Confirm Discard Changes",details:"All changes will be discarded, proceed?",confirmValue:"Confirm",cancelValue:"Cancel"})):le(!1)},ue=Object(n.useCallback)((async()=>{try{const e=null===m||void 0===m?void 0:m.onboardingId;if(!e)return;const t=await Object(j.a)(x,e);200===t.statusCode?(ie(t.onBoardingdata),de(t.onBoardingdata)):401===t.statusCode&&oe()}catch(e){console.log(e)}}),[null===m||void 0===m?void 0:m.onboardingId,x,ie,de,oe]);Object(n.useEffect)((()=>{ue()}),[h,y,ue]);const be=e=>{if(e.preventDefault(),!(Object.keys(K).length>0||Object.keys(q).length>0)){const t={};i.a.post("".concat(H,"/checks/").concat(W.id),t,{headers:x}).then((t=>{200===t.status&&je(e)})).catch((e=>{r.d(e),D(!0),se({title:"Error",details:"".concat(e.response.data),confirmValue:"Close"})}))}},je=async e=>{e.preventDefault();const t="isLoading";try{const e=await Object(j.e)(x,W,null===m||void 0===m?void 0:m.onboardingId);200===e.statusCode?(ge(),O(!0),ie(e.data),de(e.data.ProjectInfo),F.b.success({content:"onBoarding updated!",messgKey:t,duration:5,style:{marginTop:"5%"}})):F.b.error({content:"An error occurred while saving changes (".concat(e.statusCode,")"),messgKey:t,duration:10})}catch(n){var a;401===(null===(a=n.response)||void 0===a?void 0:a.status)&&oe()}},me=()=>{D(!1),se({})},ve=()=>{ie(),le(!1),de({})},ge=()=>{le(!1),ne(Object(b.f)({}))};return Object(p.jsxs)(I.a,{children:[Object(p.jsx)(U.a,{breadcrumbs:Object(p.jsx)(P.a,{className:"header",crumbs:[{id:0,text:"Onboardings",onClick:()=>(ge(),le(!1),void C.push("/viewonboardings"))},{id:1,text:"".concat(null===W||void 0===W||null===(e=W.candidate)||void 0===e?void 0:e.firstName," ").concat(null===W||void 0===W||null===(t=W.candidate)||void 0===t?void 0:t.lastName),lastCrumb:!0}]}),actions:Object(p.jsxs)(p.Fragment,{children:[y&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(L.a,{type:"button",handleClick:be,className:"btn main submit marginX",children:"Save Changes"}),Object(p.jsx)(L.a,{type:"button",handleClick:re,className:"btn main reset marginX",children:"Cancel"})]}),Object(p.jsxs)(Y.a,{children:[!d.a.hasRecruiterRole()&&($||te.managerPermission||te.candidatesPermission||te.clientPermission||te.interviewsPermission||te.jobOpeningsPermission||te.onBoardingsPermission||te.settingsPermission||te.suppliersPermission?Object(p.jsx)(L.a,{type:"button",handleClick:()=>{y?ve():(le(!y),O(!h))},className:"btn icon marginX",title:"Edit",children:Object(p.jsx)(T.a,{})}):""),Object(p.jsx)(L.a,{type:"button",handleClick:()=>console.log("put onClick handler, but not an object"),disabled:!0,className:"btn icon marginX",title:"Share",children:Object(p.jsx)(z.a,{})}),Object(p.jsx)(L.a,{type:"button",handleClick:()=>console.log("put onClick handler, but not an object"),disabled:!0,className:"btn icon marginX",title:"Export Report",children:Object(p.jsx)(V.a,{})})]})]})}),Object(p.jsx)(A.a,{onActive:()=>{J(!0)},onIdle:()=>{J(!1)},onLogout:()=>{Z(!0)}}),Object(p.jsxs)(R.a,{children:[Object(p.jsx)(w.a,{className:"x-small",children:Object(p.jsx)(E.a,{className:"column small",onSubmit:be,cancel:re,formEnabled:y,children:Object(p.jsx)(f,{})})}),Object(p.jsx)(w.a,{className:"medium",children:Object(p.jsx)(M.a,{activeKey:v,setActiveKey:e=>{g(e)},items:[{key:"1",label:Object(p.jsxs)("span",{children:[Object(p.jsx)(X.a,{})," Details"]}),children:Object(p.jsx)(S,{})}]})})]}),Object(p.jsx)(B.a,{openModal:N,type:(null===(a=ce.title)||void 0===a?void 0:a.toLowerCase())||"",closePopUp:me,handleConfirmClose:null!==(o=ce.title)&&void 0!==o&&o.includes("Confirm")?ve:me,confirmValue:ce.confirmValue,cancelValue:ce.cancelValue,message:ce})]})}},838:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return b})),a.d(t,"e",(function(){return j})),a.d(t,"d",(function(){return m})),a.d(t,"b",(function(){return v}));var n=a(25),c=a(16),s=a.n(c),o=a(13),i=a(11),l=a.n(i);const d="".concat(n.a.serverURL,"/onboarding"),r=async function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").concat(t);return await u(e,a)},u=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const n=await s.a.get("".concat(d).concat(t).concat(a),{headers:e});let c={};return 200===n.status&&(c.tableData=(e=>e.map((e=>({...e,candidateName:"".concat(e.candidate.firstName," ").concat(e.candidate.lastName)}))))(n.data),c.totalItems=n.headers["total-elements"],c.statusCode=n.status),c}catch(c){var n;return 401===c.response.status&&o.a.logout(),{statusCode:null===(n=c.response)||void 0===n?void 0:n.status}}},b=async(e,t)=>{try{const a=await s.a.get("".concat(n.a.serverURL,"/onboarding/").concat(t),{headers:e});let c={};return 200===a.status&&(c.onBoardingdata=a.data,c.onBoardingDetails=a.data,c.statusCode=a.status),c}catch(c){var a;return console.log(c),{statusCode:null===(a=c.response)||void 0===a?void 0:a.status}}},j=async(e,t,a)=>{try{const c=await s.a.patch("".concat(n.a.serverURL,"/onboarding/").concat(a),t,{headers:e});if(200===c.status)return{statusCode:200,data:c.data};if(401===c.status)return{statusCode:401}}catch(c){return console.log(c),{statusCode:c.response.status}}},m=async function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{const o=n||c?n?"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a,"&").concat(n):"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a):"?pageNo=".concat(t-1,"&pageSize=-1"),i=c?await s.a.put("".concat(d).concat(o),c,{headers:e}):await s.a.get("".concat(d).concat(o),{headers:e});if(200===i.status)return{data:i.data.map((e=>{var t,a;return{...e,candidateName:"".concat(null===(t=e.candidate)||void 0===t?void 0:t.firstName," ").concat(null===(a=e.candidate)||void 0===a?void 0:a.lastName)}})),totalItems:i.headers["total-elements"],status:i.status}}catch(r){var i,l;return 401===(null===(i=r.response)||void 0===i?void 0:i.status)&&o.a.logout(),{status:null===(l=r.response)||void 0===l?void 0:l.status}}},v=async(e,t,a)=>{try{const c=await s.a.get("".concat(n.a.serverURL,"/onboarding?archives=true&pageNo=").concat(t-1,"&pageSize=").concat(a),{headers:e});if(c)return{data:c.data.length?c.data.map((e=>{var t,a,n;return{id:e.id,cellOne:"".concat(null===(t=e.candidate)||void 0===t?void 0:t.firstName," ").concat(null===(a=e.candidate)||void 0===a?void 0:a.lastName)||"",cellTwo:(null===(n=e.client)||void 0===n?void 0:n.clientName)||"",cellThree:e.hiringType||"",cellFour:e.startDate?l()(e.startDate).format("MM/DD/YYYY"):"",cellFive:e.endDate?l()(e.endDate).format("MM/DD/YYYY"):"",cellSix:e.signUpContract||"",cellSeven:e.deliveryOfLaptop||""}})):[],totalItems:c.headers["total-elements"]}}catch(c){console.log(c)}}}}]);