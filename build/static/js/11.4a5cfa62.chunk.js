(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[11],{1086:function(e,t,a){"use strict";a.r(t);var r=a(219),s=a(218),c=(a(158),a(306)),n=a(75),o=a(0),l=a(762),i=a(22),u=a(13),d=a(798),h=a(806),b=a(804),v=a(16),j=a.n(v),m=a(25),p=a(842),f=a(420);const g=e=>{let t=[];for(let a in e)if("string"!==typeof e[a]&&"number"!==typeof e[a]||"id"===a||""===e[a])"object"===typeof e[a]&&(t=t.concat(g(e[a])));else if("workerStatus"===a){let r=e[a].split(", ");t.push(r[0],r[1],r[2])}else t.push(e[a]);return t};var O=a(810),y=a(808),w=a(805),k=a(843),x=a(801),S=a(1);const C=Object(o.forwardRef)(((e,t)=>{let{open:a,setOpen:r,...s}=e;const c=Object(o.useMemo)((()=>u.a.getHeaders()),[]),[n,l]=Object(o.useState)(1),[i,d]=Object(o.useState)(0),[h,b]=Object(o.useState)([]),v=Object(o.useCallback)((async()=>{const e=await Object(p.c)(c,n,10);e&&(b(e.data),d(e.totalItems))}),[n,c]);return Object(o.useEffect)((()=>{v()}),[n,c,v]),Object(o.useImperativeHandle)(t,(()=>({loadArchive(){v()},length:h.length}))),Object(S.jsx)(x.a,{openArchive:a,setOpenArchive:r,loadArchive:v,archive:h,archivedData:"ratecard",headers:Object(k.a)(),totalItems:i,setArchiveCurrentPage:l,archiveCurrentPage:n})}));a(823);var N=a(152);t.default=()=>{var e;const t=Object(n.useHistory)(),[a,v]=Object(o.useState)(!1),[x,R]=Object(o.useState)(!1),[I,F]=Object(o.useState)(!1),[M,P]=Object(o.useState)(!0),[z,H]=Object(o.useState)([]),[E,L]=Object(o.useState)([]),[A,D]=Object(o.useState)([]),[U,T]=Object(o.useState)(0),[B,W]=Object(o.useState)(10),[V,J]=Object(o.useState)(1),[G,K]=Object(o.useState)(!1),[_,q]=Object(o.useState)({}),[Q,X]=Object(o.useState)({}),[Y,Z]=Object(o.useState)([]),[$,ee]=Object(o.useState)(!1),[te,ae]=Object(o.useState)(!1),[re,se]=Object(o.useState)([]),[ce,ne]=Object(o.useState)([]),oe=Object(o.useMemo)((()=>u.a.getHeaders()),[]),le=Object(o.useRef)(null),[ie,ue]=Object(o.useState)(!0),[de,he]=Object(o.useState)(!1),be=Object(o.useMemo)((()=>u.a.getUserInfo()),[]),[ve,je]=Object(o.useState)(be.roles[0]);console.log(ve),Object(o.useEffect)((()=>{u.a.hasAdminRole()&&K(!0)}),[]),Object(o.useEffect)((()=>{u.a.hasAdminRole()&&K(!0),u.a.hasHRRole()&&R(!0),u.a.hasBDManagerRole()&&F(!0),u.a.hasRecruiterRole()&&v(!0)}),[]);const me=Object(o.useCallback)((e=>{t.push("/ratecard/".concat(e))}),[t]),pe=Object(o.useCallback)((async()=>{await j.a.get("".concat(m.a.serverURL,"/clients?dropdownFilter=true"),{headers:oe}).then((e=>{e.data&&se(e.data.map((e=>{var t;return{text:"".concat(e.clientName," (").concat(null===(t=e.address)||void 0===t?void 0:t.city,")"),value:e.id}})))})).catch((e=>console.log(e)))}),[oe]);Object(o.useEffect)((()=>pe()),[pe]);const fe=Object(o.useCallback)((async()=>{const e=await Object(O.f)(oe);e.tableData.length&&ne(e.tableData.map((e=>({text:"".concat(e.firstName," ").concat(e.lastName),value:e.id}))))}),[oe]);Object(o.useEffect)((()=>fe()),[fe]);const ge=Object(o.useMemo)((()=>[{title:"Worker",dataIndex:"worker",key:"worker.firstName",filters:ce,sorter:!0,fixed:"left",width:170,render:(e,t)=>Object(S.jsx)(d.a,{label:"".concat(e.firstName," ").concat(e.lastName),onClick:()=>me(t.id)})},{title:"Client",dataIndex:"client",key:"client.clientName",width:120,sorter:!0,filters:re,render:e=>{var t;return Object(S.jsx)(h.a,{name:e.clientName,location:"".concat(null===(t=e.address)||void 0===t?void 0:t.city)})}},{title:"Worker Status",dataIndex:"workerStatus",key:"workerStatus",sorter:!0,width:120},{title:"Bill Rate Per Hr",dataIndex:"billRatePerHr",key:"billRatePerHr",width:140,render:(e,t)=>Object(S.jsxs)("div",{className:"bill",children:[Object(S.jsx)("span",{children:t.currency}),Object(S.jsx)("span",{children:Number(e).toFixed(2)})]})},{title:"cost To Company Per Hr",dataIndex:"costToCompanyPerHour",key:"costToCompanyPerHour",width:120,render:(e,t)=>Object(S.jsxs)("div",{className:"bill",children:[Object(S.jsx)("span",{children:t.currency}),Object(S.jsx)("span",{children:Number(e).toFixed(2)})]})},{title:"Gross Margin",dataIndex:"grossMargin",key:"grossMargin",width:120,render:(e,t)=>Object(S.jsxs)("div",{className:"bill",children:[Object(S.jsx)("span",{children:t.currency}),Object(S.jsx)("span",{children:Number(e).toFixed(2)})]})},{title:"Net Margin",dataIndex:"netMargin",key:"netMargin",width:120,render:(e,t)=>Object(S.jsxs)("div",{className:"bill",children:[Object(S.jsx)("span",{children:t.currency}),Object(S.jsx)("span",{children:Number(e).toFixed(2)})]})}]),[me,ce,re]);Object(o.useEffect)((()=>{L(ge)}),[ge]);const Oe=Object(o.useCallback)((async()=>{const e="pageNo=".concat(V,"&pageSize=-1");if(Object.keys(Q).length){let e="";for(const r in _)r&&(e+="&orderBy=".concat(r,"&orderMode=").concat(_[r]));const t=Object.keys(Q).length?Q:null;P(!0);const a=await Object(p.b)(oe,V,B,e||"&orderBy=id&orderMode=desc",t);a&&P(!1),200===a.status&&(H(a.data),T(a.totalItems)),200!==a.status&&f.b.error("Something's gone wrong, refresh page or contact your system admin")}else{let t="?".concat(e);for(const e in _)e&&(t+="&orderBy=".concat(e,"&orderMode=").concat(_[e]));const a=await Object(p.e)(oe,t);a&&P(!1),200===a.statusCode&&(H(a.tableData),T(a.totalItems)),200!==a.statusCode&&f.b.error("Something's gone wrong, refresh page or contact your system admin")}}),[Q,V,B,oe,_]);Object(o.useEffect)((()=>{Oe()}),[Oe,Q,null===le||void 0===le||null===(e=le.current)||void 0===e?void 0:e.length]);const ye=Object(o.useCallback)((e=>X({...Q,search:e})),[Q]);Object(o.useEffect)((()=>{z.length&&Z((e=>{let t=[];for(let a of e)g(a).forEach((e=>{t.includes(e)||t.push(e)}));return t})(z))}),[z]);const we={onChange:(e,t)=>{G||ve.workerPermission?D(e):D([])},selectedRowKeys:A};return Object(S.jsxs)(r.a,{children:[Object(S.jsx)(N.a,{onActive:()=>{ue(!0)},onIdle:()=>{ue(!1)},onLogout:()=>{he(!0)}}),Object(S.jsx)(s.a,{breadcrumbs:Object(S.jsx)(c.a,{className:"header",crumbs:[{id:0,text:"Worker",onClick:()=>{t.push("/viewworkers")}},{id:1,text:"RateCard",lastCrumb:!0}]}),actions:!a&&!I&&!x&&(G||ve.workerPermission?Object(S.jsxs)(i.a,{type:"button",className:"btn main margin-left",handleClick:()=>{t.push("/addratecard")},children:[Object(S.jsx)(l.a,{className:"icon"}),"Add RateCard"]}):"")}),Object(S.jsx)(b.a,{loading:M,data:z.map((e=>({...e,key:e.id}))),columns:E,setColumns:L,defaultColumns:ge,rowSelection:!(!G&&!ve.workerPermission)&&we,total:U,setCurrentPage:J,setPageSize:W,setSort:q,setFilters:X,filters:Q,searchOptions:Y,searchList:z,handleSearch:ye,openArchive:()=>ee(!0),openReports:()=>ae(!0),handleConfirmArchive:async()=>{200===(await Object(p.a)(oe,A)).status?(Oe(),f.b.success("RateCard record archived successfully!"),le.current.loadArchive(),D([])):f.b.error("Something's gone wrong, refresh page or contact your system admin")},handleCancelArchiving:()=>{D([])},removeableColumns:ge.filter((e=>"Worker"!==e.title&&e.title)).map((e=>e.title))}),Object(S.jsx)(w.a,{showReportModal:te,setShowReportModal:ae,individualReportName:"ratecard",individualList:z,list:z.map((e=>({id:e.id,name:"".concat(e.worker.firstName+" "+e.worker.lastName)}))),listLabel:"RateCard",filename:"ratecard_report",tableFields:Object(k.c)(),pdfFormatter:y.a.ratecardPdfFormat,csvExcelFormatter:y.a.ratecardCSVExcel}),Object(S.jsx)(C,{open:$,setOpen:ee,ref:le})]})}},798:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(800);var r=a(1);const s=e=>Object(r.jsxs)("div",{className:"tablelink-container",children:[Object(r.jsx)("span",{onClick:e.onClick,className:"tablelink ".concat(e.styleRed&&"red"," ").concat(e.className&&e.className),children:e.label}),e.extra&&Object(r.jsx)("span",{className:"table-link-extra",children:e.extra})]})},806:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(807);var r=a(1);const s=e=>{let{name:t,location:a,...s}=e;return Object(r.jsxs)("div",{className:"client-details-container",children:[Object(r.jsx)("span",{children:t}),Object(r.jsx)("span",{children:a}),s.extra&&Object(r.jsx)("span",{children:s.extra})]})}},807:function(e,t,a){},810:function(e,t,a){"use strict";a.d(t,"g",(function(){return i})),a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"f",(function(){return b})),a.d(t,"i",(function(){return v})),a.d(t,"a",(function(){return j})),a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return p})),a.d(t,"h",(function(){return f}));var r=a(25),s=a(13),c=a(16),n=a.n(c);const o="".concat(r.a.serverURL,"/worker"),l=e=>{var t,a;if(!e.response)throw new Error;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&s.a.logout(),{status:null===(a=e.response)||void 0===a?void 0:a.status,err:e}},i=async function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{const c=r||s?r?"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a,"&").concat(r):"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a):"?pageNo=".concat(t-1,"&pageSize=-1"),l=s?await n.a.put("".concat(o).concat(c),s,{headers:e}):await n.a.get("".concat(o).concat(c),{headers:e});if(200===l.status)return{data:l.data,totalItems:l.headers["total-elements"],status:l.status}}catch(c){return l(c)}},u=async(e,t)=>{try{const a=await n.a.get("".concat(r.a.serverURL,"/worker/").concat(t),{headers:e});let s={};return 200===a.status&&(s.workerData=a.data,s.workerProjectDetails=a.data,s.statusCode=a.status),s}catch(s){var a;return console.log(s),{statusCode:null===(a=s.response)||void 0===a?void 0:a.status}}},d=async function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").concat(t);return await h(e,a)},h=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const r=await n.a.get("".concat(o).concat(t).concat(a),{headers:e});let s={};return 200===r.status&&(s.tableData=(e=>e.map((e=>({...e}))))(r.data),s.totalItems=r.headers["total-elements"],s.statusCode=r.status),s}catch(c){var r;return 401===c.response.status&&s.a.logout(),{statusCode:null===(r=c.response)||void 0===r?void 0:r.status}}},b=async e=>{try{const t=await n.a.get("".concat(r.a.serverURL,"/worker?dropdownFilter=true"),{headers:e});let a={};return 200===t.status&&(a.tableData=t.data,a.totalItems=t.headers["total-elements"],a.statusCode=t.status),a}catch(a){var t;return console.log(a),{statusCode:null===(t=a.response)||void 0===t?void 0:t.status}}},v=async(e,t,a)=>{try{const s=await n.a.patch("".concat(r.a.serverURL,"/worker/").concat(a),t,{headers:e});if(200===s.status)return{statusCode:200,data:s.data};if(401===s.status)return{statusCode:401}}catch(s){return console.log(s),{statusCode:s.response.status}}},j=async(e,t)=>{try{const a=await n.a.all(t.map((t=>n.a.delete("".concat(o,"/").concat(t),{headers:e}))));if(a)return{status:a[0].status}}catch(a){return l(a)}},m=async(e,t,a)=>{try{const r=await n.a.get("".concat(o,"?archives=true&pageNo=").concat(t-1,"&pageSize=").concat(a),{headers:e});if(r)return{data:r.data.map((e=>{var t;return{id:e.id,cellOne:"".concat(e.firstName," ").concat(e.lastName),cellTwo:e.email,cellThree:e.phoneNumber,cellFour:null===e||void 0===e?void 0:e.status,cellFive:null===e||void 0===e?void 0:e.subContractorCompanyName,cellSix:null===(t=e.client)||void 0===t?void 0:t.clientName}})),totalItems:r.headers["total-elements"]}}catch(r){return l(r)}},p=async(e,t)=>{const a="/".concat(t,"/resume");try{return await n.a.delete("".concat(o).concat(a),{headers:e})}catch(c){var r;return 401===c.response.status&&s.a.logout(),{statusCode:null===(r=c.response)||void 0===r?void 0:r.status}}},f=async(e,t,a)=>{const r="/".concat(t,"/resume");try{return await n.a.post("".concat(o).concat(r),a,{headers:e})}catch(l){var c;return 401===l.response.status&&s.a.logout(),{statusCode:null===(c=l.response)||void 0===c?void 0:c.status}}}},823:function(e,t,a){},842:function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"f",(function(){return d})),a.d(t,"b",(function(){return b})),a.d(t,"a",(function(){return v})),a.d(t,"c",(function(){return j}));var r=a(25),s=a(16),c=a.n(s),n=a(13);const o="".concat(r.a.serverURL,"/ratecard"),l=async(e,t)=>{try{const a=await c.a.get("".concat(r.a.serverURL,"/ratecard/").concat(t),{headers:e});let s={};return 200===a.status&&(s.rateCardData=a.data,s.statusCode=a.status),s}catch(s){var a;return 401===s.response.status&&n.a.logout(),{statusCode:null===(a=s.response)||void 0===a?void 0:a.status}}},i=async function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").concat(t);return await u(e,a)},u=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const r=await c.a.get("".concat(o).concat(t).concat(a),{headers:e});let s={};return 200===r.status&&(s.tableData=(e=>e.map((e=>({...e}))))(r.data),s.totalItems=r.headers["total-elements"],s.statusCode=r.status),s}catch(s){var r;return 401===s.response.status&&n.a.logout(),{statusCode:null===(r=s.response)||void 0===r?void 0:r.status}}},d=async(e,t,a)=>{try{const s=await c.a.patch("".concat(r.a.serverURL,"/ratecard/").concat(a),t,{headers:e});if(200===s.status)return{statusCode:200,data:s.data};if(401===s.status)return{statusCode:401}}catch(s){return 401===s.response.status&&n.a.logout(),{statusCode:s.response.status}}},h=e=>{var t,a;if(!e.response)throw new Error;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&n.a.logout(),{status:null===(a=e.response)||void 0===a?void 0:a.status,err:e}},b=async function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{const n=r||s?r?"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a,"&").concat(r):"?dropdownFilter=true&pageNo=".concat(t-1,"&pageSize=").concat(a):"?pageNo=".concat(t-1,"&pageSize=-1"),l=s?await c.a.put("".concat(o).concat(n),s,{headers:e}):await c.a.get("".concat(o).concat(n),{headers:e});if(200===l.status)return{data:l.data,totalItems:l.headers["total-elements"],status:l.status}}catch(n){return h(n)}},v=async(e,t)=>{try{const a=await c.a.all(t.map((t=>c.a.delete("".concat(r.a.serverURL,"/ratecard/").concat(t),{headers:e}))));if(a)return{status:a[0].status}}catch(a){return h(a)}},j=async(e,t,a)=>{try{const s=await c.a.get("".concat(r.a.serverURL,"/ratecard?archives=true&pageNo=").concat(t-1,"&pageSize=").concat(a),{headers:e});if(s)return{data:s.data.map((e=>{var t,a,r;return{id:e.id,cellOne:"".concat(null===(t=e.worker)||void 0===t?void 0:t.firstName," ").concat(null===(a=e.worker)||void 0===a?void 0:a.lastName),cellTwo:null===(r=e.client)||void 0===r?void 0:r.clientName,cellThree:e.workerStatus,cellFour:null===e||void 0===e?void 0:e.customer,cellFive:null===e||void 0===e?void 0:e.source,cellSix:e.seller,cellSeven:e.recruiter}})),totalItems:s.headers["total-elements"]}}catch(s){return h(s)}}},843:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return o}));var r=a(891),s=a(1);const c=()=>[{title:"Fees Details",icon:Object(s.jsx)(r.a,{style:{color:"var(--secondary-muted)",fontSize:"18px",marginBottom:"1px"}}),status:"finish"}],n=()=>[{label:"Worker Status",value:"workerStatus",key:"workerStatus"},{label:"Client",value:"client",key:"client"},{label:"VMS Provider",value:"customer",key:"customer"},{label:"Pass Thur",value:"source",key:"source"},{label:"seller",value:"seller",key:"seller"},{label:"recruiter",value:"recruiter",key:"recruiter"}],o=()=>["Worker","Client","Worker Status","VMS Provider","Pass-thur ","seller","recruiter"]},891:function(e,t,a){"use strict";var r=a(2),s=a(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"},n=a(24),o=function(e,t){return s.createElement(n.a,Object(r.a)({},e,{ref:t,icon:c}))};t.a=s.forwardRef(o)}}]);