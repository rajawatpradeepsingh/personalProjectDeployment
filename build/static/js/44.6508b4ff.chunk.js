(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[44],{1049:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return x}));var a=s(0),i=s.n(a),n=s(16),r=s.n(n),o=s(106),d=s(25),l=s(13),c=s(95),h=s(137),p=s(66),u=s(802),g=s(27),b=s(35),m=s(306),v=s(96),j=s(54),O=s(152),f=s(1);const C=j.n.map((t=>({id:t,value:t,name:t}))),S=j.i.map((t=>({id:t,value:t,name:t})));class x extends a.Component{constructor(t){var e;super(t),e=this,this.initialState={currentPage:"Basic Information",candidate:"",candidateId:"",client:"",project:"",hiringType:"",startDate:"",endDate:"",clientOptions:[],candidateOptions:[],clientId:"",signUpContract:"",deliveryOfLaptop:"",easePortalSetUp:"",workOrder:"",backgroundCheck:"",next:null,relExpBool:!1,inputErr:{},user:JSON.parse(sessionStorage.getItem("userInfo")),basicRequiredPercent:0,detailsRequiredPercent:0,basicRequiredFields:{candidateId:!1,clientId:!1,hiringType:!1},currentPercent:0,openPopUp:!1,submitError:""},this.getClients=()=>{let t=JSON.parse(sessionStorage.getItem("headers"));r.a.get(d.a.serverURL+"/clients?dropdownFilter=true",{headers:t}).then((t=>{const e=t.data;t.data&&this.setState({clientOptions:e})})).catch((t=>{console.log(t),t.response&&401===t.response.status&&l.a.logout()}))},this.getCandidates=()=>{let t=JSON.parse(sessionStorage.getItem("headers"));r.a.get(d.a.serverURL+"/candidates/confirm?dropdownFilter=true",{headers:t}).then((t=>{const e=t.data;t.data&&this.setState({candidateOptions:e})})).catch((t=>{console.log(t),t.response&&401===t.response.status&&l.a.logout()}))},this.resetOnboarding=()=>this.setState((()=>this.initialState)),this.showModal=()=>this.setState({show:!this.state.show}),this.togglePopUp=()=>this.setState({openPopUp:!this.state.openPopUp}),this.submitOnboarding=t=>{t.preventDefault();const e={candidate:""===this.state.candidateId?null:{id:this.state.candidateId},client:""===this.state.clientId?null:{id:this.state.clientId},project:""===this.state.project?"N/A":this.state.project,hiringType:this.state.hiringType,startDate:this.state.startDate,endDate:""===this.state.endDate?"N/A":this.state.endDate,signUpContract:this.state.signUpContract,deliveryOfLaptop:this.state.deliveryOfLaptop,easePortalSetUp:""===this.state.easePortalSetUp?"N/A":this.state.easePortalSetUp,workOrder:this.state.workOrder,backgroundCheck:this.state.backgroundCheck};let s=JSON.parse(sessionStorage.getItem("headers"));r.a.post("".concat(d.a.serverURL,"/onboarding"),e,{headers:s}).then((t=>{if(console.log(t.status),null!=t.data&&this.state.file){let e=t.data.id,a=this.state.file,i=new FormData;i.append("file",a),r.a.post("".concat(d.a.serverURL,"/onboarding/").concat(e,"/resume"),i,{headers:s}).then((t=>{console.log(t.status)})).catch((t=>{console.log(t),t.response&&401===t.response.status&&l.a.logout()}))}})).then((()=>{this.resetOnboarding(),this.setState({openPopUp:!0})})).catch((t=>{this.setState({submitError:t.response.data,openPopUp:!0}),t.response&&401===t.response.status&&l.a.logout()}))},this.onboardingChange=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=""===t.target.value,i=Object(c.a)(s,t.target.value,t.target.max);if(e.setState({[t.target.name]:t.target.value}),i){if(i){let s={...e.state.inputErr};delete s[t.target.name],e.setState({inputErr:s})}}else e.setState({inputErr:{...e.state.inputErr,[t.target.name]:"Invalid format or characters"}});"candidateId"!==t.target.name&&"clientId"!==t.target.name&&"hiringType"!==t.target.name||(a?e.checkRequiredFields(t.target.name,!1,"basic"):e.checkRequiredFields(t.target.name,!0,"basic"))},this.checkRequiredFields=(t,e,s)=>{if("basic"===s)this.setState({basicRequiredFields:{...this.state.basicRequiredFields,[t]:e}})},this.setClientAddr=t=>{const e=this.state.clientOptions.filter((e=>+e.id===+t)).pop().address;this.setState({address:{city:(null===e||void 0===e?void 0:e.city)||"",country:(null===e||void 0===e?void 0:e.country)||"",postalCode:(null===e||void 0===e?void 0:e.postalCode)||"",state:(null===e||void 0===e?void 0:e.state)||""}})},this.handleUploadFile=t=>{if(t.target.files&&t.target.files.length>0){if(t.target.files[0].size>1048576)return this.setState({inputErr:{...this.state.inputErr,file:"File is too big. Please select file with size < 1MB"}}),this.docRef.current.value=null,void this.setState({file:null});{this.setState({file:t.target.files[0]});let e={...this.state.inputErr};delete e.file,this.setState({inputErr:e})}}else this.setState({file:null})},this.showModal=()=>{this.setState({show:!this.state.show})},this.setCurrentPage=t=>{this.setState({currentPage:t.title})},this.closeForm=()=>{this.props.history.push("/viewonboardings")},this.state={...this.initialState,navMenuOpen:t.navMenuOpen},this.onboardingChange=this.onboardingChange.bind(this),this.submitonboarding=this.submitOnboarding.bind(this),this.handleNext=this.handleNext.bind(this),this.handleReset=this.handleReset.bind(this),this.docRef=i.a.createRef(null)}componentDidMount(){this.getClients(),this.getCandidates(),this.setState({setIsActive:!0,setLogout:!1})}componentDidUpdate(t,e){if(this.props.navMenuOpen!==t.navMenuOpen&&this.setState({navMenuOpen:this.props.navMenuOpen}),(this.state.startDate!==e.startDate||this.state.endDate!==e.endDate)&&this.state.endDate)if(this.state.startDate>=this.state.endDate)this.setState({inputErr:{...this.state.inputErr,endDate:"End date can't be before start date"}});else{let t={...this.state.inputErr};delete t.endDate,this.setState({inputErr:t})}if(this.state.currentPage!==e.currentPage&&("Basic Information"===this.state.currentPage&&this.setState({currentPercent:this.state.basicRequiredPercent}),this.state.currentPage.includes("Details")&&this.setState({currentPercent:this.state.detailsRequiredPercent})),this.state.basicRequiredFields!==e.basicRequiredFields){let t=0;for(let e in this.state.basicRequiredFields)this.state.basicRequiredFields[e]&&(t+=33.4);this.setState({currentPercent:t}),Object.values(this.state.basicRequiredFields).includes(!1)||this.setState({basicRequiredPercent:100})}}handleNext(t){t.preventDefault(),this.state.hiringType&&!this.state.relExpBool&&this.setState({next:this.state.hiringType})}handleReset(){this.setState({next:null,hiringType:""})}render(){return Object(f.jsxs)("div",{className:this.state.navMenuOpen?"page-container":"page-container full-width",children:[Object(f.jsx)("div",{className:"page-actions-container",children:Object(f.jsx)(m.a,{className:"header",crumbs:[{id:0,text:"Onboardings",onClick:()=>this.closeForm()},{id:1,text:"Add Onboarding",lastCrumb:!0}]})}),Object(f.jsxs)(h.a,{children:[Object(f.jsx)(O.a,{onActive:()=>{this.setState({setIsActive:!0})},onIdle:()=>{this.setState({setIsActive:!1})},onLogout:()=>{this.setState({setLogout:!0})}}),Object(f.jsx)(u.a,{steps:[{title:"Basic Information",hasRequiredFields:!0,subTitle:Object(f.jsx)("span",{style:{fontSize:"20px",marginBottom:"8px",color:"var(--secondary)"},children:"*"})},{title:"Details ".concat(this.state.hiringType)}],canSubmit:this.state.basicRequiredPercent>=100,submit:this.submitOnboarding,reset:this.resetOnboarding,setCurrentPage:this.setCurrentPage,percent:this.state.currentPercent,error:Object.keys(this.state.inputErr).length,children:Object(f.jsxs)(p.a,{children:["Basic Information"===this.state.currentPage&&Object(f.jsxs)(a.Fragment,{children:[Object(f.jsx)(b.a,{label:"Candidate Name",name:"candidateId","data-testid":"candidate-options",required:!0,onChange:t=>{this.onboardingChange(t)},value:this.state.candidateId,options:this.state.candidateOptions.map((t=>({id:t.id,name:"".concat(t.firstName," ").concat(t.lastName)})))}),Object(f.jsx)(b.a,{label:"Client",name:"clientId","data-testid":"client-options",onChange:t=>{this.onboardingChange(t),this.setClientAddr(t.target.value)},value:this.state.clientId,options:this.state.clientOptions.map((t=>{var e;return{id:t.id,name:"".concat(t.clientName," (").concat((null===(e=t.address)||void 0===e?void 0:e.city)||"",")")}})),required:!0}),Object(f.jsx)(g.a,{type:"text",label:"Project",name:"project",value:this.state.project,onChange:t=>this.onboardingChange(t,"validateName"),maxLength:"20",errMssg:this.state.inputErr.project}),Object(f.jsx)(b.a,{label:"Hiring Type",name:"hiringType",value:this.state.hiringType,onChange:this.onboardingChange,required:!0,options:S}),Object(f.jsx)(g.a,{type:"date",label:"Start Date",name:"startDate",onChange:this.onboardingChange,value:this.state.startDate,errMssg:this.state.inputErr.startDate,max:"2999-12-31"}),Object(f.jsx)(g.a,{type:"date",label:"End Date",name:"endDate",value:this.state.endDate,onChange:this.onboardingChange,errMssg:this.state.inputErr.endDate,max:"2999-12-31"})]}),this.state.currentPage.includes("Details")&&Object(f.jsxs)(a.Fragment,{children:[Object(f.jsx)(b.a,{label:"Sign-Up Contract",name:"signUpContract",value:this.state.signUpContract,onChange:t=>this.onboardingChange(t,"validateName"),options:C}),Object(f.jsx)(g.a,{type:"file",label:"Attach Document","data-testid":"file",name:"file",ref:this.docRef,onChange:t=>this.handleUploadFile(t),errMssg:this.state.inputErr.file}),Object(f.jsx)(b.a,{label:"Delivery of Laptop",name:"deliveryOfLaptop",value:this.state.deliveryOfLaptop,onChange:this.onboardingChange,options:C}),"Corp to Corp Hire"!==this.state.hiringType&&Object(f.jsx)(b.a,{label:"Ease Portal Setup",name:"easePortalSetUp",value:this.state.easePortalSetUp,onChange:this.onboardingChange,options:C}),Object(f.jsx)(b.a,{label:"Workorder",name:"workOrder",value:this.state.workOrder,onChange:this.onboardingChange,options:C}),Object(f.jsx)(b.a,{label:"Background Check",name:"backgroundCheck",value:this.state.backgroundCheck,onChange:this.onboardingChange,options:C})]})]})}),Object(f.jsx)(v.a,{openModal:this.state.openPopUp,closePopUp:this.togglePopUp,handleConfirmClose:this.togglePopUp,type:this.state.submitError?"Warning":"Success",message:{title:this.state.submitError?"Error":"Onboarding Added Succesfully",details:this.state.submitError?"Error while saving record ".concat(this.state.submitError):"To view onboardings go to "},link:this.state.submitError?"":Object(f.jsx)(o.b,{to:"viewonboardings",children:"Onboardings"})})]})]})}}},802:function(t,e,s){"use strict";var a=s(0),i=s(1066),n=s(22),r=s(1042),o=s(677),d=(s(803),s(158),s(1));e.a=t=>{var e,s,l;const[c,h]=Object(a.useState)(0),p=null===(e=t.steps)||void 0===e?void 0:e.map((t=>({title:t.title,subTitle:t.subTitle&&t.subTitle,icon:t.icon&&t.icon,status:t.status&&t.status})));Object(a.useEffect)((()=>{h(t.index||0)}),[t.index]);return Object(d.jsxs)("div",{className:"form-nav-container",children:[Object(d.jsx)(i.a,{className:"form-nav-steps",current:c,percent:t.percent,onChange:t.clickable?e=>{h(e),t.setCurrentPage(t.steps[e])}:null,type:t.type&&"navigation"===t.type?"navigation":"",items:p}),Object(d.jsx)("div",{className:"steps-content-container",children:t.children}),Object(d.jsxs)("div",{className:"steps-action",children:[!t.hideNavBtns&&Object(d.jsxs)(n.a,{type:"button",name:"form-nav-back-btn",className:"icon-btn icon-text no-border",handleClick:()=>(h(c-1),void t.setCurrentPage(t.steps[c-1])),disabled:0===c,children:[Object(d.jsx)(r.a,{}),"Previous"]}),t.canSubmit&&!t.hideFormBtns&&Object(d.jsx)(n.a,{type:"reset",name:"form-reset-btn",className:"btn main reset",handleClick:()=>{t.reset(),h(0)},children:"Cancel"}),t.canSubmit&&!t.hideFormBtns&&Object(d.jsx)(n.a,{type:"submit",name:"form-submit-btn",className:"btn main submit",disabled:t.submitError,handleClick:e=>(e=>{t.submit(e),h(0)})(e),children:"Submit"}),!t.hideFormBtns&&Object(d.jsxs)(n.a,{type:"button",name:"form-nav-next-btn",className:"icon-btn icon-text no-border",handleClick:()=>(h(c+1),void t.setCurrentPage(t.steps[c+1])),disabled:t.error||(null===(s=t.steps[c])||void 0===s?void 0:s.hasRequiredFields)&&t.percent<100||c>=(null===(l=t.steps)||void 0===l?void 0:l.length)-1,children:["Next",Object(d.jsx)(o.a,{})]})]})]})}},803:function(t,e,s){}}]);